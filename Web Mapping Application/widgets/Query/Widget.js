//>>built
require({cache:{"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),function(g,c,s,d,e,h,k,r,b,l,a,p,y,u,x){c=c("dijit.TitlePane",[y,p,a],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:x.defaultDuration,
baseClass:"dijitTitlePane",templateString:u,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);s.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,this.baseClass+"Title");var a=this.hideNode,f=this.wipeNode;this._wipeIn=k.wipeIn({node:f,duration:this.duration,beforeBegin:function(){a.style.display=""}});this._wipeOut=k.wipeOut({node:f,
duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,f){g.forEach([this._wipeIn,this._wipeOut],function(f){f&&"playing"==f.status()&&f.stop()});f?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},
_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(d.remove(this.focusNode,"aria-controls"),d.remove(this.focusNode,"tabIndex"),d.remove(this.focusNode,"aria-pressed"));this._set("toggleable",a);this._setCss()},_setContentAttr:function(a){!this.open||!this._wipeOut||"playing"==this._wipeOut.status()?
this.inherited(arguments):(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),h.setMarginBox(this.wipeNode,{h:h.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display="")},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=this.titleBarNode||this.focusNode,f=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");e.replace(a,this._titleBarClass,
f||"");e.replace(a,this._titleBarClass.replace("TitlePaneTitle",""),(f||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(a){a.keyCode==l.DOWN_ARROW&&this.open&&(this.containerNode.focus(),a.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(a){b.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",a)}});r("dojo-bidi")&&c.extend({_setTitleAttr:function(a){this._set("title",
a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(a){this._set("tooltip",a);this.textDir&&(a=this.enforceTextDirWithUcc(null,a));d.set(this.focusNode,"title",a)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title),this.set("tooltip",this.tooltip))}});return c})},"jimu/dijit/FilterParameters":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/html dojo/_base/array dojo/query dijit/registry jimu/filterUtils jimu/utils ./_SingleFilterParameter".split(" "),
function(g,c,s,d,e,h,k,r,b,l,a,p){return g([c,s,d],{baseClass:"jimu-filter-parameters",templateString:'\x3cdiv\x3e\x3ctable style\x3d"width:100%;border-collapse:collapse;"\x3e\x3ctbody data-dojo-attach-point\x3d"tbody"\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e',nls:null,partsObj:null,layerInfo:null,OPERATORS:null,url:null,_filterUtils:null,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;this._filterUtils=new l;this.OPERATORS=e.clone(this._filterUtils.OPERATORS)},destroy:function(){this.clear();
this._filterUtils=null;this.inherited(arguments)},getFilterExpr:function(){for(var c=this.partsObj,d=this._getAllIntractiveSinglePartArray(c),p=0;p<d.length;p++){var e=d[p],f=e.spId;if(f&&(f=r("#"+f,this.tbody)[0])){f=b.byNode(f).getValueObj();if(!f)return null;e.valueObj=f}}this._filterUtils.isHosted=a.isHostedService(this.url);return this._filterUtils.getExprByFilterObj(c)},clear:function(){this.url=null;var a=r(".jimu-widget-query-single-parameter",this.tbody);k.forEach(a,e.hitch(this,function(a){b.byNode(a).destroy()}));
h.empty(this.tbody);this.layerInfo=this.partsObj=null},build:function(a,b,c){this.clear();this.url=a;this.layerInfo=b;this.partsObj=e.clone(c);a=this._getAllIntractiveSinglePartArray(this.partsObj);k.forEach(a,e.hitch(this,function(a){var f=h.create("tr",{innerHTML:"\x3ctd\x3e\x3c/td\x3e"},this.tbody),f=r("td",f)[0],b=this._getFieldInfo(a.fieldObj.name,this.layerInfo),b=new p({nls:this.nls,part:a,fieldInfo:b,OPERATORS:this.OPERATORS,url:this.url});b.placeAt(f);b.startup();a.spId=b.id}))},_getFieldInfo:function(a,
b){for(var c=b.fields,d=0;d<c.length;d++){var f=c[d];if(a===f.name)return f}return null},_getAllIntractiveSinglePartArray:function(a){for(var b=[],c=0;c<a.parts.length;c++){var d=a.parts[c];if(d.parts)for(var f=0;f<d.parts.length;f++){var p=d.parts[f];p.interactiveObj&&b.push(p)}else d.interactiveObj&&b.push(d)}return b}})})},"jimu/dijit/_SingleFilterParameter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilterParameter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/store/Memory jimu/utils dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),
function(g,c,s,d,e,h,k,r,b,l){return g([c,s,d],{baseClass:"jimu-single-filter-parameter",templateString:e,fieldInfo:null,part:null,nls:null,OPERATORS:null,url:null,_type:-1,postCreate:function(){this.inherited(arguments);var a=new b({idProperty:"id",data:[]});this.stringUniqueValuesSelect.set("store",a);a=new b({idProperty:"id",data:[]});this.numberUniqueValuesSelect.set("store",a);this.fieldInfo&&this.part&&this.build(this.fieldInfo,this.part)},getValueObj:function(){var a=null,b=this.part.fieldObj.shortType;
"string"===b?a=this._getStirngValueObj():"number"===b?a=this._getNumberValueObj():"date"===b&&(a=this._getDateValueObj());a&&(a.type=this.part.valueObj.type,a.isValid=!0);return a},_getStirngValueObj:function(){var a=null;if(1===this._type){if(!this.stringTextBox.validate())return this._showValidationErrorTip(this.stringTextBox),null;a={};a.value=this.stringTextBox.get("value")}else if(2===this._type){if(!this.stringCodedValuesFS.validate())return this._showValidationErrorTip(this.stringCodedValuesFS),
null;var a={},b=this._getSelectedFilteringItem(this.stringCodedValuesFS);a.value=b.code}else if(3===this._type){if(!this.stringUniqueValuesSelect.validate())return this._showValidationErrorTip(this.stringUniqueValuesSelect),null;a={};b=this._getSelectedFilteringItem(this.stringUniqueValuesSelect);a.value=b.value}return a},_getNumberValueObj:function(){var a=null;if(1===this._type){if(!this.numberTextBox.validate())return this._showValidationErrorTip(this.numberTextBox),null;a={};a.value=parseFloat(this.numberTextBox.get("value"))}else if(2===
this._type){if(!this.numberCodedValuesFS.validate())return this._showValidationErrorTip(this.numberCodedValuesFS),null;var a={},b=this._getSelectedFilteringItem(this.numberCodedValuesFS);a.value=parseFloat(b.code)}else if(3===this._type){if(!this.numberTextBox1.validate())return this._showValidationErrorTip(this.numberTextBox1),null;if(!this.numberTextBox2.validate())return this._showValidationErrorTip(this.numberTextBox2),null;a={};a.value1=parseFloat(this.numberTextBox1.get("value"));a.value2=parseFloat(this.numberTextBox2.get("value"))}else if(4===
this._type){if(!this.numberUniqueValuesSelect.validate())return this._showValidationErrorTip(this.numberUniqueValuesSelect),null;a={};b=this.numberUniqueValuesSelect.get("item");a.value=parseFloat(b.value)}return a},_getDateValueObj:function(){var a=null;if(1===this._type){if(!this.dateTextBox.validate())return this._showValidationErrorTip(this.dateTextBox),null;a={};a.value=this.dateTextBox.get("value").toDateString()}else if(2===this._type){if(!this.dateTextBox1.validate())return this._showValidationErrorTip(this.dateTextBox1),
null;if(!this.dateTextBox2.validate())return this._showValidationErrorTip(this.dateTextBox2),null;a={};a.value1=this.dateTextBox1.get("value").toDateString();a.value2=this.dateTextBox2.get("value").toDateString()}return a},build:function(a,b){this.fieldInfo=a;this.part=b;var c=b.interactiveObj;c&&(this.promptNode.innerHTML=c.prompt||"",this.hintNode.innerHTML=c.hint||"");c=this.part.fieldObj.shortType;"string"===c?this._buildString(a,this.part):"number"===c?this._buildNumber(a,this.part):"date"===
c&&this._buildDate(a,this.part)},_getCodedValues:function(a){var b=null;if((a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length)b=a.codedValues;return b},_buildString:function(a,c){k.setStyle(this.stringTextBoxContainer,"display","block");k.setStyle(this.numberTextBoxContainer,"display","none");k.setStyle(this.dateTextBoxContainer,"display","none");this._hideDijit(this.stringTextBox);this._hideDijit(this.stringCodedValuesFS);this._hideDijit(this.stringUniqueValuesSelect);var d=
c.fieldObj,e=c.valueObj,g=e.type,m=this._getCodedValues(a);m?(this._type=2,this._showDijit(this.stringCodedValuesFS),g=r.map(m,h.hitch(this,function(a,b){var c=h.mixin({},a);c.id=b;return c})),m=new b({data:g}),this.stringCodedValuesFS.set("store",m),e&&(m=r.filter(g,h.hitch(this,function(a){return a.code===e.value})),0<m.length?this.stringCodedValuesFS.set("value",m[0].id):this.stringCodedValuesFS.set("value",g[0].id))):"unique"===g?(this._type=3,this._showDijit(this.stringUniqueValuesSelect),l.getUniqueValues(this.url,
d.name).then(h.hitch(this,function(a){var b=-1;a=r.map(a,h.hitch(this,function(a,f){var c=a;"number"===d.shortType&&(a=parseFloat(a),c=this._tryLocaleNumber(a));c={id:f,value:a,label:c};e&&e.value===a&&(b=f);return c}));this.stringUniqueValuesSelect.store.setData(a);0<=b&&(a=this.stringUniqueValuesSelect.store.get(b))&&this.stringUniqueValuesSelect.set("item",a)}),h.hitch(this,function(a){console.error(a)}))):(this._type=1,this._showDijit(this.stringTextBox),this.stringTextBox.set("value",e.value||
""))},_tryLocaleNumber:function(a){var b=l.localizeNumber(a);if(null===b||void 0===b)b=a;return b},_buildNumber:function(a,c){k.setStyle(this.stringTextBoxContainer,"display","none");k.setStyle(this.numberTextBoxContainer,"display","block");k.setStyle(this.dateTextBoxContainer,"display","none");this._hideDijit(this.numberTextBox);this._hideDijit(this.numberCodedValuesFS);k.setStyle(this.numberRangeTable,"display","none");this._hideDijit(this.numberUniqueValuesSelect);var d=c.fieldObj,e=c.valueObj,
g=e.type,m=c.operator,f=m===this.OPERATORS.numberOperatorIsNotBetween;if(m===this.OPERATORS.numberOperatorIsBetween||f)this._type=3,k.setStyle(this.numberRangeTable,"display","table"),l.isValidNumber(e.value1)&&this.numberTextBox1.set("value",e.value1),l.isValidNumber(e.value2)&&this.numberTextBox2.set("value",e.value2);else if(k.setStyle(this.numberRangeTable,"display","none"),m=this._getCodedValues(a))if(this._type=2,this._showDijit(this.numberCodedValuesFS),g=r.map(m,h.hitch(this,function(a,f){var b=
h.clone(a);b.id=f;return b})),m=new b({data:g}),this.numberCodedValuesFS.set("store",m),e&&l.isValidNumber(e.value)){var w=parseFloat(e.value),m=r.filter(g,h.hitch(this,function(a){return parseFloat(a.code)===w}));0<m.length?this.numberCodedValuesFS.set("value",m[0].id):this.numberCodedValuesFS.set("value",g[0].id)}else this.numberCodedValuesFS.set("value",g[0].id);else"unique"===g?(this._type=4,this._showDijit(this.numberUniqueValuesSelect),l.getUniqueValues(this.url,d.name).then(h.hitch(this,function(a){var f=
-1;a=r.map(a,h.hitch(this,function(a,b){var c=a;"number"===d.shortType&&(a=parseFloat(a),c=this._tryLocaleNumber(a));c={id:b,value:a,label:c};e&&e.value===a&&(f=b);return c}));this.numberUniqueValuesSelect.store.setData(a);0<=f&&(a=this.numberUniqueValuesSelect.store.get(f))&&this.numberUniqueValuesSelect.set("item",a)}),h.hitch(this,function(a){console.error(a)}))):(this._type=1,this._showDijit(this.numberTextBox),e&&l.isValidNumber(e.value)&&this.numberTextBox.set("value",e.value))},_buildDate:function(a,
b){k.setStyle(this.stringTextBoxContainer,"display","none");k.setStyle(this.numberTextBoxContainer,"display","none");k.setStyle(this.dateTextBoxContainer,"display","block");var c=b.valueObj,d=b.operator,e=d===this.OPERATORS.dateOperatorIsNotBetween;d===this.OPERATORS.dateOperatorIsBetween||e?(this._type=2,k.setStyle(this.dateRangeTable,"display","table"),this._hideDijit(this.dateTextBox),this.dateTextBox1.set("value",new Date(c.value1)),this.dateTextBox2.set("value",new Date(c.value2))):(this._type=
1,k.setStyle(this.dateRangeTable,"display","none"),this._showDijit(this.dateTextBox),this.dateTextBox.set("value",new Date(c.value)))},_getSelectedFilteringItem:function(a){if(a.validate()){var b=a.get("item");if(b)return b}this._showValidationErrorTip(a);return null},_showValidationErrorTip:function(a){!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())},_showDijit:function(a){a&&a.domNode&&k.setStyle(a.domNode,"display","inline-block")},_hideDijit:function(a){a&&a.domNode&&
k.setStyle(a.domNode,"display","none")},_onRangeNumberBlur:function(){if(this.numberTextBox1.validate()&&this.numberTextBox2.validate()){var a=parseFloat(this.numberTextBox1.get("value")),b=parseFloat(this.numberTextBox2.get("value"));a>b&&(this.numberTextBox1.set("value",b),this.numberTextBox2.set("value",a))}},_onRangeDateBlur:function(){if(this.dateTextBox1.validate()&&this.dateTextBox2.validate()){var a=this.dateTextBox1.get("value"),b=a.getTime(),c=this.dateTextBox2.get("value"),d=c.getTime();
b>d&&(this.dateTextBox1.set("value",c),this.dateTextBox2.set("value",a))}}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(g,c,s,d,e){return g("dijit.form.FilteringSelect",[d,e],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},
_callbackSetLabel:function(c,d,e,b){d&&d[this.searchAttr]!==this._lastQuery||!d&&c.length&&this.store.getIdentity(c[0])!=this._lastQuery||(c.length?this.set("item",c[0],b):this.set("value","",b||void 0===b&&!this.focused,this.textbox.value,null))},_openResultList:function(c,d,e){d[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(d,
e,g,b){this._onChangeActive||(e=null);if(void 0===b){if(null===d||""===d)if(d="",!c.isString(g)){this._setDisplayedValueAttr(g||"",e);return}var l=this;this._lastQuery=d;s(this.store.get(d),function(a){l._callbackSetLabel(a?[a]:[],void 0,void 0,e)})}else this.valueNode.value=d,this.inherited(arguments,[d,e,g,b])},_setItemAttr:function(c,d,e){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(c){return c.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(d,
e){null==d&&(d="");if(!this._created){if(!("displayedValue"in this.params))return;e=!1}if(this.store){this.closeDropDown();var g=c.clone(this.query),b=this._getDisplayQueryString(d),l;this.store._oldAPI?l=b:(l=this._patternToRegExp(b),l.toString=function(){return b});this._lastQuery=g[this.searchAttr]=l;this._lastDisplayedValue=this.textbox.value=d;this._set("displayedValue",d);var a=this,p={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};c.mixin(p,this.fetchProperties);this._fetchHandle=this.store.query(g,
p);s(this._fetchHandle,function(b){a._fetchHandle=null;a._callbackSetLabel(b||[],g,p,e)},function(b){a._fetchHandle=null;a._cancelingQuery||console.error("dijit.form.FilteringSelect: "+b.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(g,c,s){return g("dijit.form.DateTextBox",s,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:c,_selector:"date",
maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),function(g,c,s,d,e,h,k,r,b,l,a,p,y,u,x,m,f){var w=d("dijit.Calendar",[y,u,x],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",
incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){r.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new w._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:l.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);
this.own(a(this.domNode,"keydown",l.hitch(this,"_onKeyDown")),a(this.dateRowsNode,"mouseover",l.hitch(this,"_onDayMouseOver")),a(this.dateRowsNode,"mouseout",l.hitch(this,"_onDayMouseOut")),a(this.dateRowsNode,"mousedown",l.hitch(this,"_onDayMouseDown")),a(this.dateRowsNode,"mouseup",l.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var f=this.currentFocus.getDate();b.setDate(Math.min(f,
a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=h.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!h.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))h.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){this._currentNode&&!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)&&(a="dijitCalendarHoveredDate",h.contains(this._currentNode,"dijitCalendarActiveDate")&&
(a+=" dijitCalendarActiveDate"),h.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!h.contains(a,"dijitCalendarDisabledDate"))h.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&h.remove(a,"dijitCalendarActiveDate")},handleKey:function(a){var f=-1,c,d=this.currentFocus;switch(a.keyCode){case b.RIGHT_ARROW:f=1;case b.LEFT_ARROW:c="day";this.isLeftToRight()||
(f*=-1);break;case b.DOWN_ARROW:f=1;case b.UP_ARROW:c="week";break;case b.PAGE_DOWN:f=1;case b.PAGE_UP:c=a.ctrlKey||a.altKey?"year":"month";break;case b.END:d=this.dateModule.add(d,"month",1),c="day";case b.HOME:d=new this.dateClassObj(d);d.setDate(1);break;default:return!0}c&&(d=this.dateModule.add(d,c,f));this._setCurrentFocusAttr(d);return!1},_onKeyDown:function(a){this.handleKey(a)||(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},
getClassForDate:function(){}});w._MonthDropDownButton=d("dijit.Calendar._MonthDropDownButton",f,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new w._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",b);this.containerNode.innerHTML=(6==p("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+
"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});w._MonthDropDown=d("dijit.Calendar._MonthDropDown",[u,m,x],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML="";g.forEach(a,function(a,b){k.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState=
"dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(e.get(a.target,"month"))},onChange:function(){}});return w})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),function(g,c,s,d,e,h,k,r,b,l,a,p,y,u,x){var m=c("dijit.CalendarLite",
[y,u],{templateString:x,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',
value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,
b){"string"==typeof a&&(a=h.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},
_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),c=this.dateModule.getDaysInMonth(a),d=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),e=new this.dateClassObj,l=s.getFirstDayOfWeek(this.lang);l>b&&(l-=7);if(!this.summary){var k=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",k[a.getMonth()])}this._date2cell={};g.forEach(this.dateCells,function(g,
k){var h=k+l,n=new this.dateClassObj(a),t="dijitCalendar",q=0;h<b?(h=d-b+h+1,q=-1,t+="Previous"):h>=b+c?(h=h-b-c+1,q=1,t+="Next"):(h=h-b+1,t+="Current");q&&(n=this.dateModule.add(n,"month",q));n.setDate(h);this.dateModule.compare(n,e,"date")||(t="dijitCalendarCurrentDate "+t);this.isDisabledDate(n,this.lang)?(t="dijitCalendarDisabledDate "+t,g.setAttribute("aria-disabled","true")):(t="dijitCalendarEnabledDate "+t,g.removeAttribute("aria-disabled"),g.setAttribute("aria-selected","false"));(q=this.getClassForDate(n,
this.lang))&&(t=q+" "+t);g.className=t+"Month dijitCalendarDateTemplate";t=n.valueOf();this._date2cell[t]=g;g.dijitDateValue=t;this._setText(this.dateLabels[k],n.getDateLocalized?n.getDateLocalized(this.lang):n.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;g.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],
this.dateLocaleModule.format(c,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?b.getObject(a.datePackage,!1):d;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?b.getObject(a.datePackage+".locale",!1):e},_createMonthWidget:function(){return m._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=
this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=s.getFirstDayOfWeek(this.lang);this.dayCellsHtml=p.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=p.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);k.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();
this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=b.hitch(this,function(a,c,d){this[a].dojoClick=!0;return l(this[a],"click",b.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,c,d))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(b,c){var d=this.currentFocus,
e=this._getNodeByDate(d);b=this._patchDate(b);this._set("currentFocus",b);if(!this._date2cell||0!=this.dateModule.difference(d,b,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);d=this._getNodeByDate(b);d.setAttribute("tabIndex",this.tabIndex);(this.focused||c)&&d.focus();e&&e!=d&&(a("webkit")?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();
a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!r.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function c(a,b){r.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":"false")}g.forEach(this._selectedCells||[],b.partial(c,!1));this._selectedCells=g.filter(g.map(a,this._getNodeByDate,
this),function(a){return a});g.forEach(this._selectedCells,b.partial(c,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});m._MonthWidget=c("dijit.CalendarLite._MonthWidget",y,{_setMonthAttr:function(b){var c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b),d=6==a("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+g.map(c,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=d+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+
c[b.getMonth()]+"\x3c/div\x3e"}});return m})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(g,c,s,d,e,h,k,r){new Date("X");return d("dijit.form._DateTimeTextBox",[h,k],{templateString:r,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:c.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);
this._set("type","text")},compare:function(b,c){var a=this._isInvalidDate(b),d=this._isInvalidDate(c);if(a||d)return a&&d?0:!a?1:-1;var a=this.format(b,this._unboundedConstraints),d=this.format(c,this._unboundedConstraints),e=this.parse(a,this._unboundedConstraints),h=this.parse(d,this._unboundedConstraints);return a==d?0:g.compare(e,h,this._selector)},autoWidth:!0,format:function(b,c){return!b?"":this.dateLocaleModule.format(b,c)},parse:function(b,c){return this.dateLocaleModule.parse(b,c)||(this._isEmpty(b)?
null:void 0)},serialize:function(b,c){b.toGregorian&&(b=b.toGregorian());return s.toISOString(b,c)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){b=b||{};this.dateModule=b.datePackage?e.getObject(b.datePackage,!1):g;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=b.datePackage?e.getObject(b.datePackage+".locale",!1):c;this._set("pattern",
this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(b){b.selector=this._selector;b.fullYear=!0;var c=s.fromISOString;"string"==typeof b.min&&(b.min=c(b.min),this.dateClassObj instanceof Date||(b.min=new this.dateClassObj(b.min)));
"string"==typeof b.max&&(b.max=c(b.max),this.dateClassObj instanceof Date||(b.max=new this.dateClassObj(b.max)));this.inherited(arguments);this._unboundedConstraints=e.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(b){return!b||isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,c,a){void 0!==b&&("string"==typeof b&&(b=s.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));
this.inherited(arguments,[b,c,a]);this.value instanceof Date&&(this.filterString="");this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,c){if("value"==b){c instanceof Date&&!(this.dateClassObj instanceof Date)&&(c=new this.dateClassObj(c));var a=this._get("value");if(a instanceof this.dateClassObj&&0==this.compare(c,a))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this._set("dropDownDefaultValue",b)},openDropDown:function(b){this.dropDown&&
this.dropDown.destroy();var c=e.isString(this.popupClass)?e.getObject(this.popupClass,!1):this.popupClass,a=this,d=this.get("value");this.dropDown=new c({onChange:function(b){a.set("value",b,!0)},id:this.id+"_popup",dir:a.dir,lang:a.lang,value:d,textDir:a.textDir,currentFocus:!this._isInvalidDate(d)?d:this.dropDownDefaultValue,constraints:a.constraints,filterString:a.filterString,datePackage:a.datePackage,isDisabledDate:function(b){return!a.rangeCheck(b,a.constraints)}});this.inherited(arguments)},
_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,c){this._setValueAttr(this.parse(b,this.constraints),c,b)}})})},"widgets/Query/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_SingleFilterParameter.html":'\x3cdiv\x3e\r\n  \x3ctable style\x3d"width:100%;"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"100px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"prompt" data-dojo-attach-point\x3d"promptNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"allValueBoxContainer" style\x3d"width:100%;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"stringTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"stringTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"display:none;width:100%;" class\x3d"dijit-form-ValidationTextBox" /\x3e\r\n\r\n              \x3cdiv data-dojo-attach-point\x3d"stringCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\r\n              \x3cdiv data-dojo-attach-point\x3d"stringUniqueValuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"label",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"numberTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"display:none;width:100%;" /\x3e\r\n\r\n              \x3cdiv data-dojo-attach-point\x3d"numberCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\r\n              \x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"numberTextBox1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n                      \x3cspan\x3e${nls.and}\x3c/span\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"numberTextBox2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n\r\n              \x3cdiv data-dojo-attach-point\x3d"numberUniqueValuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"label",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"dateTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"dateTextBox" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-props\x3d\'required:true, trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"display:none;width:100%;" /\x3e\r\n\r\n              \x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"dateTextBox1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n                      \x3cspan\x3e${nls.and}\x3c/span\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"dateTextBox2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"dijitCalendarContainer" role\x3d"grid" aria-labelledby\x3d"${id}_mddb ${id}_year" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\x3cthead\x3e\r\n\t\t\x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' data-dojo-attach-point\x3d"decrementMonth" scope\x3d"col"\x3e\r\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset\' colspan\x3d"5" scope\x3d"col"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' scope\x3d"col" data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\t\x3c/th\x3e\r\n\t\t\x3c/tr\x3e\r\n\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t${!dayCellsHtml}\r\n\t\t\x3c/tr\x3e\r\n\t\x3c/thead\x3e\r\n\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t${!dateRowsHtml}\r\n\t\x3c/tbody\x3e\r\n\t\x3ctfoot class\x3d"dijitReset dijitCalendarYearContainer"\x3e\r\n\t\t\x3ctr\x3e\r\n\t\t\t\x3ctd class\x3d\'dijitReset\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/td\x3e\r\n\t\t\x3c/tr\x3e\r\n\t\x3c/tfoot\x3e\r\n\x3c/table\x3e\r\n',
"url:widgets/Query/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"jimu-widget-normal query-widget-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"queryList" class\x3d"query-step query-list"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"queriesNode" class\x3d"queries"\x3e\r\n        \x3cdiv class\x3d"execute-tip"\x3e\r\n          ${nls.executeQueryTip}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"queries-table-container"\x3e\r\n          \x3ctable data-dojo-attach-event\x3d"onclick:_onQueryListClicked" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"queries-table" onselectstart\x3d"return false;"\x3e\r\n            \x3ccolgroup\x3e\r\n              \x3ccol width\x3d"14px"\x3e\x3c/col\x3e\r\n              \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n              \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n            \x3c/colgroup\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"queriesTbody"\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"invalidConfigNode" class\x3d"invalid-config"\x3e\r\n        \x3cdiv class\x3d"error"\x3e\r\n          ${nls.invalidConfig}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"noQueryTipSection" class\x3d"no-query-tip"\x3e\r\n        ${nls.noneQueryTip}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"queryParams" class\x3d"query-step query-params"\x3e\r\n      \x3cdiv class\x3d"step-head query-params-head"\x3e\r\n        \x3cdiv class\x3d"step-title params-title"\x3e${nls.queryParams}\x3c/div\x3e\r\n        \x3cdiv class\x3d"operations"\x3e\r\n          \x3cdiv class\x3d"params-back jimu-float-leading" data-dojo-attach-event\x3d"onclick:_onBtnParamsBackClicked"\x3e\r\n            \x3cdiv class\x3d"back-icon jimu-float-leading"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"back-tip jimu-float-leading"\x3e${nls.queries}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"apply jimu-float-trailing" data-dojo-attach-point\x3d"btnApply" data-dojo-attach-event\x3d"onclick:_onBtnApplyClicked"\x3e${nls.apply}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"params-container" data-dojo-attach-point\x3d"paramsContainer"\x3e\r\n        \x3cdiv class\x3d"attributes-section" data-dojo-attach-point\x3d"parametersDiv"\x3e\r\n          \x3cspan style\x3d"display:block;margin-bottom:10px;"\x3e${nls.specifyParamsTip} :\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"spatial-section" style\x3d"margin-top:20px; margin-bottom:20px;"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cinput type\x3d"checkbox" checked\x3d"false" data-dojo-attach-point\x3d"cbxUseSpatial" data-dojo-attach-event\x3d"onclick: _onCbxUseSpatialClicked" /\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"useSpatialLabel"\x3e${nls.useSpatialFilter}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"selectSpatialDiv" style\x3d"margin-left:7px; margin-top:7px;"\x3e\r\n            \x3ctable class\x3d"current-view" valign\x3d"top" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr class\x3d"current-extent-tr"\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"cbxUseMapExtent" checked data-dojo-attach-event\x3d"onclick:_onCbxUseMapExtentClicked" /\x3e\r\n                  \x3c/td\x3e\r\n                  \x3ctd class\x3d"current-extent-td"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"currentExtentLabel" class\x3d"map-extent-tip"\x3e${nls.useCurrentMapExtent}\x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n                \x3ctr class\x3d"draw-graphic-tr"\x3e\r\n                  \x3ctd\x3e\r\n                    \x3cinput type\x3d"radio" data-dojo-attach-point\x3d"cbxDrawGraphic" data-dojo-attach-event\x3d"onclick:_onCbxDrawGraphicClicked" /\x3e\r\n                  \x3c/td\x3e\r\n                  \x3ctd class\x3d"draw-graphic-td"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"drawGraphicLabel" class\x3d"draw-graphic-tip"\x3e${nls.drawGraphicOnMap}\x3c/label\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n            \x3cdiv class\x3d"draw-graphic" data-dojo-attach-point\x3d"drawBoxDiv"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"operational"\x3e\r\n          \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"cbxOperational" checked\x3d"false" /\x3e\r\n          \x3clabel data-dojo-attach-point\x3d"operationalLayerLabel"\x3e${nls.operationalLayerTip}\x3c/label\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"operationalTipDiv" class\x3d"jimu-widget-note operational-tip-div"\x3e${nls.operationalTip}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"queryResults" class\x3d"query-step query-results"\x3e\r\n      \x3cdiv class\x3d"step-head query-results-head"\x3e\r\n        \x3cdiv class\x3d"step-title results-title"\x3e${nls.queryResults}\x3c/div\x3e\r\n        \x3cdiv class\x3d"operations"\x3e\r\n          \x3cdiv class\x3d"params-back jimu-float-leading" data-dojo-attach-event\x3d"onclick:_onBtnResultsBackClicked"\x3e\r\n            \x3cdiv class\x3d"back-icon jimu-float-leading"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"back-tip jimu-float-leading"\x3e${nls.parameters}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"results-number" data-dojo-attach-point\x3d"resultsNumberDiv"\x3e\r\n        \x3cspan\x3e${nls.numberFound}: \x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"numSpan"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"results-container" data-dojo-attach-point\x3d"resultsContainer" data-dojo-attach-event\x3d"onscroll:_onResultsScroll" onselectstart\x3d"return false;"\x3e\r\n        \x3ctable data-dojo-attach-point\x3d"resultsTable" valign\x3d"top" class\x3d"results-table" data-dojo-attach-event\x3d"onclick:_onResultsTableClicked" cellpadding\x3d"0" cellspacing\x3d"0" \x3e\r\n          \x3ctbody data-dojo-attach-point\x3d"resultsTbody"\x3e\r\n          \x3c/tbody\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"btn-section"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"btnClearAll" data-dojo-attach-event\x3d"onclick:_onBtnClearAllClicked" \r\n    class\x3d"jimu-btn jimu-priority-secondary btn-clear-all" title\x3d"${nls.clearResults}" \x3e${nls.clearResults}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/css/style.css":".jimu-widget-query{position: relative; width: 99%; height: 100%; min-width: 222px; min-height: 237px; overflow-x: hidden;}.jimu-widget-query .query-widget-content{position: absolute; width: 100%; left: 0; right: 0; height: auto; top: 0; bottom: 60px;}.jimu-widget-query .btn-section{position: absolute; width: 100%; left: 0; right: 0; bottom: 0; height: auto; text-align: center;}.jimu-widget-query .btn-section .btn-clear-all{margin-left: auto; margin-right: auto; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-query .query-step{position: absolute; width: 100%; height: 100%; top: 0;}.jimu-widget-query .query-list{left: 0;}.jimu-widget-query .query-list .queries{position: absolute; width: 100%; height: 100%; left: 0; top: 0; overflow-y: auto;}.jimu-widget-query .query-list .queries .execute-tip{line-height: 20px;}.jimu-widget-query .query-list .queries .queries-table-container{width: 100%; margin-top: 15px;}.jimu-widget-query .query-list .queries .queries-table{width: 99%; border-collapse: collapse; table-layout: fixed; margin-left: auto; margin-right: auto;}.jimu-widget-query .query-list .queries .queries-table td{height: 30px; line-height: 30px; cursor: pointer;}.jimu-widget-query .query-list .queries .queries-table tr *{cursor: pointer;}.jimu-widget-query .query-list .queries .queries-table .query-name-div{width: 100%; overflow: hidden; text-overflow: ellipsis; height: 100%;}.jimu-widget-query .query-list .queries .queries-table .third-td .arrow{background-repeat: no-repeat; background-position: center; background-image: url(images/arrow_right1.png); width: 100%; height: 100%;}.jimu-rtl .jimu-widget-query .query-list .queries .queries-table .third-td .arrow{background-image: url(images/rtl_arrow_right1.png);}.jimu-widget-query .queries-table .jimu-table-row.jimu-state-active .third-td .arrow{background-image: url(images/arrow_right2.png);}.jimu-rtl .jimu-widget-query .queries-table .jimu-table-row.jimu-state-active .third-td .arrow{background-image: url(images/rtl_arrow_right2.png);}.jimu-widget-query .queries-table .jimu-table-row:hover .third-td .arrow{background-image: url(images/arrow_right2.png);}.jimu-rtl .jimu-widget-query .queries-table .jimu-table-row:hover .third-td .arrow{background-image: url(images/rtl_arrow_right2.png);}.jimu-widget-query .query-list .invalid-config{display: none; position: absolute; width: 100%; height: 100%; left: 0; top: 0;}.jimu-widget-query .query-list .no-query-tip{display: none; line-height: 20px;}.jimu-widget-query .step-head{position: relative; width: 100%; height: 30px; line-height: 30px;}.jimu-widget-query .step-title{position: absolute; width: 100%; height: 100%; left: 0; top: 0; text-align: center; color: #86909c;}.jimu-widget-query .step-head .operations{position: absolute; width: 100%; height: 100%; left: 0; right: 0; top: 0;}.jimu-widget-query .step-head .operations .params-back{color: blue; cursor: pointer; height: 100%;}.jimu-widget-query .step-head .operations .params-back .back-icon{width: 8px; height: 100%; background-repeat: no-repeat; background-position: center center; background-image: url(images/arrow_left.png); margin-right: 5px;}.jimu-rtl .jimu-widget-query .step-head .operations .params-back .back-icon{background-image: url(images/rtl_arrow_left.png); margin-right: 0; margin-left: 5px;}.jimu-widget-query .step-head .operations .params-back .back-tip{height: 100%; color: #51b1fe;}.jimu-widget-query .query-params{left: 100%;}.jimu-widget-query .query-params .query-params-head .operations .apply{cursor: pointer; height: 100%; color: #51b1fe;}.jimu-widget-query .query-params .params-container{position: absolute; width: 100%; left: 0; top: 40px; bottom: 0; overflow-y: auto;}.jimu-widget-query .query-params table.current-view{width: auto; border-collapse: collapse; margin-top: 10px;}.jimu-widget-query .query-params table.current-view td{vertical-align: top;}.jimu-widget-query .query-params .current-extent-td{padding-left: 8px;}.jimu-rtl .jimu-widget-query .query-params .current-extent-td{padding-left: 0; padding-right: 8px;}.jimu-widget-query .query-params .draw-graphic-tr td{padding-top:5px;}.jimu-widget-query .query-params .draw-graphic-td{padding-left: 8px;}.jimu-rtl .jimu-widget-query .query-params .draw-graphic-td{padding-left: 0; padding-right: 8px;}.jimu-widget-query .query-params .draw-graphic{margin-top:5px;}.jimu-widget-query .query-params .operational-tip-div{width: auto; margin-top: 5px; margin-left: 15px;}.jimu-rtl .jimu-widget-query .query-params .operational-tip-div{margin-left: 0; margin-right: 15px;}.jimu-widget-query .query-results{left: 200%;}.jimu-widget-query .query-results .results-container{position: absolute; width: 100%; left: 0; top: 50px; bottom: 0; overflow-x: hidden; overflow-y: auto;}.jimu-widget-query .query-results .results-table{table-layout: fixed; width: 100%; border-collapse: collapse;}.jimu-widget-query .query-results .feature-attributes{max-width: 100%; border-collapse: collapse;}.jimu-widget-query .query-results .results-table\x3etbody\x3etr.query-result-item\x3etd{padding-left: 15px; padding-right: 15px; padding-top: 12px; padding-bottom: 12px; cursor: pointer;}.jimu-rtl .jimu-widget-query .query-results .results-table\x3etbody\x3etr.query-result-item\x3etd{padding-left: 0; padding-right: 15px;}.jimu-widget-query .query-results .results-table\x3etbody\x3etr.query-result-item\x3etd .feature-attributes{margin-top: 4px; width: 100%; table-layout: fixed; word-break: break-all;}.jimu-widget-query .query-results .query-result-item td.attr-name{padding: 2px 5px 5px 2px; color: #888888;}.jimu-widget-query .query-results .query-result-item td.attr-value{padding: 2px 0 5px 2px;}.jimu-rtl .jimu-widget-query .query-results .query-result-item td.attr-value{padding: 2px 2px 5px 0;}.jimu-widget-query .relationship-attr.dijitTitlePane {margin: 0 auto; width: 100%;}.jimu-widget-query .relationship-attr.dijitTitlePane .dijitTitlePaneTitle {font-size: 12px; color: #686868; border: none; background-image: none; width: 100%; padding: 0;}.jimu-widget-query .relationship-attr.dijitTitlePane .dijitTitlePaneTitleFocus {margin-top: 0; padding-top: 5px; padding-bottom: 3px;}.jimu-widget-query .query-result-item.even .relationship-attr.dijitTitlePane .dijitTitlePaneTitleClosed {background-color: #f0f0f0;}.jimu-widget-query .query-result-item.even:hover .relationship-attr.dijitTitlePane .dijitTitlePaneTitleClosed {background-color: #f0f0f0;}.jimu-widget-query .query-result-item.odd .relationship-attr.dijitTitlePane .dijitTitlePaneTitleClosed {background-color: #ffffff;}.jimu-widget-query .query-result-item.jimu-state-active .relationship-attr.dijitTitlePane .dijitTitlePaneTitleClosed {background-color: #d9dde0 !important;}.jimu-widget-query .query-result-item:hover .relationship-attr.dijitTitlePane .dijitTitlePaneTitleClosed {background-color: #d9dde0 !important;}.jimu-widget-query .relationship-attr.dijitTitlePane .dijitTitlePaneTitleOpen {background-color: #B5DDE9;}.jimu-widget-query .relationship-attr.dijitTitlePane .dijitTitlePaneContentOuter {border: 2px solid #B5DDE9;}.jimu-widget-query .relationship-attr.dijitTitlePane .dijitTitlePaneContentInner {font-size: 10px; color: #686868;}.jimu-widget-query .relationship-attr.dijitTitlePane .dijitTitlePaneContentInner span {margin-top: 4px; display: inline-block;}.query-popup-title{height: 20px;}.query-popup .header{font-weight: bold;}.query-popup .hzLine{border-top: 1px solid #333333; margin-top: 6px; margin-bottom: 6px;}.query-popup .query-popup-table{width: 100%; table-layout: fixed; word-break: break-all; border-collapse: collapse;}.query-popup .query-popup-table td{padding:2px 2px 5px 2px;}.query-popup .query-popup-table .attr-name{color: #888888;}",
"url:widgets/Query/config.json":'{\r\n  "queries": []\r\n}',"*now":function(g){g(['dojo/i18n!*preload*widgets/Query/nls/Widget*["ar","cs","da","de","en","el","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/_base/html dojo/_base/array dojo/_base/fx dojo/promise/all dojo/Deferred dijit/_WidgetsInTemplateMixin dijit/TitlePane jimu/BaseWidget jimu/dijit/Message jimu/dijit/DrawBox jimu/utils jimu/filterUtils jimu/dijit/FilterParameters esri/tasks/query esri/tasks/QueryTask esri/tasks/RelationshipQuery esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/renderers/SimpleRenderer esri/InfoTemplate esri/symbols/jsonUtils esri/lang esri/request jimu/dijit/LoadingShelter".split(" "),function(g,
c,s,d,e,h,k,r,b,l,a,p,y,u,x,m,f,w,D,E,z,F,G,A,B,C){return g([a,b],{name:"Query",baseClass:"jimu-widget-query",isValidConfig:!1,currentAttrs:null,tempResultLayer:null,operationalLayers:null,_resetCurrentAttrs:function(){this.currentAttrs={queryTr:null,config:null,layerInfo:null,askForValues:null,queryType:-1,query:{maxRecordCount:1E3,resultLayer:null,where:"",geometry:null,nextIndex:0,allCount:0,objectIds:[]}}},postMixInProperties:function(){this.inherited(arguments);this.operationalLayers=[];var a=
B.substitute({clearResults:this.nls.clearResults},this.nls.operationalTip);this.nls.operationalTip=a;this.config&&this._updateConfig()},_updateConfig:function(){this.config&&(this.config.queries&&0<this.config.queries.length)&&e.forEach(this.config.queries,c.hitch(this,function(a){this._rebuildFilter(a.url,a.filter)}))},_rebuildFilter:function(a,b){try{if(b){delete b.expr;var c=new x;c.isHosted=u.isHostedService(a);c.getExprByFilterObj(b)}}catch(d){console.log(d)}},postCreate:function(){this.inherited(arguments);
this._combineRadioCheckBoxWithLabel();this._initDrawBox();this._resetAndAddTempResultLayer();this._initSelf()},onOpen:function(){this.tempResultLayer&&this.tempResultLayer.show()},onActive:function(){this.map.setInfoWindowOnClick(!1)},onDeActive:function(){this.drawBox.deactivate()},onClose:function(){this.tempResultLayer&&this.tempResultLayer.hide();this._hideInfoWindow();this.drawBox.clear();this.inherited(arguments)},destroy:function(){this._hideInfoWindow();this.drawBox.clear();this._removeAllResultLayers(!0);
this.inherited(arguments)},_combineRadioCheckBoxWithLabel:function(){u.combineRadioCheckBoxWithLabel(this.cbxUseSpatial,this.useSpatialLabel);u.combineRadioCheckBoxWithLabel(this.cbxUseMapExtent,this.currentExtentLabel);u.combineRadioCheckBoxWithLabel(this.cbxDrawGraphic,this.drawGraphicLabel);u.combineRadioCheckBoxWithLabel(this.cbxOperational,this.operationalLayerLabel)},_isServiceSupportsOrderBy:function(a){var b=!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsOrderBy&&(b=!0);
return b},_isServiceSupportsPagination:function(a){var b=!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsPagination&&(b=!0);return b},_tryLocaleNumber:function(a){var b=u.localizeNumber(a);if(null===b||void 0===b)b=a;return b},_tryLocaleDate:function(a){var b=u.localizeDate(a);b||(b=a.toLocaleDateString());return b},_resetAndAddTempResultLayer:function(){this._removeTempResultLayer();this.tempResultLayer=new E;this.map.addLayer(this.tempResultLayer)},_removeTempResultLayer:function(){this.tempResultLayer&&
this.map.removeLayer(this.tempResultLayer);this.tempResultLayer=null},_removeAllResultLayers:function(a){this._hideInfoWindow();this._removeTempResultLayer();this._removeAllOperatonalLayers();this._clearResultPage();a||this._fromCurrentPageToQueryList()},_addOperationalLayer:function(a){this.operationalLayers.push(a);this.map.addLayer(a)},_fromCurrentPageToQueryList:function(){d.setStyle(this.queryList,"display","block");"block"===d.getStyle(this.queryParams,"display")?(this._slide(this.queryList,
-100,0),this._slide(this.queryParams,0,100)):"block"===d.getStyle(this.queryResults,"display")&&(this._slide(this.queryList,-100,0),this._slide(this.queryResults,0,100))},_removeAllOperatonalLayers:function(){for(var a=this.operationalLayers;0<a.length;){var b=a[0];b&&this.map.removeLayer(b);a[0]=null;a.splice(0,1)}this.operationalLayers=[]},_isConfigValid:function(){return this.config&&"object"===typeof this.config},_initDrawBox:function(){this.drawBox=new y({types:["point","polyline","polygon"],
map:this.map,showClear:!0,keepOneGraphic:!0});this.drawBox.placeAt(this.drawBoxDiv);this.drawBox.startup()},_initSelf:function(){var a="Query_"+u.getRandomString();this.cbxUseMapExtent.name=a;this.cbxDrawGraphic.name=a;this.paramsDijit=new m;this.paramsDijit.placeAt(this.parametersDiv);this.paramsDijit.startup();(this.isValidConfig=this._isConfigValid())?(a=this.config.queries,0===a.length?(d.setStyle(this.queriesNode,"display","none"),d.setStyle(this.noQueryTipSection,"display","block"),d.setStyle(this.btnClearAll,
"display","none")):e.forEach(a,c.hitch(this,function(a,b){var c=a.name,n=d.toDom('\x3ctr class\x3d"single-query jimu-table-row"\x3e\x3ctd class\x3d"first-td"\x3e\x3c/td\x3e\x3ctd class\x3d"second-td"\x3e\x3cdiv class\x3d"query-name-div"\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d"third-td"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e');s(".query-name-div",n)[0].innerHTML=c;d.place(n,this.queriesTbody);n.singleConfig=a;0===b%2?d.addClass(n,"even"):d.addClass(n,"odd")}))):(d.setStyle(this.queriesNode,
"display","none"),d.setStyle(this.invalidConfigNode,{display:"block",left:0}),d.setStyle(this.btnClearAll,"display","none"))},_slide:function(a,b,q){d.setStyle(a,"display","block");d.setStyle(a,"left",b+"%");h.animateProperty({node:a,properties:{left:{start:b,end:q,units:"%"}},duration:500,onEnd:c.hitch(this,function(){d.setStyle(a,"left",q);0===q?d.setStyle(a,"display","block"):d.setStyle(a,"display","none")})}).play()},_onQueryListClicked:function(a){if(a=u.getAncestorDom(a.target||a.srcElement,
c.hitch(this,function(a){return d.hasClass(a,"single-query")}),10)){var b=a.singleConfig;this._resetCurrentAttrs();this.currentAttrs.queryTr=a;this.currentAttrs.config=c.clone(b);this.currentAttrs.layerInfo=this.currentAttrs.queryTr.layerInfo;a=this.currentAttrs.config.filter;b=new x;this.currentAttrs.askForValues=b.isAskForValues(a);this.currentAttrs.askForValues?d.setStyle(this.parametersDiv,"display","block"):d.setStyle(this.parametersDiv,"display","none");s("tr.single-query",this.queriesTbody).removeClass("jimu-state-active");
d.addClass(this.currentAttrs.queryTr,"jimu-state-active");var q=c.hitch(this,function(){var a=this.currentAttrs.queryTr.layerInfo;this.currentAttrs.layerInfo=a;this._isServiceSupportsOrderBy(a)&&this._isServiceSupportsPagination(a)?this.currentAttrs.queryType=1:this._isSupportObjectIds(a)?this.currentAttrs.queryType=2:this.currentAttrs.queryType=3;this._fromQueryListToQueryParams()});this.currentAttrs.queryTr.layerInfo?q():(a=this.currentAttrs.config.url,this.shelter.show(),this._getLayerInfoWithRelationships(a).then(c.hitch(this,
function(a){this.domNode&&(this.shelter.hide(),this.currentAttrs.queryTr.layerInfo=a,this.currentAttrs.layerInfo=this.currentAttrs.queryTr.layerInfo,q())}),c.hitch(this,function(a){console.error(a);if(this.domNode){this.shelter.hide();var b="";a&&403===a.httpCode&&(b=this.nls.noPermissionsMsg);this._showQueryErrorMsg(b)}})))}},_getLayerInfoWithRelationships:function(a){var b=new r;C({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(c.hitch(this,function(d){d.relationships||
(d.relationships=[]);var v=this._getServiceUrlByLayerUrl(a),H=e.map(d.relationships,c.hitch(this,function(a){return C({url:v+"/"+a.relatedTableId,content:{f:"json"},handleAs:"json",callbackParamName:"callback"})}));k(H).then(c.hitch(this,function(a){e.forEach(a,c.hitch(this,function(a,b){var n=d.relationships[b];n.name=a.name;n.fields=e.filter(a.fields,c.hitch(this,function(a){return"esriFieldTypeGeometry"!==a.type}))}));b.resolve(d)}),c.hitch(this,function(a){b.reject(a)}))}),c.hitch(this,function(a){b.reject(a)}));
return b},_onCbxUseSpatialClicked:function(){this.cbxUseSpatial.checked?d.setStyle(this.selectSpatialDiv,"display","block"):d.setStyle(this.selectSpatialDiv,"display","none");this.cbxUseMapExtent.checked?this._onCbxUseMapExtentClicked():this._onCbxDrawGraphicClicked();this._resetDrawBox()},_onCbxUseMapExtentClicked:function(){this.cbxUseMapExtent.checked&&(this._resetDrawBox(),d.setStyle(this.drawBoxDiv,"display","none"))},_onCbxDrawGraphicClicked:function(){this.cbxDrawGraphic.checked&&d.setStyle(this.drawBoxDiv,
"display","block")},_onBtnClearAllClicked:function(){this._removeAllResultLayers()},_resetDrawBox:function(){this.drawBox.deactivate();this.drawBox.clear()},_resetQueryParamsPage:function(){this.paramsDijit.clear();this.cbxOperational.checked=!1;this.cbxUseSpatial.checked=!1;this._onCbxUseSpatialClicked();this._resetDrawBox()},_getLayerIndexByLayerUrl:function(a){var b=a.lastIndexOf("/");a=a.slice(b+1,a.length);return parseInt(a,10)},_getServiceUrlByLayerUrl:function(a){var b=a.lastIndexOf("/");return a.slice(0,
b)},_fromQueryListToQueryParams:function(){this._resetQueryParamsPage();var a=this.currentAttrs.config.url,b=c.clone(this.currentAttrs.config.filter);this.paramsDijit.build(a,this.currentAttrs.layerInfo,b);a=this.queryParams;b=this.queryResults;d.setStyle(this.queryList,{left:0,display:"block"});d.setStyle(a,{left:"100%",display:"block"});d.setStyle(b,"display","none");this._slide(this.queryList,0,-100);this._slide(a,100,0)},_onBtnParamsBackClicked:function(){this._resetDrawBox();d.setStyle(this.queryList,
"display","block");d.setStyle(this.queryParams,"display","block");d.setStyle(this.queryResults,"display","none");this._slide(this.queryList,-100,0);this._slide(this.queryParams,0,100)},_onBtnApplyClicked:function(){this._clearResultPage();d.setStyle(this.resultsNumberDiv,"display","none");var a=this.currentAttrs.layerInfo;if(this.currentAttrs.askForValues){var b=this.paramsDijit.getFilterExpr();if(!(b&&"string"===typeof b))return;this.currentAttrs.query.where=b}else this.currentAttrs.query.where=
this.currentAttrs.config.filter.expr;this.currentAttrs.query.maxRecordCount=a.maxRecordCount||1E3;this.currentAttrs.query.nextIndex=0;this.currentAttrs.query.objectIds=[];a=this.currentAttrs.query.where;b=null;if(this.cbxUseSpatial.checked){if(this.cbxUseMapExtent.checked)b=this.map.extent;else{var c=this.drawBox.drawLayer.graphics;0<c.length&&(b=c[0].geometry)}if(!b){new p({message:this.nls.specifySpatialFilterMsg});return}}this.currentAttrs.query.geometry=b;this.tempResultLayer&&this.map.removeLayer(this.tempResultLayer);
this.tempResultLayer=null;this._createQueryResultLayer();this._resetDrawBox();d.setStyle(this.queryList,"display","none");d.setStyle(this.queryParams,"display","block");d.setStyle(this.queryResults,"display","block");this._slide(this.queryParams,0,-100);this._slide(this.queryResults,100,0);1===this.currentAttrs.queryType?this._doQuery_SupportOrderByAndPagination(a,b):2===this.currentAttrs.queryType?this._doQuery_SupportObjectIds(a,b):this._doQuery_NotSupportObjectIds(a,b)},_isSupportObjectIds:function(a){var b=
0;a.currentVersion&&(b=parseFloat(a.currentVersion));return 10<=b||a.hasOwnProperty("typeIdField")},_isImageServiceLayer:function(a){return-1<a.indexOf("/ImageServer")},_isTable:function(a){return"Table"===a.type},_createQueryResultLayer:function(){var a=null,b=null;this.currentAttrs.config.resultsSymbol&&(b=A.fromJson(this.currentAttrs.config.resultsSymbol),b=new F(b));if(this.cbxOperational.checked){var a=c.clone(this.currentAttrs.layerInfo),d=this._getBestQueryName(this.currentAttrs.config.name||
"");a.name=d;a.drawingInfo||(a.drawingInfo={});b&&(a.drawingInfo.renderer=b.toJson());a.drawingInfo.transparency=0;a.minScale=0;a.maxScale=0;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.defaultVisibility=!0;delete a.extent;var v=this._getOutputFields();a.fields=e.filter(a.fields,c.hitch(this,function(a){return 0<=v.indexOf(a.name)}));a=new z({layerDefinition:a,featureSet:null})}else this._resetAndAddTempResultLayer(),a=this.tempResultLayer;this.currentAttrs.query.resultLayer=a;this.queryResults.resultLayer=
a;b&&a.setRenderer(b);return a},_getBestQueryName:function(a){for(var b=a=a?a+(" _"+this.nls.queryResult):a+this.nls.queryResult,d=e.map(this.map.graphicsLayerIds,c.hitch(this,function(a){return this.map.getLayer(a).name})),v=2;0<=e.indexOf(d,b);)b=a+"_"+v,v++;return b},_onResultsScroll:function(){u.isScrollToBottom(this.resultsContainer)&&(1===this.currentAttrs.queryType?this._onResultsScroll_SupportOrderByAndPagination():2===this.currentAttrs.queryType&&this._onResultsScroll_SupportObjectIds())},
_doQuery_SupportOrderByAndPagination:function(a,b){d.setStyle(this.resultsNumberDiv,"display","block");var q=this.currentAttrs.query.resultLayer,v=c.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),q&&this.map.removeLayer(q),q=null,this._showQueryErrorMsg())});this.shelter.show();this._queryCount(a,b).then(c.hitch(this,function(d){if(this.domNode)if(this.numSpan.innerHTML=u.localizeNumber(d),0===d)this.currentAttrs.query.allCount=0,this.shelter.hide();else{this.currentAttrs.query.allCount=
d;q instanceof z&&this._addOperationalLayer(q);this.currentAttrs.query.nextIndex=0;var f=this.currentAttrs.config.objectIdField;this._queryWithPaginationAndOrder(a,b,0,this.currentAttrs.query.maxRecordCount).then(c.hitch(this,function(a){if(this.domNode){var b=a.features;a=e.map(b,c.hitch(this,function(a){a=a.attributes[f];return a=parseInt(a,10)}));a=this._queryRelatedFeaturesById(a);var d=e.map(a,c.hitch(this,function(a){return a.promise})),n=e.map(a,function(a){return a.relationshipId});k(d).then(c.hitch(this,
function(a){this.domNode&&(this.shelter.hide(),this.currentAttrs.query.nextIndex+=b.length,this._addResultItems(b,q,a,n),this._zoomToLayer(q))}),v)}}),v)}}),v)},_onResultsScroll_SupportOrderByAndPagination:function(){var a=this.currentAttrs.query.nextIndex;if(!(a>=this.currentAttrs.query.allCount)){var b=c.hitch(this,function(a){console.error(a);this.domNode&&(this._showQueryErrorMsg(),this.shelter.hide())}),d=this.currentAttrs.query.resultLayer;this.shelter.show();var v=this.currentAttrs.config.objectIdField;
this._queryWithPaginationAndOrder(this.currentAttrs.query.where,this.currentAttrs.query.geometry,a,this.currentAttrs.query.maxRecordCount).then(c.hitch(this,function(a){if(this.domNode){var n=a.features;a=e.map(n,c.hitch(this,function(a){a=a.attributes[v];return a=parseInt(a,10)}));a=this._queryRelatedFeaturesById(a);var f=e.map(a,c.hitch(this,function(a){return a.promise})),g=e.map(a,function(a){return a.relationshipId});k(f).then(c.hitch(this,function(a){this.domNode&&(this.shelter.hide(),this.currentAttrs.query.nextIndex+=
n.length,this._addResultItems(n,d,a,g),this._zoomToLayer(d))}),b)}}),b)}},_doQuery_SupportObjectIds:function(a,b){d.setStyle(this.resultsNumberDiv,"display","block");var q=this.currentAttrs.query.resultLayer,v=c.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),q&&this.map.removeLayer(q),q=null,this._showQueryErrorMsg())});this.shelter.show();this._queryIds(a,b).then(c.hitch(this,function(a){if(this.domNode)if(a&&0<a.length){this.currentAttrs.query.allCount=a.length;q instanceof
z&&this._addOperationalLayer(q);var b=a.length;this.numSpan.innerHTML=u.localizeNumber(b);this.currentAttrs.query.objectIds=a;this.currentAttrs.query.nextIndex=0;var d=this.currentAttrs.query.maxRecordCount,n=[],n=b>d?a.slice(0,d):a,t=[];a=this._queryByObjectIds(n,!0);t.push(a);n=this._queryRelatedFeaturesById(n);e.forEach(n,function(a){t.push(a.promise)});var f=e.map(n,function(a){return a.relationshipId});k(t).then(c.hitch(this,function(a){if(this.domNode){this.shelter.hide();var b=a[0].features;
this.currentAttrs.query.maxRecordCount=b.length;this.currentAttrs.query.nextIndex+=b.length;this._addResultItems(b,q,a.slice(1),f);this._zoomToLayer(q)}}),v)}else this.currentAttrs.query.allCount=0,this.shelter.hide()}),v)},_onResultsScroll_SupportObjectIds:function(){var a=this.currentAttrs.query.objectIds,b=this.currentAttrs.query.nextIndex;if(!(b>=a.length)){var d=this.currentAttrs.query.resultLayer,v=Math.min(a.length-b,this.currentAttrs.query.maxRecordCount),a=a.slice(b,b+v);if(0!==a.length){this.shelter.show();
var f=[],b=this._queryByObjectIds(a,!0);f.push(b);a=this._queryRelatedFeaturesById(a);e.forEach(a,function(a){f.push(a.promise)});var g=e.map(a,function(a){return a.relationshipId});k(f).then(c.hitch(this,function(a){if(this.domNode){this.shelter.hide();var b=a[0].features;this.currentAttrs.query.nextIndex+=b.length;this._addResultItems(b,d,a.slice(1),g)}}),c.hitch(this,function(a){console.error(a);this.domNode&&(this._showQueryErrorMsg(),this.shelter.hide())}))}}},_doQuery_NotSupportObjectIds:function(a,
b){d.setStyle(this.resultsNumberDiv,"display","none");var e=this.currentAttrs.query.resultLayer;this.shelter.show();this._query(a,b,!0).then(c.hitch(this,function(a){this.domNode&&(this.shelter.hide(),a=a.features,this.currentAttrs.query.allCount=a.length,0<a.length&&(e instanceof z&&this._addOperationalLayer(e),this._addResultItems(a,e),this._zoomToLayer(e)))}),c.hitch(this,function(a){console.error(a);this.domNode&&(this.shelter.hide(),e&&this.map.removeLayer(e),e=null,this._showQueryErrorMsg())}))},
_clearResultPage:function(){this._hideInfoWindow();this._unSelectResultTr();d.empty(this.resultsTbody);this.numSpan.innerHTML="0"},_unSelectResultTr:function(){this.queryResults.resultTr&&d.removeClass(this.queryResults.resultTr,"jimu-state-active");this.queryResults.resultTr=null},_selectResultTr:function(a){this._unSelectResultTr();this.queryResults.resultTr=a;this.queryResults.resultTr&&d.addClass(this.queryResults.resultTr,"jimu-state-active")},_zoomToLayer:function(a){this._isTable(this.currentAttrs.layerInfo)||
(a=u.graphicsExtent(a.graphics,1.4))&&this.map.setExtent(a)},_getObjectIdField:function(){return this.currentAttrs.config.objectIdField},_getOutputFields:function(){var a=e.map(this.currentAttrs.config.popup.fields,c.hitch(this,function(a){return a.name})),b=this.currentAttrs.config.objectIdField;0>e.indexOf(a,b)&&a.push(b);(b=this.currentAttrs.config.popup.title.match(/\$\{\w+\}/g))&&0<b.length&&e.forEach(b,c.hitch(this,function(b){b=b.replace("${","").replace("}","");0>a.indexOf(b)&&a.push(b)}));
var d=e.map(this.currentAttrs.layerInfo.fields,c.hitch(this,function(a){return a.name}));return a=e.filter(a,c.hitch(this,function(a){return 0<=d.indexOf(a)}))},_query:function(a,b,c){var d=new f;d.where=a;b&&(d.geometry=b);d.outSpatialReference=this.map.spatialReference;d.returnGeometry=!!c;d.outFields=this._getOutputFields();return(new w(this.currentAttrs.config.url)).execute(d)},_queryIds:function(a,b){var c=new f;c.where=a;b&&(c.geometry=b);c.returnGeometry=!1;c.outSpatialReference=this.map.spatialReference;
return(new w(this.currentAttrs.config.url)).executeForIds(c)},_queryByObjectIds:function(a,b){var d=new r,g=new f;g.returnGeometry=!!b;g.outSpatialReference=this.map.spatialReference;g.outFields=this._getOutputFields();g.objectIds=a;(new w(this.currentAttrs.config.url)).execute(g).then(c.hitch(this,function(a){d.resolve(a)}),c.hitch(this,function(f){if(400===f.code){var g=this._getObjectIdField(),h="",k=a.length;e.forEach(a,c.hitch(this,function(a,b){h+=g+" \x3d "+a;b!==k-1&&(h+=" OR ")}));this._query(h,
null,b).then(c.hitch(this,function(a){d.resolve(a)}),c.hitch(this,function(a){d.reject(a)}))}else d.reject(f)}));return d},_queryCount:function(a,b){var c=new f;c.where=a;b&&(c.geometry=b);c.returnGeometry=!1;c.outSpatialReference=this.map.spatialReference;return(new w(this.currentAttrs.config.url)).executeForCount(c)},_queryWithPaginationAndOrder:function(a,b,d,g){var h=new f;h.where=a;b&&(h.geometry=b);h.outSpatialReference=this.map.spatialReference;h.returnGeometry=!0;h.outFields=this._getOutputFields();
h.start=d;h.num=g;if((a=this.currentAttrs.config.orderByFields)&&0<a.length)h.orderByFields=a,a=e.map(a,c.hitch(this,function(a){return a.split(" ")[0]})),e.forEach(a,c.hitch(this,function(a){0>h.outFields.indexOf(a)&&h.outFields.push(a)}));return(new w(this.currentAttrs.config.url)).execute(h)},_getCurrentRelationships:function(){return this.currentAttrs.queryTr.layerInfo.relationships||[]},_queryRelatedFeaturesById:function(a){var b=[],d=this._getCurrentRelationships();if(d&&0<d.length){var f=new w(this.currentAttrs.config.url);
e.forEach(d,c.hitch(this,function(c){var d=new D;d.objectIds=a;d.relationshipId=c.id;var g=e.map(c.fields,function(a){return a.name});d.outFields=g;d.returnGeometry=!1;d=f.executeRelationshipQuery(d);b.push({relationshipId:c.id,promise:d})}))}return b},_findRelationshipInfo:function(a){for(var b=this._getCurrentRelationships(),c=0;c<b.length;c++)if(b[c].id===a)return b[c];return null},_findRelationshipName:function(a){var b="";if(a=this._findRelationshipInfo(a))b=a.name;return b},_findRelationshipFields:function(a){var b=
[];if(a=this._findRelationshipInfo(a))b=a.fields;return b},_getPopupFieldsWithFieldInfos:function(){var a=[],b=c.clone(this.currentAttrs.layerInfo.fields),d={};e.forEach(b,c.hitch(this,function(a){d[a.name]=a}));b=c.clone(this.currentAttrs.config.popup.fields);e.forEach(b,c.hitch(this,function(b){var e=d[b.name];e&&(e=c.mixin(e,b),a.push(e))}));return a},_addResultItems:function(a,b,d,f){var g=null;this.currentAttrs.config.resultsSymbol&&(g=A.fromJson(this.currentAttrs.config.resultsSymbol));var h=
this._getPopupFieldsWithFieldInfos();e.forEach(a,c.hitch(this,function(a,n){var k="",k=0===n%2?"even":"odd",l=[];if(d&&0<d.length){var m=a.attributes[this.currentAttrs.config.objectIdField];e.forEach(d,c.hitch(this,function(a,b){if(a[m]){var c=this._findRelationshipName(f[b]);l.push({tableId:f[b],name:c,features:a[m].features})}}))}a.geometry&&g&&a.setSymbol(g);b.add(a);this._createQueryResultItem({feature:a,titleTemplate:this.currentAttrs.config.popup.title,fieldInfosInAttrContent:h,trClass:k,relatedFeatures:l})}))},
_createQueryResultItem:function(a){var b=a.feature,f=a.titleTemplate,g=a.fieldInfosInAttrContent,h=a.trClass;a=a.relatedFeatures;var k=b&&b.attributes;if(k){var m=d.toDom('\x3ctr class\x3d"jimu-table-row jimu-table-row-separator query-result-item"  cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ctd\x3e\x3cspan class\x3d"result-item-title"\x3e\x3c/span\x3e\x3ctable class\x3d"feature-attributes" valign\x3d"top"\x3e\x3ccolgroup\x3e\x3ccol width\x3d"40%" /\x3e\x3ccol width\x3d"60%" /\x3e\x3c/colgroup\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/td\x3e\x3c/tr\x3e');
d.addClass(m,h);d.place(m,this.resultsTbody);m.feature=b;var h=s("span.result-item-title",m)[0],r=s("tbody",m)[0],f=B.substitute(k,f);f||(f=this.nls.noValue);h.innerHTML=f;var p=h="";e.forEach(g,c.hitch(this,function(a){var b=a.name,c=a.alias||b,f=k[b];"esriFieldTypeDate"===a.type?f&&(b=new Date(parseInt(f,10)),f=this._tryLocaleDate(b)):"number"===typeof f&&(a.domain&&"codedValue"===a.domain.type?e.some(a.domain.codedValues,function(a){if(a.code===f)return f=a.name,!0}):f=this._tryLocaleNumber(f));
var g=f,b=f;a=a.specialType;"image"===a?f&&"string"===typeof f&&(g='\x3ca href\x3d"'+f+'" target\x3d"_blank"\x3e'+f+"\x3c/a\x3e",b='\x3cimg src\x3d"'+f+'" /\x3e'):"link"===a&&(f&&"string"===typeof f)&&(b=g='\x3ca href\x3d"'+f+'" target\x3d"_blank"\x3e'+f+"\x3c/a\x3e");if(null===f||void 0===f)g=b="";a=d.toDom('\x3ctr\x3e\x3ctd class\x3d"attr-name"\x3e'+c+':\x3c/td\x3e\x3ctd class\x3d"attr-value"\x3e'+g+"\x3c/td\x3e\x3c/tr\x3e");d.place(a,r);p+='\x3ctr valign\x3d"top"\x3e\x3ctd class\x3d"attr-name"\x3e'+
c+'\x3c/td\x3e\x3ctd class\x3d"attr-value"\x3e'+b+"\x3c/td\x3e\x3c/tr\x3e"}));e.forEach(a,c.hitch(this,function(a){var b=d.create("tr"),f=d.create("td",{colspan:2},b),g=d.create("div");(new l({title:this.nls.attributesFromRelationship+": "+a.name,content:g,open:!1,"class":"relationship-attr"})).placeAt(f);d.place(b,r);p+='\x3ctr valign\x3d"top"\x3e\x3ctd class\x3d"attr-name" colspan\x3d"2"\x3e'+this.nls.attributesFromRelationship+": "+a.name+"\x3ctd\x3e\x3c/tr\x3e";var h=this._findRelationshipFields(a.tableId);
e.forEach(a.features,c.hitch(this,function(a,b){var f=d.toDom("\x3cspan\x3e"+(b+1)+"\x3c/span\x3e\x3cbr/\x3e");d.place(f,g);p+='\x3ctr valign\x3d"top"\x3e\x3ctd class\x3d"attr-name" colspan\x3d"2"\x3e'+(b+1)+"\x3c/td\x3e\x3ctr\x3e";h&&e.forEach(h,c.hitch(this,function(b){var c=a.attributes[b.name];if("esriFieldTypeDate"===b.type){if(c)var f=new Date(parseInt(c,10)),c=this._tryLocaleDate(f)}else"number"===typeof c&&(b.domain&&"codedValue"===b.domain.type?e.some(b.domain.codedValues,function(a){if(a.code===
c)return c=a.name,!0}):c=this._tryLocaleNumber(c));f=d.toDom("\x3cspan\x3e"+(b.alias||b.name)+" : "+c+"\x3c/span\x3e\x3cbr/\x3e");d.place(f,g);p+='\x3ctr valign\x3d"top"\x3e\x3ctd class\x3d"attr-name"\x3e'+(b.alias||b.name)+'\x3c/td\x3e\x3ctd class\x3d"attr-value"\x3e'+c+"\x3c/td\x3e\x3c/tr\x3e"}))}))}));h='\x3cdiv class\x3d"header"\x3e'+f+"\x3c/div\x3e";p&&(h=h+'\x3cdiv class\x3d"hzLine"\x3e\x3c/div\x3e'+('\x3ctable class\x3d"query-popup-table"  cellpadding\x3d"0" cellspacing\x3d"0"\x3e\x3ccolgroup\x3e\x3ccol width\x3d"40%" /\x3e\x3ccol width\x3d"60%" /\x3e\x3c/colgroup\x3e\x3ctbody\x3e'+
p+"\x3c/tbody\x3e\x3c/table\x3e"));h='\x3cdiv class\x3d"query-popup"\x3e'+h+"\x3c/div\x3e";m.infoTemplateContent=h;g=new G;g.setTitle('\x3cdiv class\x3d"query-popup-title"\x3e\x3c/div\x3e');g.setContent(h);b.setInfoTemplate(g)}},_showQueryErrorMsg:function(a){new p({message:a||this.nls.queryError})},_onResultsTableClicked:function(a){a=a.target||a.srcElement;if(d.isDescendant(a,this.resultsTable)){var b=u.getAncestorDom(a,c.hitch(this,function(a){return d.hasClass(a,"query-result-item")}),10);if(b){this._selectResultTr(b);
d.addClass(b,"jimu-state-active");var e=b.feature;if(a=e.geometry){var f=b.infoTemplateContent,b=a.type,g,h=null;if("point"===b||"multipoint"===b){var k=c.hitch(this,function(){h=new r;var a=this.map.getNumLevels(),b=this.map.getLevel(),a=Math.max(b,Math.floor(2*a/3));0<=this.map.getMaxZoom()?this.map.setLevel(a).then(c.hitch(this,function(){this.map.centerAt(g).then(c.hitch(this,function(){h.resolve()}))})):this.map.centerAt(g).then(c.hitch(this,function(){h.resolve()}))});if("point"===b)g=a,k();
else if("multipoint"===b)if(1===a.points.length)g=a.getPoint(0),k();else if(1<a.points.length&&(b=a.getExtent()))b=b.expand(1.4),g=a.getPoint(0),h=this.map.setExtent(b)}else"polyline"===b?(b=a.getExtent(),b=b.expand(1.4),g=b.getCenter(),h=this.map.setExtent(b)):"polygon"===b?(b=a.getExtent(),b=b.expand(1.4),g=b.getCenter(),h=this.map.setExtent(b)):"extent"===b&&(b=a.expand(1.4),g=b.getCenter(),h=this.map.setExtent(b));h&&h.then(c.hitch(this,function(){"function"===typeof this.map.infoWindow.setFeatures&&
this.map.infoWindow.setFeatures([e]);this.map.infoWindow.setTitle('\x3cdiv class\x3d"query-popup-title"\x3e\x3c/div\x3e');this.map.infoWindow.setContent(f);"function"===typeof this.map.infoWindow.reposition&&this.map.infoWindow.reposition();this.map.infoWindow.show(g)}))}}}},_hideInfoWindow:function(){this.map&&this.map.infoWindow&&(this.map.infoWindow.hide(),"function"===typeof this.map.infoWindow.setFeatures&&this.map.infoWindow.setFeatures([]),this.map.infoWindow.setTitle(""),this.map.infoWindow.setContent(""))},
_onBtnResultsBackClicked:function(){var a;a=this.queryParams;d.setStyle(this.queryList,"display","none");d.setStyle(a,{display:"block",left:"-100%"});this._slide(a,-100,0);this._slide(this.queryResults,0,100)}})});