//>>built
require({cache:{"widgets/IncidentAnalysis/setting/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/Message dojo/text!./FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/_base/array dojox/form/CheckedMultiSelect dojo/on dojo/Evented".split(" "),function(h,p,c,l,q,e,g,k,m,r,n,s){return h([p,c,l,s],{templateString:e,baseClass:"imt-featurelayer-source",postCreate:function(){this.inherited(arguments);this._initUI()},
_initUI:function(){var c=this.map.itemInfo.itemData.operationalLayers,e=[];if(0===c.length)new q({message:this.nls.missingLayerInWebMap});else{this.weatherLayersSelect=(new r({name:"selectLayers",multiple:!0,style:"width:100%;"})).placeAt(this.selectLayers);for(var a=0;a<c.length;a++){var b=m.filter(e,function(b){return b.label===c[a].title});(null===b||0===b.length)&&this.weatherLayersSelect.addOption({label:c[a].title,value:c[a].title})}if(this.weatherTabAdditionalLayers){var e=this.weatherTabAdditionalLayers.split(","),
d=[];m.forEach(e,g.hitch(this,function(a){d.push(g.trim(a))}));this.weatherLayersSelect.set("value",d);0<d.length?k.removeClass(this.btnOk,"jimu-state-disabled"):k.addClass(this.btnOk,"jimu-state-disabled")}this.own(n(this.weatherLayersSelect,"click",g.hitch(this,function(){0<this._getSelectedLayers().length?k.removeClass(this.btnOk,"jimu-state-disabled"):k.addClass(this.btnOk,"jimu-state-disabled")})));this.own(n(this.btnOk,"click",g.hitch(this,function(){var a=this._getSelectedLayers();0<a.length&&
this.emit("ok",a)})));this.own(n(this.btnCancel,"click",g.hitch(this,function(){this.emit("cancel")})))}},_getSelectedLayers:function(){var c="";m.forEach(this.weatherLayersSelect.options,g.hitch(this,function(e){e.selected&&(0<c.length&&(c+=","),c+=e.value)}));return c}})})},"dojox/form/CheckedMultiSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/event dojo/dom-geometry dojo/dom-class dojo/dom-construct dojo/i18n dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Menu dijit/MenuItem dijit/Tooltip dijit/form/_FormSelectWidget dijit/form/ComboButton dojo/text!dojox/form/resources/_CheckedMultiSelectMenuItem.html dojo/text!dojox/form/resources/_CheckedMultiSelectItem.html dojo/text!dojox/form/resources/CheckedMultiSelect.html dojo/i18n!dojox/form/nls/CheckedMultiSelect dijit/form/CheckBox".split(" "),
function(h,p,c,l,q,e,g,k,m,r,n,s,t,u,a,b,d,v,w,x,B){var y=h("dojox.form._CheckedMultiSelectItem",[m,r,n],{templateString:w,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled||(this.disabled=this.option.disabled=this.option.disabled||!1);this.readOnly||(this.readOnly=this.option.readOnly=this.option.readOnly||!1);
this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=this.option.label},_changeBox:function(){!this.get("disabled")&&!this.get("readOnly")&&(this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus())},_onClick:function(f){this.get("disabled")||this.get("readOnly")?l.stop(f):this.checkBox._onClick(f)},_updateBox:function(){this.checkBox.set("value",
this.option.selected)},_setDisabledAttr:function(f){this.disabled=f||this.option.disabled;this.checkBox.set("disabled",this.disabled);e.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(f){this.checkBox.set("readOnly",f);this.readOnly=f}}),z=h("dojox.form._CheckedMultiSelectMenu",t,{multiple:!1,buildRendering:function(){this.inherited(arguments);var f=this.menuTableNode=this.domNode,a=this.domNode=g.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});
f.parentNode&&f.parentNode.replaceChild(a,f);e.remove(f,"dijitMenuTable");a.className=f.className+" dojoxCheckedMultiSelectMenu";f.className="dijitReset dijitMenuTable";f.setAttribute("role","listbox");a.setAttribute("role","presentation");a.appendChild(f)},resize:function(a){a&&(q.setMarginBox(this.domNode,a),"w"in a&&(this.menuTableNode.style.width="100%"))},onClose:function(){this.inherited(arguments);this.menuTableNode&&(this.menuTableNode.style.width="")},onItemClick:function(a,b){"undefined"==
typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled||a.readOnly)return!1;if(!this.multiple)this.onExecute();a.onClick(b)}}),A=h("dojox.form._CheckedMultiSelectMenuItem",u,{templateString:v,option:null,parent:null,iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"});this.disabled=this.option.disabled;this.checked=this.option.selected;
this.label=this.option.label;this.readOnly=this.option.readOnly;this.inherited(arguments)},onChange:function(a){},_updateBox:function(){e.toggle(this.domNode,"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected);this.domNode.setAttribute("aria-checked",this.option.selected);this.inputNode.checked=this.option.selected;this.parent.multiple||e.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(a){!this.disabled&&!this.readOnly&&(this.parent.multiple?
(this.option.selected=!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected)):this.option.selected||(c.forEach(this.parent.getChildren(),function(a){a.option.selected=!1}),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected)));this.inherited(arguments)}});return h("dojox.form.CheckedMultiSelect",b,{templateString:x,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],
postMixInProperties:function(){this.inherited(arguments);this._nlsResources=k.getLocalization("dojox.form","CheckedMultiSelect",this.lang);"$_unset_$"==this.invalidMessage&&(this.invalidMessage=this._nlsResources.invalidMessage)},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown&&(e.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),this.dropDownMenu=
new z({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,onChange:p.hitch(this,"_updateSelection")}))},startup:function(){this.dropDown&&(this.dropDownButton=new d({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode));this.inherited(arguments)},_onMouseDown:function(a){a.preventDefault()},validator:function(){return!this.required?!0:c.some(this.getOptions(),function(a){return a.selected&&null!=a.value&&
0!=a.value.toString().length})},validate:function(b){a.hide(this.domNode);(b=this.isValid(b))||this.displayMessage(this.invalidMessage);return b},isValid:function(a){return this.validator()},getErrorMessage:function(a){return this.invalidMessage},displayMessage:function(b){a.hide(this.domNode);b&&a.show(b,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(a,b){},_addOptionItem:function(a){var b;this.dropDown?(b=new A({option:a,parent:this.dropDownMenu}),this.dropDownMenu.addChild(b)):
(b=new y({option:a,parent:this,disabled:this.disabled,readOnly:this.readOnly}),this.wrapperDiv.appendChild(b.domNode));this.onAfterAddOptionItem(b,a)},_refreshState:function(){this.validate(this.focused)},onChange:function(a){this._refreshState()},reset:function(){this.inherited(arguments);a.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);c.forEach(this._getChildren(),function(a){a._updateBox()});g.empty(this.containerNode);var a=this;c.forEach(this.value,
function(b){b=g.create("option",{value:b,label:b,selected:"selected"});g.place(b,a.containerNode)});if(this.dropDown&&this.dropDownButton){var b=0,d="";c.forEach(this.options,function(a){a.selected&&(b++,d=a.label)});this.dropDownButton.set("label",this.multiple?p.replace(this._nlsResources.multiSelectLabelText,{num:b}):d)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():c.map(this.wrapperDiv.childNodes,function(a){return s.byNode(a)})},invertSelection:function(a){this.multiple&&
(c.forEach(this.options,function(a){a.selected=!a.selected}),this._updateSelection())},_setDisabledAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDownButton.set("disabled",a);c.forEach(this._getChildren(),function(b){b&&b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){this.inherited(arguments);"readOnly"in this.attributeMap&&this[this.attributeMap.readOnly].setAttribute("readonly",a);this.readOnly=a;c.forEach(this._getChildren(),function(b){b&&b.set&&b.set("readOnly",
a)})},uninitialize:function(){a.hide(this.domNode);c.forEach(this._getChildren(),function(a){a.destroyRecursive()});this.inherited(arguments)}})})},"widgets/IncidentAnalysis/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/IncidentAnalysis/setting/FeaturelayerSource.html":'\x3cdiv\x3e\r\n  \x3cdiv\x3e\r\n    \x3cspan class\x3d"label"\x3e${nls.selectLayers}: \x3c/span\x3e\r\n    \x3cdiv class\x3d"layerSelect" data-dojo-attach-point\x3d"selectLayers"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"footer"\x3e\r\n      \x3cdiv class\x3d"jimu-btn ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/form/resources/_CheckedMultiSelectMenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" dojoAttachPoint\x3d"focusNode" role\x3d"menuitemcheckbox" tabIndex\x3d"-1"\r\n\tdojoAttachEvent\x3d"ondijitclick:_onClick"\r\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\r\n\t\t\x3e\x3cdiv src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitMenuItemIcon ${_iconClass}" dojoAttachPoint\x3d"iconNode"\r\n\t\t\t\x3e\x3cinput class\x3d"dojoxCheckedMultiSelectCheckBoxInput" dojoAttachPoint\x3d"inputNode" type\x3d"${_type.type}"\r\n\t\t/\x3e\x3c/div\x3e\x3c/td\r\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" dojoAttachPoint\x3d"containerNode,labelNode"\x3e\x3c/td\r\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" dojoAttachPoint\x3d"accelKeyNode"\x3e\x3c/td\r\n\t\x3e\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26nbsp;\x3c/td\r\n\x3e\x3c/tr\x3e',
"url:dojox/form/resources/_CheckedMultiSelectItem.html":'\x3cdiv class\x3d"dijitReset ${baseClass}"\r\n\t\x3e\x3cinput class\x3d"${baseClass}Box" data-dojo-type\x3d"dijit.form.CheckBox" data-dojo-attach-point\x3d"checkBox" \r\n\t\tdata-dojo-attach-event\x3d"_onClick:_changeBox" type\x3d"${_type.type}" data-dojo-props\x3d\'disabled:${disabled}, readOnly:${readOnly}\' baseClass\x3d"${_type.baseClass}"\r\n\t/\x3e\x3cdiv class\x3d"dijitInline ${baseClass}Label" data-dojo-attach-point\x3d"labelNode" data-dojo-attach-event\x3d"onclick:_onClick"\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dojox/form/resources/CheckedMultiSelect.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"comboButtonNode"\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"selectNode" class\x3d"dijit dijitReset dijitInline ${baseClass}Wrapper" data-dojo-attach-event\x3d"onmousedown:_onMouseDown,onclick:focus"\r\n\t\t\x3e\x3cselect class\x3d"${baseClass}Select dojoxCheckedMultiSelectHidden" multiple\x3d"true" data-dojo-attach-point\x3d"containerNode,focusNode"\x3e\x3c/select\r\n\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"wrapperDiv"\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\x3e\x3c/div\x3e',
"url:widgets/IncidentAnalysis/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:100%;"\x3e\r\n  \x3c!-- Tabs --\x3e\r\n  \x3cdiv class\x3d"jimu-r-row"\x3e\r\n    \x3cdiv class\x3d"jimu-r-row"\x3e\r\n      \x3cdiv class\x3d"label" style\x3d"font-weight: bold;"\x3e\r\n        ${nls.tabs_section_Label}\r\n      \x3c/div\x3e\r\n      \x3chr/\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"btn-add-section enable" data-dojo-attach-point\x3d"btnAddTab"\x3e\r\n      \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"btn-add-label"\x3e${nls.addTab}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tabTable" data-dojo-type\x3d"jimu/dijit/SimpleTable" data-dojo-props\x3d\'fields:[{name:"layer",title:"${nls.layerName}","class":"label",type:"empty"},{name:"type",title:"${nls.layerType}","class":"label",type:"empty"},{name:"label",title:"${nls.layerLabel}","class":"label",type:"empty"},{name:"actions",title:"${nls.actions}","class":"actions",type:"actions",actions:["up","down","delete"]}]\'\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- General Settings: Distances --\x3e\r\n  \x3cdiv class\x3d"jimu-r-row"\x3e\r\n    \x3cdiv class\x3d"label" style\x3d"padding-top:15px;font-weight: bold;"\x3e\r\n      ${nls.general_setting_Label}\r\n    \x3c/div\x3e\r\n    \x3chr /\x3e\r\n    \x3cdiv class\x3d"jimu-r-row" style\x3d"padding-top:15px"\x3e\r\n      \x3cdiv class\x3d"col-1-4"\x3e\r\n        \x3cspan class\x3d"label"\x3e${nls.units_text_lbl}: \x3c/span\x3e\r\n        \x3cselect style\x3d"margin-left: 10px;" data-dojo-attach-point\x3d"selectUnits" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n          \x3coption value\x3d"miles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"meters"\x3e${nls.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.yards}\x3c/option\x3e\r\n          \x3coption value\x3d"nauticalMiles"\x3e${nls.nauticalMiles}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"col-1-4"\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"chk_routing" title\x3d"${nls.routing_checkBox}" /\x3e\r\n        \x3cspan class\x3d"label"\x3e${nls.routing_checkBox}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"col-2-4"\x3e\r\n        \x3cspan class\x3d"label"\x3e${nls.maximum_distance_lbl}: \x3c/span\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/NumberTextBox" style\x3d"width:60px" data-dojo-attach-point\x3d"txt_maximumDistance" title\x3d"${nls.maximum_distance_lbl}" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"jimu-r-row" style\x3d"padding-top:15px"\x3e\r\n      \x3cdiv class\x3d"col-1-4"\x3e\r\n        \x3cspan class\x3d"label"\x3e${nls.buffer_text_lbl}: \x3c/span\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"buffer_lbl" /\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"col-1-4"\x3e\r\n        \x3cspan class\x3d"label"\x3e${nls.buffer_min_lbl}: \x3c/span\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"buffer_min" /\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"col-1-4"\x3e\r\n        \x3cspan class\x3d"label"\x3e${nls.buffer_max_lbl}: \x3c/span\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"buffer_max" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cbr/\x3e\r\n  \x3c!-- Weather Settings --\x3e\r\n  \x3cdiv class\x3d"jimu-r-row" data-dojo-attach-point\x3d"div_special_tab"\x3e\r\n    \x3cdiv class\x3d"label" style\x3d"padding-top:15px;font-weight: bold;"\x3e\r\n      ${nls.weather_Label}\r\n    \x3c/div\x3e\r\n    \x3chr /\x3e\r\n    \x3cdiv style\x3d"padding-top:15px"\x3e\r\n      \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"chk_weather" title\x3d"${nls.weather_checkBox}" /\x3e\r\n      \x3cspan class\x3d"label"\x3e${nls.weather_checkBox}\x3c/span\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"btnSource" data-dojo-attach-event\x3d"onclick:_onBtnSelectLayersClicked" class\x3d\'jimu-btn\'\x3e\r\n        ${nls.selectLayers}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"padding-top:15px; padding-left:15px"\x3e\r\n      \x3cspan class\x3d"label"\x3e${nls.currentlySelectedLayer}:\x3c/span\x3e\r\n      \x3cspan class\x3d"label" data-dojo-attach-point\x3d"currentlySelectedLayer"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/IncidentAnalysis/setting/css/style.css":'.jimu-widget-IMT-setting .btn-add-section {display: inline-block; overflow: hidden; height: 24px; margin-left: 1px; margin-bottom: 3px; cursor: pointer; font-size: 13px; color: #538ec8; margin-top: 8px;}.jimu-widget-IMT-setting .btn-add-section .btn-add-icon {float: left; height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png);}.jimu-widget-IMT-setting .btn-add-section .btn-add-label {float: left; height: 100%; line-height: 24px; vertical-align: middle; margin-left: 7px; text-decoration: underline;}.claro .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectWrapper {border: none !important; background-color: transparent !important;}.footer {text-align: right;}.removeButtonWithIcon {background-image: url("../images/filterdialog_icons.png"); background-repeat: no-repeat; background-position: -30px 0; width: 15px; height: 15px; margin: 0px 0px; display: block;}.upButton {background-image: url("../../../../jimu.js/css/images/up_enabled.png"); background-repeat: no-repeat; width: 15px; height: 15px; margin: 0px 0px; display: block;}.downButton {background-image: url("../../../../jimu.js/css/images/down_enabled.png"); background-repeat: no-repeat; width: 15px; height: 15px; margin: 0px 0px; display: block;}.colorButton {width: 15px; height: 15px; margin: 0px 0px; display: block; background-color: #00ff00;}.footer {padding-top: 5px; width: 100%; height: 30px;}.dojoxCheckedMultiSelect .dojoxCheckedMultiSelectWrapper {height: 400px;}.dojoxMultiSelectItem {padding-bottom: 5px; padding-top: 5px;}',
"*now":function(h){h(['dojo/i18n!*preload*widgets/IncidentAnalysis/setting/nls/Setting*["ar","cs","da","de","en","el","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/html dojo/dom-style dojo/on dojo/query dijit/form/Select dijit/form/ValidationTextBox dijit/_WidgetsInTemplateMixin ./FeaturelayerSource jimu/BaseWidgetSetting jimu/dijit/Message jimu/dijit/Popup jimu/dijit/SimpleTable".split(" "),function(h,p,c,l,q,e,g,k,m,r,n,s,t,u){return h([s,r],{baseClass:"jimu-widget-IMT-setting",postCreate:function(){this.inherited(arguments);this._setLayers();this._setTypes();this.own(e(this.btnAddTab,
"click",c.hitch(this,this._addTabRow)));this.own(e(this.tabTable,"row-delete",c.hitch(this,function(a){a.select&&(a.select.destroy(),delete a.select)})))},startup:function(){this.inherited(arguments);this.setConfig(this.config)},setConfig:function(a){this.config=a;this.config.distanceUnits&&this.selectUnits.set("value",this.config.distanceUnits);this.config.maxDistance&&this.txt_maximumDistance.set("value",this.config.maxDistance);this.config.enableRouting&&this.chk_routing.set("value",!0);this.tabTable.clear();
for(a=0;a<this.config.tabs.length;a++){var b=this.config.tabs[a];b.type===this.config.special_layer.value?(this.chk_weather.set("value",!0),this.weatherTabAdditionalLayers=b.layers,this.currentlySelectedLayer.innerHTML=this.weatherTabAdditionalLayers):this._populateTabTableRow(b)}this.buffer_lbl.set("value",this.config.bufferLabel?this.config.bufferLabel:this.nls.buffer_lbl);this.buffer_max.set("value",this.config.bufferRange.maximum);this.buffer_min.set("value",this.config.bufferRange.minimum)},
getConfig:function(){this.config.distanceUnits=this.selectUnits.value;this.txt_maximumDistance.value&&(this.config.maxDistance=this.txt_maximumDistance.value);this.config.enableRouting=this.chk_routing.checked?!0:!1;var a=[],b={};this.chk_weather.checked&&(b.label=this.config.special_layer.label,b.type=this.config.special_layer.value,b.layers=this.weatherTabAdditionalLayers,b.url=this.config.special_layer.url,a.push(b));var d=this.tabTable.getRows();p.forEach(d,c.hitch(this,function(c){var d=c.selectLayers,
e=c.selectTypes;c=c.labelText;b={};b.label=c.value;b.type=e.value;b.layers=d.value;a.push(b)}));this.config.tabs=a;this.config.bufferLabel=this.buffer_lbl.value;this.config.bufferRange.maximum=this.buffer_max.value;this.config.bufferRange.minimum=this.buffer_min.value;return this.config},_setLayers:function(){for(var a=this.map.itemInfo.itemData.operationalLayers,b=[],d=a.length-1;0<=d;d--)"ArcGISFeatureLayer"===a[d].layerType&&b.push({label:a[d].title,value:a[d].title});0===b.length?(q.set(this.btnAddTab,
"display","none"),new t({message:this.nls.missingLayerInWebMap})):this.layer_options=c.clone(b)},_setTypes:function(){this.analysis_options=[{value:"closest",label:this.nls.closest},{value:"proximity",label:this.nls.proximity},{value:"summary",label:this.nls.summary}]},_populateTabTableRow:function(a){var b=this.tabTable.addRow({});b.success&&b.tr&&(b=b.tr,this._addTabLayers(b),this._addTabTypes(b),this._addTabLabel(b),b.selectLayers.set("value",a.layers),b.selectTypes.set("value",a.type),b.labelText.set("value",
a.label))},_addTabRow:function(){var a=this.tabTable.addRow({});a.success&&a.tr&&(a=a.tr,this._addTabLayers(a),this._addTabTypes(a),this._addTabLabel(a))},_addTabLayers:function(a){var b=c.clone(this.layer_options),d=g(".simple-table-cell",a)[0];d&&(l.setStyle(d,"verticalAlign","middle"),b=new k({style:{width:"100%",height:"30px"},options:b}),b.placeAt(d),b.startup(),a.selectLayers=b)},_addTabTypes:function(a){var b=c.clone(this.analysis_options),d=g(".simple-table-cell",a)[1];d&&(l.setStyle(d,"verticalAlign",
"middle"),b=new k({style:{width:"100%",height:"30px"},options:b}),b.placeAt(d),b.startup(),a.selectTypes=b)},_addTabLabel:function(a){var b=g(".simple-table-cell",a)[2];l.setStyle(b,"verticalAlign","middle");var c=new m({style:{width:"100%",height:"30px"}});c.placeAt(b);c.startup();a.labelText=c},_onBtnSelectLayersClicked:function(){var a=new n({nls:this.nls,map:this.map,config:this.config,weatherTabAdditionalLayers:this.weatherTabAdditionalLayers,appConfig:this.appConfig}),b=new u({width:830,height:560,
content:a,titleLabel:this.nls.selectLayers});this.own(e(a,"ok",c.hitch(this,function(c){this.weatherTabAdditionalLayers=c;this.currentlySelectedLayer.innerHTML=this.weatherTabAdditionalLayers;a.destroy();a=null;b.close()})));this.own(e(a,"cancel",c.hitch(this,function(){a.destroy();a=null;b.close()})))}})});