//>>built
require({cache:{"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(p,c,q,f,d){p=p(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(b){this.messages=[];c.mixin(this,b);b=this.messages;var f,r=b.length;for(f=0;f<r;f++)b[f]=new d(b[f])},jobId:"",jobStatus:""});c.mixin(p,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",
STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});return p})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(p,c,q,f){p=p(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(d){c.mixin(this,d)}});c.mixin(p,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",
TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});return p})},"esri/dijit/analysis/utils":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/_base/json dojo/dom-attr dojo/has dojo/i18n dojo/io-query dojo/i18n!../../nls/jsapi dojo/json dojo/string dojo/query dojo/dom-style dojo/dom-class dojo/dom-construct dojo/Deferred dojo/number dojo/_base/window dojo/when dojo/data/ItemFileWriteStore dijit/registry dijit/Dialog dijit/form/CheckBox ../../kernel ../../lang ../../request ./HelpWindow ../../tasks/query ../../dijit/BrowseItems ../../layers/FeatureLayer ./PluginAnalysisLayers ../../tasks/Geoprocessor".split(" "),
function(p,c,q,f,d,b,h,r,s,k,x,t,l,m,n,C,w,A,z,E,D,B,a,g,e,v,y,F,G,H,I,J,K,L){p={};c.mixin(p,{_helpDialog:null,i18n:null,initHelpLinks:function(u,e,b){this._helpDialog||(this._helpDialog=new G);if(u){var g=a.byNode(u),v=g?g.get("helpFileName"):b&&b.helpFileName?b.helpFileName:null;m("[esriHelpTopic]",u).forEach(function(a,g,r){a&&(n.set(a,"display",!y.isDefined(e)||!0===e?"":"none"),f.connect(a,"onclick",c.hitch(this,function(e){d.stop(e);this._helpDialog.show(e,{helpId:h.get(a,"esriHelpTopic"),helpFileName:v,
analysisGpServer:b&&b.analysisGpServer?b.analysisGpServer:null,helpParentNode:u})})))},this)}},constructAnalysisFeatColl:function(u){var a={},e;a.featureCollection=u.layerDefinition;for(e in a.featureCollection)a.featureCollection.hasOwnProperty(e)&&"objectIdField"===e&&(a.featureCollection.objectIdFieldName=c.clone(a.featureCollection.objectIdField),delete a.featureCollection.objectIdField);a.featureCollection.features=u.featureSet.features;return a},constructAnalysisInputLyrObj:function(u){var a=
{};if(u.url&&!u._collection)a={url:u.url},u.getDefinitionExpression&&u.getDefinitionExpression()?a.filter=u.getDefinitionExpression():y.isDefined(u.definitionExpression)&&""!==u.definitionExpression&&(a.filter=u.definitionExpression),u.credential&&(a.serviceToken=u.credential.token),-1!==a.url.indexOf("?")&&(u=a.url.substring(a.url.indexOf("?")+1,a.url.length),u=k.queryToObject(u),c.mixin(a,u),a.url=a.url.substring(0,a.url.indexOf("?")));else if(!u.url||u._collection)try{a=u.toJson()}catch(e){u._json=
t.parse(u._json),a=u.toJson()}return a},buildReport:function(a,e){var b="";e||(e={},c.mixin(e,x.analysisMsgCodes));q.forEach(a,function(a,u){var g,d,v;"string"===typeof a.message?(g=y.isDefined(e[a.messageCode])?e[a.messageCode]:a.message,b+=a.style.substring(0,a.style.indexOf("\x3c/"))+(!this._isEmptyObject(a.params)?l.substitute(g,a.params):g)+a.style.substring(a.style.indexOf("\x3c/"))):c.isArray(a.message)&&(v=[],d=c.clone(a.style),q.forEach(a.message,function(u,b){d=d.replace(/<\//,"${"+b+"}");
g=y.isDefined(e[a.messageCode+"_"+b])?e[a.messageCode+"_"+b]:u;g=!this._isEmptyObject(a.params)?l.substitute(g,a.params):g;v.push(g+"\x3c/")},this),d=l.substitute(d,v),b+=d)},this);return b},getLayerFeatureCount:function(a,e){var b=new H;b.geometry=e.geometry||"";b.where=e.where||"1\x3d1";b.geometryType=e.geometryType||"esriGeometryEnvelope";return a.queryCount(b)},createPolygonFeatureCollection:function(a){var e;e={layerDefinition:null,featureSet:{features:[],geometryType:"esriGeometryPolygon"}};
e.layerDefinition={currentVersion:10.2,copyrightText:"",defaultVisibility:!0,relationships:[],isDataVersioned:!1,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,objectIdField:"OBJECTID",templates:[],type:"Feature Layer",displayField:"TITLE",visibilityField:"VISIBLE",name:a,hasAttachments:!1,typeIdField:"TYPEID",capabilities:"Query",allowGeometryUpdates:!0,htmlPopupType:"",hasM:!1,hasZ:!1,globalIdField:"",
supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:-1,indexes:[],types:[],drawingInfo:{renderer:{type:"simple",symbol:{color:[0,0,0,255],outline:{color:[0,0,0,255],width:3,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSNull"},label:"",description:""},transparency:0,labelingInfo:null,fixedSymbols:!0},fields:[{alias:"OBJECTID",name:"OBJECTID",type:"esriFieldTypeOID",editable:!1},{alias:"Title",name:"TITLE",length:50,type:"esriFieldTypeString",editable:!0},{alias:"Visible",
name:"VISIBLE",type:"esriFieldTypeInteger",editable:!0},{alias:"Description",name:"DESCRIPTION",length:1073741822,type:"esriFieldTypeString",editable:!0},{alias:"Type ID",name:"TYPEID",type:"esriFieldTypeInteger",editable:!0}]};return e},createPointFeatureCollection:function(a){var e;e={layerDefinition:null,featureSet:{features:[],geometryType:"esriGeometryPoint"}};e.layerDefinition={objectIdField:"OBJECTID",templates:[],type:"Feature Layer",drawingInfo:{renderer:{field1:"TYPEID",type:"simple",symbol:{height:24,
xoffset:0,yoffset:12,width:24,contentType:"image/png",type:"esriPMS",url:"http://static.arcgis.com/images/Symbols/Basic/GreenStickpin.png"},description:"",value:"0",label:"Stickpin"}},displayField:"TITLE",visibilityField:"VISIBLE",name:a,hasAttachments:!1,typeIdField:"TYPEID",capabilities:"Query",types:[],geometryType:"esriGeometryPoint",fields:[{alias:"OBJECTID",name:"OBJECTID",type:"esriFieldTypeOID",editable:!1},{alias:"Title",name:"TITLE",length:50,type:"esriFieldTypeString",editable:!0},{alias:"Visible",
name:"VISIBLE",type:"esriFieldTypeInteger",editable:!0},{alias:"Description",name:"DESCRIPTION",length:1073741822,type:"esriFieldTypeString",editable:!0},{alias:"Type ID",name:"TYPEID",type:"esriFieldTypeInteger",editable:!0}]};return e},createFolderStore:function(a,e){var b=new B({data:{identifier:"id",label:"name",items:[]}});b.newItem({name:e,id:""});q.forEach(a,function(a){b.newItem({name:a.title,id:a.id})});return b},setupFoldersUI:function(a){a.folderSelect.set("store",a.folderStore);a.folderSelect.set("required",
!0);a.folderSelect.set("searchAttr","name");y.isDefined(a.folderId)?a.folderStore.get(a.folderId).then(c.hitch(this,function(e){y.isDefined(e)?a.folderSelect.set("item",e):a.folderStore.get("").then(function(e){a.folderSelect.set("item",e)},this)})):a.folderName?a.folderStore.fetch({query:{name:a.folderName},onComplete:c.hitch(this,function(e){y.isDefined(e)&&0<e.length?a.folderSelect.set("item",e[0]):a.folderStore.get("").then(function(e){a.folderSelect.set("item",e)},this)})}):a.username?a.folderSelect.set("displayedValue",
a.username):a.folderStore.get("").then(function(e){a.folderSelect.set("item",e)},this)},_isEmptyObject:function(a){for(var e in a)if(a.hasOwnProperty(e))return!1;return!0},validateServiceName:function(a,e){var b=/(:|&|<|>|%|#|\?|\\|\"|\/|\+)/.test(a),g=!0,c,d;y.isDefined(e)&&e.textInput&&(d=e.textInput);this.initI18n();0===a.length||0===l.trim(a).length?(c=this.i18n.requiredValue,g=!1):b?(c=this.i18n.invalidServiceName,g=!1):98<a.length?(c=this.i18n.invalidServiceNameLength,g=!1):170<encodeURIComponent(a).length&&
(c=this.i18n.invalidEncodedServiceNameLength,g=!1);d&&!g&&d.set("invalidMessage",c);return g},getStepNumber:function(a){m(".esriAnalysisNumberLabel",a).forEach(function(a,e){var u=this._getNumberLabel(e);h.set(a,"innerHTML",u)},this)},_getNumberLabel:function(a){var e="";this.initI18n();switch(a){case 0:e=this.i18n.oneLabel;break;case 1:e=this.i18n.twoLabel;break;case 2:e=this.i18n.threeLabel;break;case 3:e=this.i18n.fourLabel;break;case 4:e=this.i18n.fiveLabel;break;case 5:e=this.i18n.sixLabel;break;
case 6:e=this.i18n.sevenLabel;break;case 7:e=this.i18n.eightLabel;break;case 8:e=this.i18n.nineLabel}return e},populateAnalysisLayers:function(a,e,b,g){if(a){var c=[],d=a.get(e);a._titleRow&&n.set(a._titleRow,"display","none");a._analysisLabelRow&&n.set(a._analysisLabelRow,"display","table-row");a._selectAnalysisRow&&(n.set(a._selectAnalysisRow,"display","table-row"),C.add(a._analysisSelect.domNode,"esriTrailingMargin3"),n.set(a._analysisSelect.domNode.parentNode,"padding-bottom","1em"));a.domNode&&
this.getStepNumber(a.domNode);y.isDefined(g)&&g.chooseLabel&&c.push({value:-1,label:this.i18n.chooseLabel});q.forEach(a.get(b),function(a,e){var u={value:y.isDefined(g)&&g.chooseLabel?e+1:e,label:a.name};d&&a.name===d.name&&(u.selected=!0);c.push(u)},this);a._analysisSelect.addOption(c);a._analysisSelect.set("required",!0)}},isValidAnalysisLayer:function(a){var e,b,g,c,d,v,n,f="",r=!0;e={isValid:r,validationMessage:f};var F,k,h=0,s=0,m=0;if(!y.isDefined(a)||!y.isDefined(a.toolName))return e;this.initI18n();
e=a.toolName;b=a.featureLayers;g=a.analysisLayer;c=e.charAt(0).toLowerCase()+e.substring(1);n=this.i18n;a=a.showReadyToUseLayers||!1;q.forEach(b,function(a){"esriGeometryPoint"===a.geometryType&&(v=!0,h++);if("esriGeometryPoint"===a.geometryType||"esriGeometryMultipoint"===a.geometryType)F=!0;"esriGeometryPolyline"===a.geometryType&&(k=!0,m++);"esriGeometryPolygon"===a.geometryType&&(d=!0,s++)},this);-1!==q.indexOf(["CreateDriveTimeAreas","PlanRoutes","ConnectOriginsToDestinations"],e)&&(!v||g&&"esriGeometryPoint"!==
g.geometryType)?(f=l.substitute(this.i18n.selectPointLayer,{toolName:n[c]}),r=!1):("AggregatePoints"===e||"InterpolatePoints"===e)&&(g&&!("esriGeometryPoint"===g.geometryType||"esriGeometryMultipoint"===g.geometryType)||!F)?(f=l.substitute(this.i18n.selectPointLayer,{toolName:n[c]}),r=!1):"CalculateDensity"===e&&(!F&&!k||g&&!("esriGeometryPoint"===g.geometryType||"esriGeometryMultipoint"===g.geometryType||"esriGeometryPolyline"===g.geometryType))?(f=l.substitute(this.i18n.areaFeatureInvalidMsg,{toolName:n[c]}),
r=!1):"FindHotSpots"===e&&(!F&&!d||g&&!("esriGeometryPoint"===g.geometryType||"esriGeometryMultipoint"===g.geometryType||"esriGeometryPolygon"===g.geometryType))?(f=l.substitute(this.i18n.hotspotsLineFeatureMsg,{toolName:n[c]}),r=!1):("OverlayLayers"===e||"AggregatePoints"===e||"SummarizeWithin"===e||"SummarizeNearby"===e||"FindNearest"===e||"MergeLayers"===e)&&!a&&(0===b.length||1===b.length&&(b[0]===g||!y.isDefined(g)))?(f=l.substitute(this.i18n.overlayValidationMsg,{toolName:n[c]}),r=!1):"ConnectOriginsToDestinations"===
e&&!a&&(0===b.length||2>h)?(f=l.substitute(this.i18n.odPointMsg,{toolName:n[c]}),r=!1):"AggregatePoints"===e&&!a&&1<b.length?(d=q.some(b,function(a){return"esriGeometryPolygon"===a.geometryType}),d||(f=l.substitute(this.i18n.aggregatePolyMsg,{toolName:n[c]}),r=!1)):"MergeLayers"===e&&!a&&1<b.length?1<h||(1<m||1<s)||(f=this.i18n.mergeValidationMsg,r=!1):("SummarizeWithin"===e||"DissolveBoundaries"===e)&&(g&&"esriGeometryPolygon"!==g.geometryType||!d)?(f=l.substitute(this.i18n.selectPolyLayer,{toolName:n[c]}),
r=!1):"ExtractData"===e?(r=q.some(b,function(a){return-1!==a.capabilities.indexOf("Extract")}))||(f=l.substitute(this.i18n.extractValidationMsg)):"ConnectOriginsToDestinations"===e&&1<b.length&&(v=q.some(b,function(a){var e=y.isDefined(g)&&g.id===a.id;return"esriGeometryPoint"===a.geometryType&&!e}),v||(f=l.substitute(this.i18n.odPointMsg,{toolName:n[c]}),r=!1));return e={isValid:r,validationMessage:f}},initI18n:function(){this.i18n||(this.i18n={},c.mixin(this.i18n,x.common),c.mixin(this.i18n,x.analysisTools),
c.mixin(this.i18n,x.analysisMsgCodes),c.mixin(this.i18n,x.browseLayersDlg),c.mixin(this.i18n,x.driveTimes))},addBrowseAnalysisDialog:function(a){var b=[];if(a&&a.widget){this.i18n||this.initI18n();b.push({label:this.i18n.categoryAll,value:"analysis ready"});b.push({label:this.i18n.categoryBoundaries,value:"boundaries OR places"});b.push({label:"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;"+this.i18n.subCategoryBoundaries,value:"boundaries"});b.push({label:"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;"+this.i18n.subCategoryPlaces,
value:"places"});b.push({label:this.i18n.categoryHexBins,value:"hex"});b.push({label:this.i18n.categoryTransportation,value:"transportation"});var c=E.doc.createDocumentFragment(),c=w.create("div",{style:"width:100%;height:100%;"},c),d=w.create("div",{style:"width:100%;height:10%;"},c),v=w.create("div",{style:"width:100%"},c),b=new I({portalUrl:a.widget.get("portalUrl"),message:"",plugin:"esri/dijit/analysis/PluginAnalysisLayers",sortDescending:!0,sort:"title",self:a.widget.get("portalSelf"),categories:b,
categoryType:"tags",selectedCategory:"boundaries OR places",pagingLinks:3,itemsPerPage:6,"class":"esriBrowseAnalysisLayers itemsGallery esriFloatLeading",closePopupPerRow:!1,galleryTemplate:'\x3cdiv style\x3d\'opacity:1;\' class\x3d\'grid-item gallery-view galleryNode\'\x3e${item:_formatItemTitle}${item:_formatThumbnail}\x3cdiv class\x3d"linksDiv" style\x3d\'display:none;\'\x3e\x3cdiv class\x3d"esriItemLinks"\x3e\x3cdiv class\x3d"esriFloatLeading"\x3e\x3ca style\x3d"text-decoration: none;"\x3e\x3cspan\x3eAdd layer to analysis\x3c/span\x3e\x3cdiv class\x3d"dijitReset dijitInline esriArrows"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
formatThumbnail:function(a){return"\x3cimg class\x3d'grid-item galleryThumbnail' width\x3d'120px' height\x3d'80px' alt\x3d'' src\x3d'"+(a.thumbnailUrl||this._portal.staticImagesUrl+"/desktopapp.png")+"'\x3e"},formatItemTitle:function(a){return'\x3cdiv class\x3d"galleryLabelContainer"\x3e\x3cspan alt\x3d\''+(a.title||a.name||"\x3cNo Title\x3e")+"'\x3e"+(a.title.replace(/_/g," ")||a.name.replace(/_/g," ")||"\x3cNo Title\x3e")+"\x3c/span\x3e\x3c/div\x3e"},style:"width:600px;height:90%;clear:both;"},
v);w.create("label",{"for":a.widget.id+"_addlayercheck","class":"esriFloatTrailing",style:"padding-bottom:0.5em;",innerHTML:this.i18n.addLayer},d);a=new e({name:"addlayer",id:a.widget.id+"_addlayercheck","class":"esriFloatTrailing",value:!1,checked:!1},w.create("input",{},d,"last"));return new g({title:this.i18n.browseAnalysisTitle,content:c,doLayout:!0,browseItems:b,addlayerCheckBox:a,style:"padding:.75em 0;background-color: #fff;"})}},addAnalysisReadyLayer:function(a){if(y.isDefined(a)&&y.isDefined(a.item)&&
y.isDefined(a.layersSelect)&&y.isDefined(a.layers)&&y.isDefined(a.browseDialog)){a.browseDialog.browseItems._closePopup();a.browseDialog.hide();var e={url:a.item.url+"/0",itemId:a.item.id,title:a.item.title,analysisReady:!0},b,g=q.some(a.layers,function(a,g){var c=a.analysisReady&&e.analysisReady&&a.itemId===e.itemId;c&&(b=g);return c}),d,v,n,f=new A,r;g?(a.posIncrement&&(b+=a.posIncrement),a.browseDialog.addlayerCheckBox.get("checked")&&(a.posIncrement||(a.posIncrement=0),r=a.layers[b-a.posIncrement],
a.widget.map.getLayer(r.lyr.id)||(this._addLayerHandle&&this._addLayerHandle.remove(),this._addLayerHandle=a.widget.map.on("layer-add",c.hitch(this,function(e){this._addLayerHandle.remove();a.widget.emit("add-ready-to-use-layer",{layer:e.layer,layerInfo:r.linfo,item:r})})),a.widget.map.addLayer(r.lyr))),a.layersSelect.set("value",b),a.browseDialog.browseItems.clear(),f.resolve()):(f=F({url:e.url,content:{f:"json"}}),f.then(c.hitch(this,function(b){var g=new J(e.url,{outFields:["*"]});c.mixin(e,g);
c.mixin(e,b);e.id=e.title+"_"+b.id;e.title=e.title.replace(/_/g," ");e.name=e.title;e.version=e.currentVersion;n=a.layersSelect.getOptions();d=n.splice(n.length-2,2);a.layersSelect.removeOption(d);v=a.layers.length;a.posIncrement&&(v+=a.posIncrement);d.unshift({value:v,label:e.title,selected:!0});a.layersSelect.addOption(d);a.layersSelect.set("value",v);e.lyr=g;e.linfo=b;a.layers.push(e);g.name=e.name;a.browseDialog.addlayerCheckBox.get("checked")&&(this._addLayerHandle&&this._addLayerHandle.remove(),
this._addLayerHandle=a.widget.map.on("layer-add",c.hitch(this,function(g){this._addLayerHandle.remove();a.widget.emit("add-ready-to-use-layer",{layer:g.layer,layerInfo:b,item:e})})),a.widget.map.addLayer(g));a.browseDialog.browseItems.clear()})));return f.promise}},addReadyToUseLayerOption:function(a,e){a&&a.showReadyToUseLayers&&(e||(e=[]),a.signInPromise.then(c.hitch(this,function(){q.forEach(e,function(e){e.addOption({type:"separator",value:""});e.addOption({value:"browse",label:a.i18n.browseAnalysisTitle})},
this);y.isDefined(a._browsedlg)||(a._browsedlg=this.addBrowseAnalysisDialog({widget:a}),a.own(a._browsedlg.browseItems.on("select-change",c.hitch(a,a._handleBrowseItemsSelect)),a._browsedlg.on("hide",c.hitch(a,function(){a._browsedlg.browseItems._closePopup();q.forEach(e,function(a){"browse"===a.get("value")&&a.reset()})}))))})))},getMaxInputByMode:function(a){var e;if(a&&a.units&&a.type){if("StraightLine"===a.type)"Miles"===a.units?e=1E3:"Yards"===a.units?e=176E4:"Kilometers"===a.units?e=z.format(1609.34,
{places:2}):"Meters"===a.units?e=z.format(1609340,{places:2}):"Feet"===a.units&&(e=528E4);else if("DrivingDistance"===a.type||"TruckingDistance"===a.type||"WalkingDistance"===a.type)"Miles"===a.units?e=300:"Yards"===a.units?e=528E3:"Kilometers"===a.units?e=z.format(482.802,{places:2}):"Meters"===a.units?e=z.format(482802,{places:2}):"Feet"===a.units&&(e=1584E3);else if("DrivingTime"===a.type||"TruckingTime"===a.type||"WalkingTime"===a.type)"Minutes"===a.units?e=300:"Seconds"===a.units?e=18E3:"Hours"===
a.units&&(e=5);return e}},updateModeConstraints:function(a){var e;a&&(a.validateWidget&&a.units&&a.type)&&(e=a.validateWidget.get("constraints"),e.max=this.getMaxInputByMode(a),a.validateWidget.set(e))},getTravelModes:function(a){var e=new A,g,d,v,n;y.isDefined(this.travelModes)&&0<this.travelModes.length?e.resolve(this.travelModes):!a||!a.widget?e.reject(Error("Missing parameter: params.widget required parameter")):a.widget.signInPromise.then(c.hitch(this,function(f){(n=a.widget.get("helperServices"))&&
n.routingUtilities?(v=n.routingUtilities.url,g="sync"):g=a.widget._getSelf(a.widget.portalUrl);D(g,c.hitch(this,function(a){var g={};a&&(a.helperServices&&a.helperServices.routingUtilities)&&(v=a.helperServices.routingUtilities.url);y.isDefined(v)?(d=new L(v+"/GetTravelModes"),d.execute(g).then(c.hitch(this,function(a){this.travelModes=q.map(a[0].value&&a[0].value.features,function(a){return b.fromJson(a.attributes.TravelMode)});a[1]&&(a[1].paramName&&"defaultTravelMode"===a[1].paramName)&&(this.defaultTravelModeId=
a[1].value);e.resolve(this.travelModes)}),c.hitch(this,function(a){e.reject(a)}))):e.reject(Error("Missing Routing Utility Service to get Travel Modes"))}),function(a){e.reject(a)})}));return e.promise},populateTravelModes:function(a){if(a&&a.selectWidget&&a.widget){var e=[],b=a.allowmode||"all";this.initI18n();a.addStraightLine&&e.push({value:"StraightLine",label:'\x3cdiv class\x3d"esriFloatLeading bufferIcon esriStraightLineDistanceIcon"\x3e\x3c/div\x3e\x3cdiv class\x3d"esriLeadingMargin4" style\x3d"height:20px;margin-top:10px;"\x3e'+
this.i18n.straightLineDistance+"\x3c/div\x3e"});this.getTravelModes({widget:a.widget}).then(c.hitch(this,function(g){q.forEach(g,function(g,c){var d=g.name,v=d.replace(/\s/g,a.separator||""),n="AUTOMOBILE"===g.type?"Driving":"TRUCK"===g.type?"Trucking":"WALK"===g.type?"Walking":"Other",f=n.toLowerCase(),r=g.units||d.split(/\s/)[1],F=y.isDefined(a.enableTravelModes)&&!a.enableTravelModes,r=g.impedanceAttributeName===g.timeAttributeName?"Time":g.impedanceAttributeName===g.distanceAttributeName?"Distance":
"Other",d={label:'\x3cdiv class\x3d"esriFloatLeading bufferIcon esri'+n+r+'Icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"esriLeadingMargin4" style\x3d"height:20px;margin-top:10px;"\x3e'+d+"\x3c/div\x3e",value:v,travelMode:g,disabled:F,modei18nKey:f,units:r};if("all"===b||b===r.toLowerCase())"all"!==b&&(d.value=d.value.replace(r,"")),a.selectDefaultMode&&(this.defaultTravelModeId&&this.defaultTravelModeId===g.id)&&(d.selected=!0),e.push(d)},this);a.selectWidget.removeOption();a.selectWidget.addOption(e);
a.selectWidget.set("value",a.value);a.widget.emit("travelmodes-added",{travelOptions:e})}),c.hitch(this,function(b){e&&0<e.length&&(a.selectWidget.removeOption(),a.selectWidget.addOption(e),a.selectWidget.set("value",a.value),a.widget.emit("travelmodes-added",{travelOptions:e}))}))}}});return p})},"esri/dijit/analysis/HelpWindow":function(){define("require dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/_base/kernel dojo/aspect dojo/has dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/dom-style dojo/query dojo/window dojo/dom-geometry dijit/_Widget dijit/TooltipDialog dijit/popup ../../kernel ../../lang ../../request ../_EventedWidget dojo/i18n!../../nls/jsapi".split(" "),
function(p,c,q,f,d,b,h,r,s,k,x,t,l,m,n,C,w,A,z,E,D,B,a,g){return q([w],{declaredClass:"esri.dijit.analysis.HelpWindow",i18n:null,onlineHelpMap:null,showLearnMore:!1,"class":"esriAnalyisHelpWindow",postMixInProperties:function(){this.inherited(arguments);this.i18n={};f.mixin(this.i18n,g.common);f.mixin(this.i18n,g.analysisHelp)},postCreate:function(){this.inherited(arguments);var a=["ar","he"],b,g;this.onlineHelpMap={};for(b=0;b<a.length;b+=1)g=a[b],h.locale&&-1!==h.locale.indexOf(g)&&(-1!==h.locale.indexOf("-")?
-1!==h.locale.indexOf(g+"-")&&(this._isRightToLeft=!0):this._isRightToLeft=!0);a=p.toUrl("./help/helpmap.json");B({url:a}).then(f.hitch(this,function(a){this.onlineHelpMap=a.map}))},_getAbsoluteUrl:function(a){if(/^https?\:/i.test(a))return a;if(/^\/\//i.test(a))return window.location.protocol+a;if(/^\//i.test(a))return window.location.protocol+"//"+window.location.host+a},_computeSize:function(a){var b={w:400,h:200};-1!==a.indexOf("Category")?(b.w=400,b.h=320):-1!==a.indexOf("Tool")?(b.w=400,b.h=
320):-1!==a.indexOf("toolDescription")&&(b.w=400,b.h=520);return b},_setHelpTopicAttr:function(a){this.tooltipHelpDlg&&(z.close(this.tooltipHelpDlg),this.tooltipHelpDlg.destroy(),this.tooltipHelpDlg=null);var b,g,d,n;this.showLearnMore=!1;g=this._analysisGpServer&&-1!==this._analysisGpServer.indexOf("dev")?"dev":this._analysisGpServer&&-1!==this._analysisGpServer.indexOf("qa")?"uat":"";b=f.clone(h.locale);"nb"===b&&(b="no");d=p.toUrl("esri/dijit/analysis/help/"+this.helpFileName+".html");D.isDefined(this.onlineHelpMap[this.helpFileName])&&
D.isDefined(this.onlineHelpMap[this.helpFileName][a])&&(this.showLearnMore=!0,n="http://doc"+g+".arcgis.com/en/arcgis-online/use-maps/"+this.onlineHelpMap[this.helpFileName][a]);-1!==c.indexOf("ar cs da de es el et fi fr it ja ko lt lv ru nl no pl pt-br pt-pt ro sv th tr vi zh-cn zh-hk zh-tw".split(" "),b)&&(-1!==b.indexOf("-")&&(d=b.split("-"),b=d[0]+"-"+d[1].toUpperCase()),d=p.toUrl("esri/dijit/analysis/help/"+b+"/"+this.helpFileName+".html"));-1!==c.indexOf("ar de es fr it ja ko ru nl pl pt-br pt-pt ro zh-cn zh-hk zh-tw".split(" "),
b)&&this.showLearnMore&&(n="http://doc"+g+".arcgis.com/"+b+"/arcgis-online/use-maps/"+this.onlineHelpMap[this.helpFileName][a]);this._size=g=this._computeSize(a);this.tooltipHelpDlg=new A({preload:!0,content:"\x3cdiv class\x3d'' style\x3d'position:relative'\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3cdiv class\x3d'esriFloatTrailing' style\x3d'padding:0;'\x3e\x3ca href\x3d'#' class\x3d'esriAnalysisCloseIcon' title\x3d'"+this.i18n.close+"'\x3e\x3c/a\x3e\x3c/div\x3e\x3ciframe frameborder\x3d'0'  id\x3d'"+
a+"' src\x3d'"+d+"#"+a+"' width\x3d'"+g.w+"' height\x3d'"+g.h+"' marginheight\x3d'0' marginwidth\x3d'0'\x3e\x3c/iframe\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList"+(this.showLearnMore?"'\x3e":" hidden'\x3e")+"\x3ca class\x3d'action zoomTo' href\x3d'"+(this.showLearnMore?n:"#")+"' target\x3d'_help'\x3e"+this.i18n.learnMore+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e","class":"esriHelpPopup esriHelpPopupWrapper esriAnalyisHelpWindow"});
this.tooltipHelpDlg.startup()},show:function(a,b){this.helpFileName=b.helpFileName;this._analysisGpServer=b.analysisGpServer;this.set("helpTopic",b.helpId);var g=r.after(z,"open",f.hitch(this,function(){m(".esriAnalysisCloseIcon",this.tooltipHelpDlg.domNode).on("click",f.hitch(this,this.close));g.remove()})),c=a.pageX,d=n.getBox(),k,h,s;s=!1;b.helpParentNode&&(k=b.helpParentNode);k&&(h=C.position(k));h&&d.w-a.pageX<h.w?(s=!0,c=h.x-this._size.w-10,this._isRightToLeft&&(c-=10)):this._isRightToLeft&&
c-40<this._size.w&&(c=h.w+this._size.w+80);z.open({popup:this.tooltipHelpDlg,x:!0===this._isRightToLeft||s?c-40:c+40,y:a.screenY-a.pageY+10,onCancel:f.hitch(this,function(){this.close()}),onExecute:function(){this.close()}});this.tooltipHelpDlg.domNode.parentNode&&l.set(this.tooltipHelpDlg.domNode.parentNode,"overflowY","hidden")},close:function(a,b){z.close(this.tooltipHelpDlg)}})})},"esri/dijit/BrowseItems":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-class dojo/dom-style dojo/dom-attr dojo/string dojo/on dojo/aspect dojo/has dojo/dom dojo/dom-construct dojo/mouse dojo/query dojo/parser dijit/registry dijit/TooltipDialog dijit/popup dojo/promise/all dojo/Deferred dgrid/Grid dgrid/extensions/Pagination dgrid/extensions/DijitRegistry dgrid/OnDemandGrid dgrid/Selection dgrid/selector dgrid/Keyboard dgrid/util/mouse dgrid/util/touch put-selector/put dojo/store/Observable dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_FocusMixin dijit/form/Select ../arcgis/Portal ../Evented ../PluginTarget dojo/i18n!../nls/jsapi ./_RefreshMixin ../kernel ../lang".split(" "),
function(p,c,q,f,d,b,h,r,s,k,x,t,l,m,n,C,w,A,z,E,D,B,a,g,e,v,y,F,G,H,I,J,K,L,u,O,P,M,U,Q,R,S,V,N){var T=p(null,{idProperty:"id",constructor:function(a){p.safeMixin(this,a)},get:function(a,e){return M.PortalUtil.request(this.portalUrl+"content/items/"+a,e).then(function(a){return new M.PortalItem(c.mixin(a,{portal:this.portal}))})},getIdentity:function(a){return a[this.idProperty]},query:function(a,e){var b=c.isObject(a)?a:{q:a};if(e&&(b=c.mixin(b,{num:e.count,start:(e.start||0)+1}),e.sort&&e.sort.length))var g=
e.sort[0],b=c.mixin(b,{sortField:encodeURIComponent("created"===g.attribute?"uploaded":g.attribute),sortOrder:g.descending?"desc":"asc"});b=this.portal.queryItems(b,!0).then(function(a){a.results.total=a.total;return a.results});return M.PortalResult(b)}});return p([K,L,u,Q,O],{templateString:'\x3cdiv\x3e\x3cp data-dojo-attach-point\x3d"messageNode" class\x3d"hide"\x3e\x3c/p\x3e\x3cdiv style\x3d"width:100%" class\x3d"esriLeadingMargin1"\x3e\x3cselect id\x3d"${id}_categorySelect"class\x3d"categorySelect"\x3e\x3c/select\x3e\x3cdiv id\x3d"${id}_search"class\x3d"esriTrailingMargin2 esriFloatTrailing searchBar"\x3e\x3cinput class\x3d"esriSearchBox dijitTextBox" type\x3d"text" placeholder:\'${i18n.searchFor}\'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"${id}_grid"class\x3d"dgrid-autoheight"\x3e\x3c/div\x3e\x3cbr /\x3e\x3c/div\x3e',
_galleryTemplate:"\x3cdiv style\x3d'opacity:1;' class\x3d'grid-item gallery-view'\x3e${item:_formatItemTitle}${item:_formatThumbnail}\x3c/div\x3e",_popupTemplate:'\x3cdiv class\x3d"esriBrowsePopup quiet-scroll"\x3e\x3cp\x3e{summary}\x3c/p\x3e\x3c/div\x3e',baseClass:"esriBrowseItems",closePopupPerRow:!0,postMixInProperties:function(){this.inherited(arguments);this.i18n={};c.mixin(this.i18n,R.gallery)},postCreate:function(){this.inherited(arguments);this.self?(this._portal=new M.Portal({url:this.portalUrl,
self:this.self}),this._portal.on("load",c.hitch(this,this._fetchData))):(this._portal=new M.Portal(this.portalUrl),this._portal.signIn().then(c.hitch(this,this._fetchData)))},destroy:function(){this.inherited(arguments);this._grid&&this._grid.destroy();this._img_connect.remove();this._img_connect_error.remove();this._queryTimer&&clearTimeout(this._queryTimer);this._grid=this._portal=null},_setPortalUrlAttr:function(a){this.portalUrl=a},_setSelfAttr:function(a){this.self=a},_setPluginAttr:function(a){this.addPlugin(a)},
_setMessageAttr:function(a){h.set(this.messageNode,"innerHTML",a);d.remove(this.messageNode,"hide")},_setCategoriesAttr:function(a){this.categories=a},_setDisabledAttr:function(a){var e=w.findWidgets(this.domNode).concat(w.findWidgets(this._content));q.forEach(e,function(e){e.set("disabled",a)});d[a?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")},_setSortAttr:function(a){this.sortAttribute=a},_setSortDescendingAttr:function(a){this.sortDescending=a},_getSelectionAttr:function(){var a=
this._grid.selection,e;for(e in a)if(a.hasOwnProperty(e))break;return e&&this._grid.row(e).data},_setGalleryTemplateAttr:function(a){N.isDefined(a)&&(this._galleryTemplate=a)},_setFormatThumbnailAttr:function(a){N.isDefined(a)&&"function"===typeof a&&(this._formatThumbnail=a)},_setFormatItemTitleAttr:function(a){N.isDefined(a)&&"function"===typeof a&&(this._formatItemTitle=a)},_setItemsPerPageAttr:function(a){this._set("itemsPerPage",a)},_setPagingLinksAttr:function(a){this._set("pagingLinks",a)},
_setCategoryTypeAttr:function(a){this._set("categoryType",a)},_getQueryAttr:function(){return this._grid&&this._grid.get("query")},_setQueryAttr:function(a){this._grid&&(this._grid.set("query",a),this._categorySelect&&(this._categorySelect.reset(),this.get("selectedCategory")?(this._origQuery=null,this._categorySelect.set("value",this.get("selectedCategory"))):(this._origQuery=null,this._categorySelect.set("value",this.categories[0].value))))},_setSelectedCategoryAttr:function(a){this._set("selectedCategory",
a)},_setClosePopupPerRowAttr:function(a){this._set("closePopupPerRow",a)},_validate:function(){return!!this.get("selection")},_showPopup:function(a){if(!this._isInsideTooltipDialog){this._closePopup();var e=this._grid.row(a),b=n("img",e.element)[0];if((e={summary:e.data.snippet})&&e.summary)this._tooltip=new A({content:c.replace(this._popupTemplate,e),onMouseEnter:c.hitch(this,function(){this._isInsideTooltipDialog=!0}),onMouseLeave:c.hitch(this,function(){this._isInsideTooltipDialog=!1;this._closePopup(a)})}),
z.open({className:"esriBrowsePopup",popup:this._tooltip,around:b,orient:["after-centered","before-centered"]}),this._onCloseConnect=n(".dijitDialogCloseIcon",this._tooltip.domNode).on("click",c.hitch(this,function(a){a.preventDefault();this._closePopup()}))}},_closePopup:function(){this._tooltip&&(this._onCloseConnect.remove(),z.close(this._tooltip),this._tooltip.destroyRecursive(),this._tooltip=this._onCloseConnect=void 0)},_clearQueryTimeout:function(){clearTimeout(this._queryTimer)},_createGrid:function(){var e=
p([B,a,v,S,g]),b=new J(new T({portal:this._portal})),d=this._currentFilter,u=c.hitch(this,function(a){a.snippet=a.snippet||"";var e=I("div");a=r.substitute(this._galleryTemplate,{item:a,i18n:this.i18n},null,this);l.place(a,e);return e});this._grid=new e({store:b,className:"dgrid-autoheight",query:d,selectionMode:"single",pagingLinks:this.get("pagingLinks")||2,rowsPerPage:this.get("itemsPerPage")||6,loadingMessage:"Loading items...",showLoadingMessage:!1,renderRow:u,noDataMessage:this.i18n.noItemsToDisplay,
sort:[{attribute:"title"}]},this.id+"_grid");this._grid.startup();this.categories&&0<this.categories.length&&(this._categorySelect=new P({options:this.categories,sortByLabel:!1,"class":"categorySelect"},this.id+"_categorySelect"),this.own(this._categorySelect.on("change",c.hitch(this,function(a){var e;this._closePopup();this._origQuery||(this._origQuery=this._grid.get("query"));e=this._origQuery;a&&(e+=" AND ("+this.get("categoryType")+":"+a+")");this._fetchItems(e)}))));this.own(this._grid.on(G.enterRow,
c.hitch(this,function(a){this._showPopup(a)})),this._grid.on(G.leaveRow,c.hitch(this,function(a){this.get("closePopupPerRow")&&this._closePopup(a)})),s(n(".dgrid-footer,.dgrid-header",this._grid.domNode),m.leave,c.hitch(this,function(a){this._closePopup(a)})),this._grid.on("dgrid-refresh-complete",c.hitch(this,function(a){this._closePopup(a);n(".dgrid-footer",this.domNode)[this._grid._total<=this._grid.rowsPerPage?"addClass":"removeClass"]("hide")})),this._grid.on("refresh",c.hitch(this,function(){this._img_connect&&
(this._img_connect.remove(),this._img_connect_error.remove(),this._img_connect_error=this._img_connect=null);this._img_connect=n(".grid-item-thumb",this._grid.domNode).on("load",c.hitch(this,function(a){(a=this._grid.row(a))&&a.element&&n(".grid-item",a.element).addClass("fadeIn").style("opacity","1")}));this._img_connect_error=n(".grid-item-thumb",this._grid.domNode).on("error",c.hitch(this,function(a){h.set(a.target,"src",this._portal.staticImagesUrl+"/desktopapp.png")}))})),this._grid.on("dgrid-select,dgrid-deselect",
c.hitch(this,function(){var a={selection:this.get("selection")};this.emit("select-change",a)})),s(t.byId(this.id+"_search"),"keyup",c.hitch(this,function(a){a.preventDefault();this._closePopup();this._clearQueryTimeout();this._queryTimer=setTimeout(c.hitch(this,function(){this._fetchItems(this._currentFilter,h.get(a.target,"value"))}),this.searchKeypressDelay||250)})))},_fetchData:function(){this._user=this._portal.getPortalUser();return this.plugIn.fetchData()},_fetchItems:function(a,e){var b={sort:[{attribute:this.sortAttribute||
"title",descending:this.sortDescending||!1}]},g=e?" title:"+e+"* ":"",d=new D;setTimeout(c.hitch(this,function(){this._currentFilter=a;this._grid?this._grid.set("query",this._currentFilter+g,b):this._createGrid();d.resolve(this._grid)}),60);return d},_formatThumbnail:function(a){return"\x3cimg class\x3d'grid-item-thumb' width\x3d'187px' height\x3d'125px' alt\x3d'' src\x3d'"+(a.thumbnailUrl||this._portal.staticImagesUrl+"/desktopapp.png")+"'\x3e"},_formatItemTitle:function(a){return"\x3ch5\x3e"+(a.title||
a.name||"\x3cNo Title\x3e")+"\x3c/h5\x3e"},clear:function(){this._grid.clearSelection()}})})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/on dojo/query dojo/string dojo/has put-selector/put ../util/misc dojo/i18n!./nls/pagination dojo/_base/sniff xstyle/css!../css/extensions/Pagination.css".split(" "),function(p,c,q,f,d,b,h,r,s,k,x,t){function l(b){b.noDataNode?(k(b.noDataNode,"!"),delete b.noDataNode):
b.cleanup();b.contentNode.innerHTML=""}function m(b){if(b.loadingNode)k(b.loadingNode,"!"),delete b.loadingNode;else if(b._oldPageNodes){for(var c in b._oldPageNodes)b.removeRow(b._oldPageNodes[c]);delete b._oldPageNodes;b._oldPageObserver&&(b._oldPageObserver.cancel(),b._numObservers--,delete b._oldPageObserver)}delete b._isLoading}return c("dgrid.extensions.Pagination",p,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,
i18nPagination:t,showFooter:!0,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);var c=this,d=this.paginationNode=k(this.footerNode,"div.dgrid-pagination"),f=this.paginationStatusNode=k(d,"div.dgrid-status"),h=this.i18nPagination;f.tabIndex=0;this._updatePaginationSizeSelect();this._updateRowsPerPageOption();f.innerHTML=r.substitute(h.status,{start:1,end:1,total:0});d=this.paginationNavigationNode=k(d,"div.dgrid-navigation");this.firstLastArrows&&(f=this.paginationFirstNode=
k(d,"span.dgrid-first.dgrid-page-link","\u00ab"),f.setAttribute("aria-label",h.gotoFirst),f.tabIndex=0);this.previousNextArrows&&(f=this.paginationPreviousNode=k(d,"span.dgrid-previous.dgrid-page-link","\u2039"),f.setAttribute("aria-label",h.gotoPrev),f.tabIndex=0);this.paginationLinksNode=k(d,"span.dgrid-pagination-links");this.previousNextArrows&&(f=this.paginationNextNode=k(d,"span.dgrid-next.dgrid-page-link","\u203a"),f.setAttribute("aria-label",h.gotoNext),f.tabIndex=0);this.firstLastArrows&&
(f=this.paginationLastNode=k(d,"span.dgrid-last.dgrid-page-link","\u00bb"),f.setAttribute("aria-label",h.gotoLast),f.tabIndex=0);this._listeners.push(b(d,".dgrid-page-link:click,.dgrid-page-link:keydown",function(b){if(!("keydown"===b.type&&13!==b.keyCode)){b=this.className;var d,f;c._isLoading||-1<b.indexOf("dgrid-page-disabled")||(d=c._currentPage,f=Math.ceil(c._total/c.rowsPerPage),this===c.paginationPreviousNode?c.gotoPage(d-1):this===c.paginationNextNode?c.gotoPage(d+1):this===c.paginationFirstNode?
c.gotoPage(1):this===c.paginationLastNode?c.gotoPage(f):"dgrid-page-link"===b&&c.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var c=this.pageSizeOptions,d=this.paginationSizeSelect,r;if(c&&c.length){d||(d=this.paginationSizeSelect=k(this.paginationNode,"select.dgrid-page-size[aria-label\x3d"+this.i18nPagination.rowsPerPage+"]"),r=this._paginationSizeChangeHandle=b(d,
"change",f.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(r));for(r=d.options.length=0;r<c.length;r++)k(d,"option",c[r],{value:c[r],selected:this.rowsPerPage===c[r]});this._updateRowsPerPageOption()}else if((!c||!c.length)&&d)k(d,"!"),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove()},_setPageSizeOptions:function(b){this.pageSizeOptions=b&&b.sort(function(b,c){return b-c});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var b=
this.rowsPerPage,c=this.pageSizeOptions,d=this.paginationSizeSelect;d&&(0>q.indexOf(c,b)?this._setPageSizeOptions(c.concat([b])):d.value=""+b)},_setRowsPerPage:function(b){this.rowsPerPage=b;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(){function c(g,d){var n,h;f.pagingTextBox&&g==l&&1<a?(n=k(s,"input.dgrid-page-input[type\x3dtext][value\x3d$]",l),n.setAttribute("aria-label",r.jumpPage),f._pagingTextBoxHandle=b(n,"change",function(){var e=+this.value;!isNaN(e)&&(0<
e&&e<=a)&&f.gotoPage(+this.value)}),e&&"INPUT"===e.tagName&&n.focus()):(h=g===l,n=k(s,"span"+(h?".dgrid-page-disabled":"")+".dgrid-page-link",g+(d?" ":"")),n.setAttribute("aria-label",r.gotoPage),n.tabIndex=h?-1:0,v===g&&(h?g<a?v++:y.focus():n.focus()),h||(y=n))}function d(a,e){k(a,(e?".":"!")+"dgrid-page-disabled");a.tabIndex=e?-1:0}var f=this,r=this.i18nPagination,s=this.paginationLinksNode,l=this._currentPage,m=this.pagingLinks,p=this.paginationNavigationNode,a=Math.ceil(this._total/this.rowsPerPage),
g=this._pagingTextBoxHandle,e=document.activeElement,v,y;!e||!x.contains(this.paginationNavigationNode,e)?e=null:"dgrid-page-link"===e.className&&(v=+e.innerHTML);g&&g.remove();s.innerHTML="";h(".dgrid-first, .dgrid-previous",p).forEach(function(a){d(a,1===l)});h(".dgrid-last, .dgrid-next",p).forEach(function(e){d(e,l>=a)});if(m&&0<a){c(1,!0);p=l-m;for(2<p?k(s,"span.dgrid-page-skip","..."):p=2;p<Math.min(l+m+1,a);p++)c(p,!0);l+m+1<a&&k(s,"span.dgrid-page-skip","...");1<a&&c(a)}else f.pagingTextBox&&
c(l);e&&-1===e.tabIndex&&(m=h("[tabindex\x3d'0']",this.paginationNavigationNode),e===this.paginationPreviousNode||e===this.paginationFirstNode?e=m[0]:m.length&&(e=m[m.length-1]),e&&e.focus())},refresh:function(){var c=this;this.inherited(arguments);if(this.store)return this.gotoPage(1).then(function(d){setTimeout(function(){b.emit(c.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:c,results:d})},0);return d});console.warn("Pagination requires a store to operate.")},_onNotification:function(b){b.length!==
this._rowsOnPage&&this.gotoPage(this._currentPage)},renderArray:function(b,c){var f=this,r=this.inherited(arguments);this._lastCollection=null;c||(this._topLevelRequest&&this._topLevelRequest!==b&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof b.cancel&&(this._topLevelRequest=b),d.when(b,function(){f._topLevelRequest&&delete f._topLevelRequest}));return r},insertRow:function(){var b=this._oldPageNodes,c=this.inherited(arguments);b&&c===b[c.id]&&delete b[c.id];return c},
gotoPage:function(b){var c=this,h=new d;this._trackError(function(){var p=c.rowsPerPage,t=(b-1)*p,q=f.mixin(c.get("queryOptions"),{start:t,count:p}),x,B=c.contentNode,a,g,e;if(c.showLoadingMessage)l(c),a=c.loadingNode=k(B,"div.dgrid-loading"),a.innerHTML=c.loadingMessage;else{c._oldPageNodes=a={};B=B.children;g=0;for(e=B.length;g<e;g++)a[B[g].id]=B[g];c._oldPageObserver=c.observers.pop()}c._isLoading=!0;x=c.store.query(c.query,q);d.when(c.renderArray(x,null,q),function(a){m(c);c.scrollTo({y:0});d.when(x.total,
function(e){e||(c.noDataNode&&(k(c.noDataNode,"!"),delete c.noDataNode),c.noDataNode=k(c.contentNode,"div.dgrid-no-data"),c.noDataNode.innerHTML=c.noDataMessage);c.paginationStatusNode.innerHTML=r.substitute(c.i18nPagination.status,{start:Math.min(t+1,e),end:Math.min(e,t+p),total:e});c._total=e;c._currentPage=b;c._rowsOnPage=a.length;c._updateNavigation()});(7>s("ie")||s("ie")&&s("quirks"))&&c.resize();h.resolve(x)},function(a){m(c);h.reject(a)});return h.promise})||h.reject();return h.promise}})})},
"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(p,c,q){return p("dgrid.extensions.DijitRegistry",null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){q.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);var c=q.getEnclosingWidget(this.domNode.parentNode);c&&c.isLayoutContainer&&this._resizeHandle.remove()}},
destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);q.remove(this.id)},getChildren:function(){return[]},isLeftToRight:function(){return!this.isRTL},resize:function(f){f&&c.setMarginBox(this.domNode,f);this.inherited(arguments)},_set:function(c,d){this[c]=d},watch:function(){},getParent:function(){return q.getEnclosingWidget(this.domNode.parentNode)}})})},"dgrid/selector":function(){define("dojo/_base/kernel dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),
function(p,c,q,f,d,b,h){q.getObject("dgrid.selector",!0);return dgrid.selector=function(f,s){function k(b){return!n.allowSelect(n.row(b))}function q(b){return function(c){var d=c.rows,h=d.length;c="false";var k;for(k=0;k<h;k++){var a=n.cell(d[k],f.id).element;if(a&&(a=(a.contents||a).input)&&!a.disabled)a.checked=b,a.setAttribute("aria-checked",b)}if("checkbox"==C.type){d=n.selection;h=!1;for(k in d)if(d[k]!=n.allSelected){h=!0;break}C.indeterminate=h;C.checked=n.allSelected;h?c="mixed":n.allSelected&&
(c="true");C.setAttribute("aria-checked",c)}}}function t(c){if("click"==c.type||32==c.keyCode||!b("opera")&&13==c.keyCode||0===c.keyCode){var d=n.row(c);n._selectionTriggerEvent=c;if(d){if(n.allowSelect(d)){var f=n._lastSelected&&n.row(n._lastSelected);if("radio"==s){if(!f||f.id!=d.id)n.clearSelection(),n.select(d,null,!0),n._lastSelected=d.element}else d&&(c.shiftKey?q(!0)({rows:[d]}):f=null,f=c.shiftKey?f:null,n.select(f||d,d,f?void 0:null),n._lastSelected=d.element)}}else h(this,(n.allSelected?
"!":".")+"dgrid-select-all"),n[n.allSelected?"clearSelection":"selectAll"]();n._selectionTriggerEvent=null}}function l(){n._hasSelectorInputListener=!0;m.push(n.on(".dgrid-selector:click,.dgrid-selector:keydown",t));var b=n._handleSelect;n._handleSelect=function(c){this.cell(c).column!=f&&b.apply(this,arguments)};if("function"==typeof f.disabled){var c=n.allowSelect,d=f.disabled;n.allowSelect=function(b){var h=c.call(this,b);return d===k?h:h&&!d.call(f,b.data)}}f.disabled=k;m.push(n.on("dgrid-select",
q(!0)));m.push(n.on("dgrid-deselect",q(!1)))}var m=[],n,C;f||(f={});f.type&&(f.selectorType=f.type,p.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4"));f.selectorType=s=s||f.selectorType||"checkbox";f.sortable=!1;var w="function"==typeof s?s:function(b,c,d){var k=c.parentNode,m;n._hasSelectorInputListener||l();m=f.disabled;h(k&&k.contents?k:c,".dgrid-selector");c=c.input||(c.input=h(c,"input[type\x3d"+s+"]",{tabIndex:isNaN(f.tabIndex)?-1:f.tabIndex,disabled:m&&("function"==
typeof m?m.call(f,d):m),checked:b}));c.setAttribute("aria-checked",!!b);return c};d.after(f,"init",function(){n=f.grid});d.after(f,"destroy",function(){c.forEach(m,function(b){b.remove()});n._hasSelectorInputListener=!1});f.renderCell=function(b,c,d,f,h){c=(c=b&&n.row(b))&&n.selection[c.id];w(c,d,b)};f.renderHeaderCell=function(b){var c="label"in f?f.label:f.field||"";"radio"==s||!n.allowSelectAll?(b.appendChild(document.createTextNode(c)),n._hasSelectorInputListener||l()):w(!1,b,{});C=b.lastChild};
return f}})},"dgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/_base/lang dojo/has put-selector/put ./util/misc dojo/_base/Deferred dojo/_base/sniff".split(" "),function(p,c,q,f,d,b,h,r){function s(a){a.preventDefault()}var k={checkbox:1,radio:1,button:1},x=/\bdgrid-cell\b/,t=/\bdgrid-row\b/,l=p("dgrid.Keyboard",null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=f.mixin({},l.defaultKeyMap));
this.headerKeyMap||(this.headerKeyMap=f.mixin({},l.defaultHeaderKeyMap))},postCreate:function(){function a(e){var b=e.target;return b.type&&(!k[b.type]||32==e.keyCode)}function b(d){function f(){g._focusedHeaderNode&&(g._focusedHeaderNode.tabIndex=-1);if(g.showHeader){if(v)for(var a=0,e,b=g.headerNode.getElementsByTagName("th");e=b[a];++a){if(k.test(e.className)){g._focusedHeaderNode=n=e;break}}else g._focusedHeaderNode=n=g.headerNode;n&&(n.tabIndex=g.tabIndex)}}var v=g.cellNavigation,k=v?x:t,m=d===
g.headerNode,n=d;m?(f(),c.after(g,"renderHeader",f,!0)):c.after(g,"renderArray",function(a){return r.when(a,function(a){var e=g._focusedNode||n;if(k.test(e.className)&&h.contains(d,e))return a;for(var b=0,c=d.getElementsByTagName("*"),f;f=c[b];++b)if(k.test(f.className)){e=g._focusedNode=f;break}e.tabIndex=g.tabIndex;return a})});g._listeners.push(q(d,"mousedown",function(b){a(b)||g._focusOnNode(b.target,m,b)}));g._listeners.push(q(d,"keydown",function(b){if(!b.metaKey&&!b.altKey){var c=g[m?"headerKeyMap":
"keyMap"][b.keyCode];c&&!a(b)&&c.call(g,b)}}))}this.inherited(arguments);var g=this;this.tabableHeader&&(b(this.headerNode),q(this.headerNode,"dgrid-cellfocusin",function(){g.scrollTo({x:this.scrollLeft})}));b(this.contentNode);this._debouncedEnsureRowScroll=h.debounce(this._ensureRowScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var b=this,c=document.activeElement===this._focusedNode,g=this[this.cellNavigation?"cell":"row"](this._focusedNode),d=g.row||
g,f;a=a.element||a;if(a===d.element){f=this.down(d,!0);if(!f||f.element===a)f=this.up(d,!0);this._removedFocus={active:c,rowId:d.id,columnId:g.column&&g.column.id,siblingId:!f||f.element===a?void 0:f.id};setTimeout(function(){b._removedFocus&&b._restoreFocus(d.id)},0);this._focusedNode=null}this.inherited(arguments)},insertRow:function(a){var b=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(b);return b},_restoreFocus:function(a){var c=this._removedFocus,
g;if((a=(a=a&&this.row(a))&&a.element&&a.id===c.rowId?a:"undefined"!==typeof c.siblingId&&this.row(c.siblingId))&&a.element){if(!a.element.parentNode.parentNode){c.wait=!0;return}"undefined"!==typeof c.columnId&&(g=this.cell(a,c.columnId))&&g.element&&(a=g);c.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(b(a.element,".dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},addKeyHandler:function(a,b,g){return c.after(this[g?"headerKeyMap":
"keyMap"],a,b,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_focusOnNode:function(a,c,g){var h="_focused"+(c?"Header":"")+"Node",r=this[h],k=this.cellNavigation?"cell":"row",m=this[k](a),n,l,s,u,p;if(a=m&&m.element){if(this.cellNavigation){n=a.getElementsByTagName("input");p=0;for(s=n.length;p<s;p++)if(l=
n[p],(-1!=l.tabIndex||"_dgridLastValue"in l)&&!l.disabled){8>d("ie")&&(l.style.position="relative");l.focus();8>d("ie")&&(l.style.position="");u=!0;break}}null!==g&&(g=f.mixin({grid:this},g),g.type&&(g.parentType=g.type),g.bubbles||(g.bubbles=!0));r&&(b(r,"!dgrid-focus[!tabIndex]"),8>d("ie")&&(r.style.position=""),g&&(g[k]=this[k](r),q.emit(r,"dgrid-cellfocusout",g)));r=this[h]=a;g&&(g[k]=m);h=this.cellNavigation?x:t;!u&&h.test(a.className)&&(8>d("ie")&&(a.style.position="relative"),a.tabIndex=this.tabIndex,
a.focus());b(a,".dgrid-focus");g&&q.emit(r,"dgrid-cellfocusin",g);this.cellNavigation&&((this.columnSets||1<this.subRows.length)&&!c)&&this._debouncedEnsureRowScroll(m.row.element)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){(a=a||this._focusedNode)?this._focusOnNode(a,!1):this.contentNode.focus()}}),m=l.moveFocusVertical=function(a,b){var c=this.cellNavigation,g=this[c?"cell":"row"](a),g=c&&g.column.id,d=this.down(this._focusedNode,b,!0);c&&(d=this.cell(d,
g));this._focusOnNode(d,!1,a);a.preventDefault()};p=l.moveFocusUp=function(a){m.call(this,a,-1)};var n=l.moveFocusDown=function(a){m.call(this,a,1)},C=l.moveFocusPageUp=function(a){m.call(this,a,-this.pageSkip)},w=l.moveFocusPageDown=function(a){m.call(this,a,this.pageSkip)},A=l.moveFocusHorizontal=function(a,b){if(this.cellNavigation){var c=!this.row(a);this._focusOnNode(this.right(this["_focused"+(c?"Header":"")+"Node"],b),c,a);a.preventDefault()}},z=l.moveFocusLeft=function(a){A.call(this,a,-1)},
E=l.moveFocusRight=function(a){A.call(this,a,1)},D=l.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a));a.preventDefault()},B=l.moveHeaderFocusHome=function(a){D.call(this,a,!0)},a=l.moveFocusEnd=function(a,b){var g=this,h=this.cellNavigation,k=this.contentNode,m=k.scrollTop+(b?0:k.scrollHeight),k=k[b?"firstChild":"lastChild"],n=-1<k.className.indexOf("dgrid-preload"),l=n?k[(b?"next":"previous")+"Sibling"]:
k,s=l.offsetTop+(b?0:l.offsetHeight),p;if(n){for(;l&&0>l.className.indexOf("dgrid-row");)l=l[(b?"next":"previous")+"Sibling"];if(!l)return}!n||1>k.offsetHeight?(h&&(l=this.cell(l,this.cell(a).column.id)),this._focusOnNode(l,!1,a)):(d("dom-addeventlistener")||(a=f.mixin({},a)),p=c.after(this,"renderArray",function(c){p.remove();return r.when(c,function(c){c=c[b?0:c.length-1];h&&(c=g.cell(c,g.cell(a).column.id));g._focusOnNode(c,!1,a)})}));m===s&&a.preventDefault()},g=l.moveFocusHome=function(b){a.call(this,
b,!0)};l.defaultKeyMap={32:s,33:C,34:w,35:a,36:g,37:z,38:p,39:E,40:n};l.defaultHeaderKeyMap={32:s,35:D,36:B,37:z,39:E};return l})},"dgrid/util/mouse":function(){define(["dojo/_base/lang","dojo/on","dojo/dom","dojo/query"],function(p,c,q){function f(b,d){return function(f,s){return c(f,b+":"+d,function(b){if(!q.isDescendant(b.relatedTarget,this))return s.call(this,b)})}}var d={enterRow:f(".dgrid-content .dgrid-row","mouseover"),enterCell:f(".dgrid-content .dgrid-cell","mouseover"),enterHeaderCell:f(".dgrid-header .dgrid-cell",
"mouseover"),leaveRow:f(".dgrid-content .dgrid-row","mouseout"),leaveCell:f(".dgrid-content .dgrid-cell","mouseout"),leaveHeaderCell:f(".dgrid-header .dgrid-cell","mouseout"),createDelegatingHandler:f};p.getObject("dgrid.util.mouse",!0);p.mixin(dgrid.util.mouse,d);return d})},"dgrid/util/touch":function(){define(["dojo/on","dojo/query"],function(p,c){function q(c,b,h,r){if(!(1<h.targetTouches.length)){var s=h.changedTouches[0],k=s.screenX,q=s.screenY;r&&h.preventDefault();var t=p(c,"touchend",function(c){var d=
c.changedTouches[0];c.targetTouches.length||(Math.abs(d.screenX-k)<f.tapRadius&&Math.abs(d.screenY-q)<f.tapRadius&&(r&&c.preventDefault(),b.call(this,c)),t.remove())})}}var f={tapRadius:10,dbltapTime:250,selector:function(d,b,f){return function(r,s){var k=b.bubble;k?b=k:!1!==f&&(f=!0);return p(r,b,function(b){var k=b.target;3==k.nodeType&&(k=k.parentNode);for(;!c.matches(k,d,r);)if(k==r||!f||!(k=k.parentNode))return;return s.call(k,b)})}},countCurrentTouches:function(c,b){if(!("touches"in c))return-1;
var f,r,s;for(r=f=0;s=c.touches[f];++f)b.contains(s.target)&&++r;return r},tap:function(c,b){return p(c,"touchstart",function(f){q(c,b,f)})},dbltap:function(c,b){var h,r;return p(c,"touchstart",function(s){h?q(c,function(c){if(h){var d=c.changedTouches[0];Math.abs(d.screenX-h.screenX)<f.tapRadius&&Math.abs(d.screenY-h.screenY)<f.tapRadius&&(r&&clearTimeout(r),h=r=null,b.call(this,c))}},s,!0):q(c,function(b){h=b.changedTouches[0];r=setTimeout(function(){h=r=null},f.dbltapTime)},s)})}};return f})},
"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(p,c,q,f){p=function(d){function b(b,c){var f=d[b];f&&(d[b]=function(r){var h;"put"===b&&(h=d.getIdentity(r));if(k)return f.apply(this,arguments);k=!0;try{var s=f.apply(this,arguments);q(s,function(b){c("object"==typeof b&&b||r,h)});return s}finally{k=!1}})}var h=[],r=0;d=c.delegate(d);d.notify=function(b,c){r++;for(var d=h.slice(),f=0,k=d.length;f<k;f++)d[f](b,c)};var s=d.query;d.query=
function(b,k){k=k||{};var l=s.apply(this,arguments);if(l&&l.forEach){var m=c.mixin({},k);delete m.start;delete m.count;var n=d.queryEngine&&d.queryEngine(b,m),p=r,w=[],A;l.observe=function(b,c){1==w.push(b)&&h.push(A=function(b,a){q(l,function(g){var e=g.length!=k.count,h,s;if(++p!=r)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var l,m=-1,q=-1;if(void 0!==a){h=0;for(s=g.length;h<s;h++){var x=g[h];if(d.getIdentity(x)==a){l=x;m=h;(n||!b)&&g.splice(h,
1);break}}}if(n){if(b&&(n.matches?n.matches(b):n([b]).length))h=-1<m?m:g.length,g.splice(h,0,b),q=f.indexOf(n(g),b),g.splice(h,1),k.start&&0==q||!e&&q==g.length?q=-1:g.splice(q,0,b)}else b&&(void 0!==a?q=m:k.start||(q=d.defaultIndex||0,g.splice(q,0,b)));if((-1<m||-1<q)&&(c||!n||m!=q)){e=w.slice();for(h=0;g=e[h];h++)g(b||l,m,q)}})});var s={};s.remove=s.cancel=function(){var c=f.indexOf(w,b);-1<c&&(w.splice(c,1),w.length||h.splice(f.indexOf(h,A),1))};return s}}return l};var k;b("put",function(b,c){d.notify(b,
c)});b("add",function(b){d.notify(b)});b("remove",function(b){d.notify(void 0,b)});return d};c.setObject("dojo.store.Observable",p);return p})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../Evented ../IdentityManager".split(" "),function(p,c,q,f,d,b,h,r,s,k,x){var t={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},l=function(a){function b(c){a[c]||
(a[c]=function(){var b=arguments;return f.when(a,function(a){Array.prototype.unshift.call(b,a.results||a);return l(d[c].apply(d,b))})})}if(!a)return a;a.then&&(a=c.delegate(a));a.total||(a.total=f.when(a,function(a){return s.isDefined(a.total)?a.total:a.length||0}));b("forEach");b("filter");b("map");b("some");b("every");return a},m={useSSL:function(a,b){var c=t&&t.self||{};if(c&&!c.isPortal)return-1!==a.indexOf("https:")||c.allSSL?b.replace("http:","https:"):b;var d=m.getLocation(b);if(-1<c.portalHostname.toLowerCase().indexOf(d.hostname.toLowerCase())&&
d.port&&"80"!==d.port&&"443"!==d.port){var f=d.pathname,f=0===f.indexOf("/")?f:"/"+f;return c.allSSL||-1<a.indexOf("https:")?"https://"+d.hostname+(c.httpsPort&&"443"!==c.httpsPort?":"+c.httpsPort:"")+f+d.search:"http://"+d.hostname+(c.httpPort&&"80"!==c.httpPort?":"+c.httpPort:"")+f+d.search}return-1!==a.indexOf("https:")||c.allSSL?b.replace("http:","https:"):b},formatUrl:function(a){var b=t.currentToken;return-1!==a.indexOf("null")?null:m.useSSL(window.location.protocol,b?a+(-1!==a.indexOf("?")?
"\x26":"?")+("token\x3d"+b):a)},getLocation:function(a){var b=document.createElement("a");b.href=a;return{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}},resultsToTypedArray:function(a,b,e){e=e?e.listings||e.notifications||e.userInvitations||e.tags||e.items||e.groups||e.comments||e.provisions||e.results||e:[];return d.map(e,function(e){e=c.mixin(e,b||{});return a?new a(e):e})},clearFieldsFromObject:function(a,b){var e,d=a.length;if(c.isArray(a))for(e=
0;e<d;e++)delete b[a[e]];else for(e in a)delete b[e];return b},requestToTypedArray:function(a,b,e,d,f){return l(m.request(a,b,e).then(c.partial(m.resultsToTypedArray,d,f)))},request:function(a,b,e){var d;b&&b.portal&&delete b.portal;b&&b.form&&(d=b.form,delete b.form);b=c.mixin(c.mixin({},b||{}),t.requestParams);e=c.mixin(e||{},t.options);return k({url:m.useSSL(window.location.protocol,a.url||a),content:b,callbackParamName:"callback",timeout:e&&e.timeout||0,form:d},e)},formatQueryParams:function(a,
b,e){a=c.mixin(c.mixin({},a),c.isString(b)?{q:b}:b||{});a.q=!e&&t.extraQuery?"("+a.q+")"+t.extraQuery:a.q;return a}},n=p([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(a){c.mixin(this,a);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),C=p([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(a){c.mixin(this,a);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),w=p([],
{declaredClass:"esri.arcgis.PortalItem",constructor:function(a){c.mixin(this,a);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("content","content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")):null;this.itemDataUrl=m.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=m.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();
this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var a=this.type;return{source:-1<d.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===a?a:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},
addComment:function(a){var b=c.isString(a)?{comment:a}:a;return m.request(this.itemUrl+"/addComment",b,{usePost:!0}).then(c.hitch(this,function(a){return new n(c.mixin(b,{id:a.commentId,item:this}))}))},updateComment:function(a){if(a&&a.url&&a.comment)return m.request(a.url+"/update",{comment:a.comment},{usePost:!0}).then(function(b){a.id=b.commentId;return a});throw Error();},getComments:function(){return m.requestToTypedArray(this.itemUrl+"/comments",null,null,n,{item:this})},deleteComment:function(a){if(a&&
a.url)return m.request(a.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(a){var b=c.isObject(a)?a:{rating:parseFloat(a)};return m.request(this.itemUrl+"/addRating",b,{usePost:!0}).then(c.hitch(this,function(a){return new C(c.mixin(b,{id:a.ratingId,item:this}))}))},getRating:function(){return m.request(this.itemUrl+"/rating").then(c.hitch(this,function(a){return new C(c.mixin(a,{item:this}))}))},deleteRating:function(){return m.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},
_getDisplayName:function(){var a=this.type,b=this.typeKeywords||[],c=a;"Feature Service"===a||"Feature Collection"===a?c=-1<d.indexOf(b,"Table")?"Table":"Feature Layer":"Image Service"===a?c=-1<d.indexOf(b,"Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===a?c="Scene Layer":"Stream Service"===a?c="Feature Layer":"Microsoft Powerpoint"===a?c="Microsoft PowerPoint":"GeoJson"===a?this.type=c="GeoJSON":"Globe Service"===a?c="Globe Layer":"Map Service"===a&&(c=-1<d.indexOf(b,"Hosted Service")||
-1<d.indexOf(b,"Tiled")?"Tile Layer":"Map Image Layer");return c},_getIconUrl:function(){var a=this.type&&this.type.toLowerCase()||"",b=this.typeKeywords||[],c=!1,f=!1;0<a.indexOf("service")||"feature collection"===a||"kml"===a||"wms"===a||"wmts"===a?(c=-1<d.indexOf(b,"Hosted Service"),a="feature service"===a||"feature collection"===a||"kml"===a?(f=-1<d.indexOf(b,"Table"))?"table":c?"featureshosted":"features":"map service"===a||"wms"===a||"wmts"===a?c||-1<d.indexOf(b,"Tiled")?"maptiles":"mapimages":
"scene service"===a?"sceneweblayer":"image service"===a?-1<d.indexOf(b,"Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===a?"streamlayer":"layers"):a="web map"===a||"cityengine web scene"===a?"maps":"web scene"===a?"webscene":"web mapping application"===a||"mobile application"===a||"application"===a||"operation view"===a||"desktop application"===a?"apps":"map document"===a||"map package"===a||"published map"===a||"scene document"===a||"globe document"===a||"basemap package"===a||
"mobile basemap package"===a||"mobile map package"===a||"project package"===a||"project template"===a||"pro map"===a||"layout"===a||"layer"===a&&-1<d.indexOf(b,"ArcGIS Pro")||"explorer map"===a&&d.indexOf(b,"Explorer Document")?"mapsgray":"service definition"===a||"csv"===a||"shapefile"===a||"cad drawing"===a||"geojson"===a?"datafiles":"explorer add in"===a||"desktop add in"===a||"windows viewer add in"===a||"windows viewer configuration"===a?"appsgray":"rule package"===a||"file geodatabase"===a||
"csv collection"===a||"kml collection"===a||"windows mobile package"===a||"map template"===a||"desktop application template"===a||"arcpad package"===a||"code sample"===a||"document link"===a||"tile package"===a||"scene package"===a||"operations dashboard add in"===a||"rules package"===a||"image"===a||"workflow manager package"===a||"desktop style"===a||"explorer map"===a&&-1<d.indexOf(b,"Explorer Mapping Application")||-1<d.indexOf(b,"Document")?"datafilesgray":"geocoding service"===a||"network analysis service"===
a||"geoprocessing service"===a||"geodata service"===a||"geometry service"===a||"geoprocessing package"===a||"locator package"===a||"geoprocessing sample"===a||"workflow manager service"===a||"raster function template"===a?"toolsgray":"layer"===a||"layer package"===a||"explorer layer"===a?"layersgray":"task file"===a?"taskfile":"maps";return a?h.toUrl("../css/images/item_type_icons/"+a+"16.png"):null},_getIsPremiumContent:function(){var a=this.typeKeywords,b=!1;if(-1<d.indexOf(a,"Service")&&(-1<d.indexOf(a,
"Requires Subscription")||-1<d.indexOf(this.typeKeywords,"Requires Credits")))b=!0;return b},_getPremiumIconUrl:function(){var a=this.typeKeywords,b;this.isPremiumContent&&(b=-1<d.indexOf(a,"Requires Credits")?"premiumcredits":"premiumitem");return b?h.toUrl("../css/images/item_type_icons/"+b+"16.png"):null}}),A=p([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(a){c.mixin(this,a);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":
"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?m.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?m.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?m.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||
{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var b in this.listingProperties)this[b]&&(this.listingProperties[b]=this[b]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=d.map(this.screenshots,c.hitch(this,function(a){return m.formatUrl(this.url+"/info/"+a)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?m.formatUrl(this.portal.portalUrl+
"/accounts/self/resources/"+this.vendor.thumbnail):m.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return m.requestToTypedArray(this.commentsUrl,null,null,n,{item:this})},getVendor:function(){return this.vendor}}),z=p([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(a){c.mixin(this,a);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?
new Date(this.endDate):null;this.listing=a.listing?new A(c.mixin(a.listing,{portal:this.portal})):null}}),E=p([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(a){c.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=m.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return m.request(this.url+"/users")},
queryItems:function(a,b){a=m.formatQueryParams({},a,b);a.q="group:"+this.id+(a.q?" "+a.q:"");return this.portal.queryItems(a)}}),D=p([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(a){c.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return m.requestToTypedArray(this.url,null,null,w,{portal:this.portal,folderId:this.id})}}),B=p([],{declaredClass:"esri.arcgis.PortalUser",
constructor:function(a){c.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=m.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return l(m.request(this.url).then(c.hitch(this,function(a){return m.resultsToTypedArray(E,{portal:this.portal},
a.groups)})))},getNotifications:function(){return m.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return m.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return m.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return l(this.getContent().then(function(a){return a.folders}))},getItems:function(a){return l(this.getContent(a).then(function(a){return a.items}))},
getItem:function(a){return m.request(this.portal.portalUrl+"content/items/"+a).then(c.hitch(this,function(a){return new w(c.mixin(a,{portal:this.portal}))}))},getContent:function(a){var b=this.url.replace("community","content")+(a?"/"+a:"");return m.request(b).then(c.hitch(this,function(b){b.folders=m.resultsToTypedArray(D,{portal:this.portal},b.folders);b.items=m.resultsToTypedArray(w,{portal:this.portal,folderId:a},b.items);return b}))}});return{Portal:p([x],{declaredClass:"esri.arcgis.Portal",
onLoad:function(){},onError:function(){},constructor:function(a){a=c.isObject(a)?a:{url:a};this.registerConnectEvents();t={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};a.self?(t.self=a.self,c.mixin(this,{url:a.url||window.location.protocol+"//"+(a.self.urlKey?a.self.urlKey+"."+a.self.customBaseUrl:a.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",a=a.self.user?this.signIn():this.init(this.url)):(a.url&&c.mixin(this,{url:a.url}),
a=this.init(this.url));a.then(c.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(a,b){a=(a||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==a.indexOf("/sharing")?a+"/":a+"/sharing/rest/";return this._getSelf(this.portalUrl).then(c.hitch(this,function(a){t.self=c.mixin({},a);if((a=a.user)&&b)t.currentToken=b&&b.token,t.loggedInUser=new B(c.mixin(a,{portal:this,credential:b}));t.self.id&&!1===t.self.canSearchPublic&&(t.extraQuery=" AND orgid:"+t.self.id);c.mixin(this,
t.self);this.thumbnailUrl=m.formatUrl(this.portalUrl+"accounts/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length||!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),c.hitch(this,function(a){this.onError(a);throw a;}))},signIn:function(){var a=new f,b=c.hitch(this,function(){this._onSignIn().then(c.hitch(this,function(){a.resolve(t.loggedInUser)}),c.hitch(this,function(b){a.reject(b)}))});
if(!t||!t.self)this.on("load",c.hitch(this,function(){b()}));else t&&t.loggedInUser?setTimeout(function(){a.resolve(t.loggedInUser)},0):b();return a},signOut:function(){t.loggedInUser.credential&&t.loggedInUser.credential.destroy();t.loggedInUser=null;t.options.disableIdentityLookup=!0;m.clearFieldsFromObject(t.self,this);t.self=null;return this.init(this.url)},getPortalUser:function(){return t.loggedInUser},addResource:function(a,b){return m.request(this.portalUrl+"portals/self/addResource",{key:a,
text:b},{usePost:!0})},update:function(a){return m.request(this.portalUrl+"portals/self/update",a,{usePost:!0})},queryGroups:function(a,b){return this._queryPortal(this.portalUrl+"community/groups",m.formatQueryParams({},a,b),E)},queryItems:function(a,b){return this._queryPortal(this.portalUrl+"search",m.formatQueryParams({},a,b),w)},queryListings:function(a){a=m.formatQueryParams({},a,!0);var b="";a.q&&-1<a.q.toLowerCase().indexOf("mylistings:true")?(a.q=a.q.toLowerCase().replace("mylistings:true",
""),b="?mylistings\x3dtrue"):a.q||(a.q='""');return this._queryPortal(this.portalUrl+"content/listings"+b,a,A)},queryCustomerList:function(a,b){var c=m.formatQueryParams({},a,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",c)},getProvisions:function(){return this.getCustomers().then(c.hitch(this,function(a){return a.purchases}))},getInterests:function(){return this.getCustomers().then(c.hitch(this,function(a){return a.interests}))},getTrials:function(){return this.getCustomers().then(c.hitch(this,
function(a){return a.trials}))},getCustomers:function(a){return m.request(this.portalUrl+"portals/self/customers",{status:a||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(a){return a.purchases})},getMyInterests:function(){return this.getPurchases().then(function(a){return a.interests})},getPurchases:function(){return m.request(this.portalUrl+"portals/self/purchases").then(c.hitch(this,function(a){a.interests=d.map(a.interests,function(a){return c.mixin(a.provision,{listing:a.listing})});
a.purchases=d.map(a.purchases,function(a){return c.mixin(a.provision,{listing:a.listing})});a.trials=d.map(a.trials,function(a){return c.mixin(a.provision,{listing:a.listing})});a.interests=m.resultsToTypedArray(z,{portal:this},a.interests);a.trials=m.resultsToTypedArray(z,{portal:this},a.trials);a.purchases=m.resultsToTypedArray(z,{portal:this},a.purchases);return a}))},queryUsers:function(a,b){return this._queryPortal(this.portalUrl+"community/users",m.formatQueryParams({sortField:"username"},a,
b),B)},_onSignIn:function(){t.options.disableIdentityLookup=!1;if(!t.self||!t.self.user)t.self=null;return r.id.getCredential(this.portalUrl).then(c.hitch(this,"init",this.url)).then(function(){return t.loggedInUser},c.hitch(this,function(a){t.options.disableIdentityLookup=!0;this.onError(a);throw a;}))},_getSelf:function(a){var b;a=a+"accounts/self?culture\x3d"+q.locale;t.self?(b=new f,setTimeout(function(){b.resolve(t.self)},0)):b=m.request(a);return b},_queryPortal:function(a,b,d){var k=c.mixin({num:10,
start:0,sortField:"title",sortOrder:"asc"},b),h=["start","query","num","nextStart"];a=m.request(a,k).then(c.hitch(this,function(a){a.results=m.resultsToTypedArray(d,{portal:this},a);a.queryParams=c.mixin({},k);a.nextQueryParams=c.mixin(k,{start:a.nextStart});return m.clearFieldsFromObject(h,a)}));a=c.delegate(a);a.queryParams=c.mixin({},k);a.nextQueryParams=f.when(a,function(a){return a.nextQueryParams});return l(a)}}),PortalFolder:D,PortalGroup:E,PortalItem:w,PortalComment:n,PortalRating:C,PortalUtil:m,
PortalResult:l,PortalListing:A}})},"esri/dijit/_RefreshMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/has ../kernel".split(" "),function(p,c,q,f,d,b){function h(b){"object"!==typeof b&&(b=Error(b));b.grid=this;f.emit(this.domNode,"dgrid-error",{grid:this,error:b,cancelable:!0,bubbles:!0})&&console.error(b)}return p(null,{_trackError:function(b){var d;"string"===typeof b&&(b=c.hitch(this,b));try{d=b()}catch(k){h.call(this,k)}return q.when(d,c.hitch(this,
function(){f.emit(this.domNode,"refresh",{cancelable:!0,bubbles:!0})}),c.hitch(this,h))}})})},"esri/dijit/analysis/PluginAnalysisLayers":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/has ../../kernel".split(" "),function(p,c,q,f,d,b){var h=p(null,{constructor:function(b){c.mixin(this,b)},fetchData:function(){this._portal=this.parent._portal;var b;return this._fetchGroups().then(c.hitch(this,function(c){b=q.map(c||[],function(b){if(b)return'group:"'+b.id+
'"'}).join(" OR ");return this._fetchGroupItems(b)}))},_fetchGroup:function(b,d){this._groups=this._groups||[];return this._groups[b]||this._portal.queryGroups(d,!0).then(c.hitch(this,function(c){0<c.total&&c.results&&(this._groups[b]=c.results);return this._groups[b]||[]}))},_fetchGroupItems:function(b,c){var d='(type:"Map Service" OR type:"Feature Service") typekeywords:"Analysis Ready" ('+b+")"+(c?" "+c:"");this._portal.user.demographics||(d+=' -typekeywords:"Requires Credits"');return this.parent._fetchItems(d)},
_fetchGroups:function(){return this._fetchEsriAnalysisLayers()},_fetchEsriAnalysisLayers:function(){var b;this._portal&&this._portal.livingAtlasGroupQuery&&(b=this._portal.livingAtlasGroupQuery.replace('title:"Featured Maps And Apps"','title:"Living Atlas Analysis Layers"'));return this._fetchGroup("esriAnalysisLayers",{q:b,num:100,start:0}).then(c.hitch(this,function(b){return b}))}});c.mixin(h,{add:function(b,c){if(!b.plugIn){var d=c||{};d.parent=b;b.plugIn=new h(d)}},remove:function(b){b.plugIn&&
(b.plugIn.destroy(),delete b.plugIn)}});return h})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),function(p,c,q,f,d,b,h,r,s,k,x,t,l,
m,n,C,w,A,z,E,D,B,a){p=p(t,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(a){this._jobUpdateHandler=c.hitch(this,this._jobUpdateHandler);this._getJobStatus=c.hitch(this,this._getJobStatus);this._getResultDataHandler=c.hitch(this,
this._getResultDataHandler);this._getResultImageHandler=c.hitch(this,this._getResultImageHandler);this._executeHandler=c.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(a){this.updateDelay=a},setProcessSpatialReference:function(a){this.processSpatialReference=a},setOutputSpatialReference:function(a){this._setOutSR(a)},setOutSpatialReference:function(a){this._setOutSR(a)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(a){this.outSpatialReference=this.outputSpatialReference=a},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(a,b,f){for(var h in a){var k=a[h];c.isArray(k)?a[h]=d.toJson(q.map(k,function(a){return this._gpEncode({item:a},!0).item},this)):k instanceof Date&&(a[h]=k.getTime())}return this._encode(a,b,f)},_decode:function(b){var d=b.dataType,
f=new E(b);if(-1!==q.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],d))return f;if("GPLinearUnit"===d)f.value=new C(f.value);else if("GPFeatureRecordSetLayer"===d||"GPRecordSet"===d)f.value=new l(f.value);else if("GPDataFile"===d)f.value=new w(f.value);else if("GPDate"===d)b=f.value,c.isString(b)?f.value=new z({date:b}):f.value=new Date(b);else if("GPRasterData"===d||"GPRasterDataLayer"===d)b=b.value.mapImage,f.value=b?new a(b):new A(f.value);else if(-1!==d.indexOf("GPMultiValue:")){var h=d.split(":")[1];
b=f.value;f.value=q.map(b,function(a){return this._decode({paramName:"_name",dataType:h,value:a}).value},this)}else console.log(this.declaredClass+" : GP Data type not handled. : "+f.dataType),f=null;return f},submitJob:function(a,b,f,h,k){var m=this._getOutSR(),l=k.assembly;a=this._gpEncode(c.mixin({},this._url.query,{f:"json","env:outSR":m?m.wkid||d.toJson(m.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||d.toJson(this.processSpatialReference.toJson()):
null},a),null,l&&l[0]);var n=this._jobUpdateHandler,p=this._errorHandler;return s({url:this._url.path+"/submitJob",content:a,callbackParamName:"callback",load:function(a,c){n(a,c,!1,b,f,k.dfd)},error:function(a){p(a,h,k.dfd)}})},_jobUpdateHandler:function(a,b,c,d,f,h){var k=a.jobId;b=new m(a);this._successHandler([b],"onStatusUpdate",f,c&&h);if(!c)switch(clearTimeout(this._updateTimers[k]),this._updateTimers[k]=null,h&&h.progress(b),a.jobStatus){case m.STATUS_SUBMITTED:case m.STATUS_EXECUTING:case m.STATUS_WAITING:case m.STATUS_NEW:var l=
this._getJobStatus;this._updateTimers[k]=setTimeout(function(){l(k,c,d,f,h)},this.updateDelay);break;default:this._successHandler([b],"onJobComplete",d,h)}},_getJobStatus:function(a,b,d,f,h){var k=this._jobUpdateHandler;s({url:this._url.path+"/jobs/"+a,content:c.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,c){k(a,c,b,d,f,h)},error:this._errorHandler})},_getResultDataHandler:function(a,b,c,d,f){try{var h=this._decode(a);this._successHandler([h],"onGetResultDataComplete",
c,f)}catch(k){this._errorHandler(k,d,f)}},getResultData:function(a,b,d,h){var m=this._getResultDataHandler,l=this._errorHandler,n=new f(k._dfdCanceller);n._pendingDfd=s({url:this._url.path+"/jobs/"+a+"/results/"+b,content:c.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(a,b){m(a,b,d,h,n)},error:function(a){l(a,h,n)}});return n},checkJobStatus:function(a,b,d){var h=this._jobUpdateHandler,m=this._errorHandler,l=new f(k._dfdCanceller);l._pendingDfd=
s({url:this._url.path+"/jobs/"+a,content:c.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,c){h(a,c,!0,null,b,l)},error:function(a){m(a,d,l)}});return l},cancelJob:function(a,b,d){var h=this._errorHandler,l=new f(k._dfdCanceller);l._pendingDfd=s({url:this._url.path+"/jobs/"+a+"/cancel",content:c.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:c.hitch(this,function(a,c){this._successHandler([a],"onJobCancel",b,l)}),error:function(a){h(a,d,l)}});
return l},execute:function(a,b,f,h){var k=this._getOutSR(),l=h.assembly;a=this._gpEncode(c.mixin({},this._url.query,{f:"json","env:outSR":k?k.wkid||d.toJson(k.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||d.toJson(this.processSpatialReference.toJson()):null},a),null,l&&l[0]);var m=this._executeHandler,n=this._errorHandler;return s({url:this._url.path+"/execute",content:a,callbackParamName:"callback",load:function(a,c){m(a,c,b,f,h.dfd)},error:function(a){n(a,
f,h.dfd)}})},_executeHandler:function(a,b,c,d,f){try{var h=a.results,k,l,m=a.messages;k=0;for(l=h.length;k<l;k++)h[k]=this._decode(h[k]);k=0;for(l=m.length;k<l;k++)m[k]=new n(m[k]);this._successHandler([h,m],"onExecuteComplete",c,f)}catch(p){this._errorHandler(p,d,f)}},_getResultImageHandler:function(a,b,c,d,f){try{var h=this._decode(a);this._successHandler([h],"onGetResultImageComplete",c,f)}catch(k){this._errorHandler(k,d,f)}},getResultImage:function(a,b,d,h,l){var m=this._getResultImageHandler,
n=this._errorHandler;d=this._gpEncode(c.mixin({},this._url.query,{f:"json"},d.toJson()));var p=new f(k._dfdCanceller);p._pendingDfd=s({url:this._url.path+"/jobs/"+a+"/results/"+b,content:d,callbackParamName:"callback",load:function(a,b){m(a,b,h,l,p)},error:function(a){n(a,l,p)}});return p},cancelJobStatusUpdates:function(a){clearTimeout(this._updateTimers[a]);this._updateTimers[a]=null},getResultImageLayer:function(a,b,c,d){if(null==b){var f=this._url.path.indexOf("/GPServer/");a=this._url.path.substring(0,
f)+"/MapServer/jobs/"+a}else a=this._url.path+"/jobs/"+a+"/results/"+b;this._url.query&&(a+="?"+h.objectToQuery(this._url.query));b=null==b?new B(a,{imageParameters:c}):new D(a,{imageParameters:c},!0);this.onGetResultImageLayerComplete(b);d&&d(b);return b},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});x._createWrappers(p);
return p})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(p,c,q,f){return p(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(d){d&&c.mixin(this,d)},distance:0,units:null,toJson:function(){var c={};this.distance&&(c.distance=this.distance);this.units&&(c.units=this.units);return c}})})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(p,c,q,f){return p(null,
{declaredClass:"esri.tasks.DataFile",constructor:function(d){d&&c.mixin(this,d)},url:null,itemID:null,toJson:function(){var c={};this.url&&(c.url=this.url);this.itemID&&(c.itemID=this.itemID);return c}})})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(p,c,q,f){return p(null,{declaredClass:"esri.tasks.RasterData",constructor:function(d){d&&c.mixin(this,d)},url:null,format:null,itemID:null,toJson:function(){var c={};this.url&&(c.url=
this.url);this.format&&(c.format=this.format);this.itemID&&(c.itemID=this.itemID);return c}})})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(p,c,q,f,d){return p(null,{declaredClass:"esri.tasks.Date",constructor:function(b){b&&(b.format&&(this.format=b.format),this.date=q.parse(b.date,{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:q.format(this.date,
{selector:"date",datePattern:this.format}),format:this.format}}})})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(p,c,q,f){return p(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(d){c.mixin(this,d)}})})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(p,c,q,
f,d,b,h){return p(h,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(b,d){d&&(d.imageParameters&&d.imageParameters.extent)&&(this.initialExtent=this.fullExtent=d.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=c.hitch(this,this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(b,f,h,p){var t=b.spatialReference.wkid;p(this._url.path+"?"+d.objectToQuery(c.mixin(this._params,{f:"image",bbox:q.toJson(b.toJson()),
bboxSR:t,imageSR:t,size:f+","+h})))}})})},"widgets/Analysis/layerUtil":function(){define(["dojo/_base/array","dojo/promise/all","jimu/LayerInfos/LayerInfos"],function(p,c,q){return{getLayerObjects:function(f){return q.getInstance(f,f.itemInfo).then(function(d){var b=[];d.traversal(function(c){b.push(c)});var f=p.map(b,function(b){return b.getLayerObject()});return c(f).then(function(c){var f=[];p.forEach(c,function(c,d){c.id=c.id||b[d].id;c&&"esri.layers.FeatureLayer"===c.declaredClass&&f.push(c)});
return{layerInfosObject:d,layerInfos:b,layerObjects:f}})})}}})},"widgets/Analysis/toolValidate":function(){define(["dojo/_base/lang","dojo/_base/array"],function(p,c){function q(f,d,b){var h=null;c.some(f,p.hitch(this,function(c){if(c&&b!==c.id)if(1===d.length){if("*"===d[0]||d[0]===c.geometryType)return h=c.id,!0}else if(-1<d.indexOf(c.geometryType))return h=c.id,!0}));return h}return{isValid:function(c,d,b){var h=!1,h=c.layerObjects;-1!==d.dijitID.indexOf("MergeLayers")?h=this.mergeAvailable(h):
-1!==d.dijitID.indexOf("ExtractData")?h=this.extractAvailable(c,b):(c=null,"requiredParam"in d&&(c=d.requiredParam),h=this.paramAvailable(h,d.analysisLayer,c));return h},mergeAvailable:function(f){return c.some(f,function(d){return c.some(f,function(b){return b!==d&&b.geometryType===d.geometryType})})},extractAvailable:function(f,d){var b=d.getUser(),h=f.layerInfos,p=f.layerInfosObject.getMapNotesLayerInfoArray(),s=!1;c.forEach(h,function(f){var h=this._isMapNotes(p,f),q="esri.layers.GeoRSSLayer"===
f.layerObject.declaredClass,l="esri.layers.CSVLayer"===f.layerObject.declaredClass,m="FeatureCollection"===f.layerObject.type,n=m&&!h;m||q||l||h?q||l?s=this._addExtractCapability(f):h||n?(f=f.getSubLayers())&&0<f.length&&c.forEach(f,function(b){s=this._addExtractCapability(b)},this):s=this._addExtractCapability(f):d.isAdmin()&&(f.layerObject.url&&-1<f.layerObject.url.indexOf("/"+b.accountId+"/"))&&(s=this._addExtractCapability(f))},this);return s},_isMapNotes:function(f,d){return c.some(f,function(b){return b.id===
d.id})},_addExtractCapability:function(c){c.layerObject.capabilities?-1===c.layerObject.capabilities.indexOf("Extract")&&(c.layerObject.capabilities+=",Extract"):c.layerObject.capabilities="Extract";return!0},paramAvailable:function(c,d,b){var h;h=d.geomTypes;d=q(c,h);return null===d?!1:null!==b?(h=b.geomTypes,null!==q(c,h,d)):!0}}})},"widgets/Analysis/PrivilegeUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred jimu/portalUtils jimu/portalUrlUtils jimu/Role esri/kernel ./PortalAnalysis".split(" "),
function(p,c,q,f,d,b,h,r){return p([],{userRole:null,userPortalUrl:null,portalAnalysis:null,portalSelf:null,portalUrl:null,constructor:function(b){this.portalUrl=b},_clearLoadedInfo:function(){this.portalUrl=this.portalSelf=this.portalAnalysis=this.userPortalUrl=this.userRole=null},loadPrivileges:function(b){b&&this.portalUrl!==b&&(this._clearLoadedInfo(),this.portalUrl=b);if(this._privilegeLoaded())return b=new q,b.resolve(!0),b;b=f.getPortal(b);return b.haveSignIn()?this._loadUserInfo(b):this._signIn(b)},
_signIn:function(b){return b.loadSelfInfo().then(c.hitch(this,function(b){var d=f.getPortal(b.portalHostname);return null===d?!1:d.signIn().then(c.hitch(this,function(b){return this._loadUserInfo(d,b)}))}))},_registerOrgCredential:function(b,f){f=d.getStandardPortalUrl(f);var p=c.clone(b.toJson()),q=f+"/sharing/rest";p.server=q;p.resources=[q];h.id.registerToken(p)},_loadUserInfo:function(d,f){return d.loadSelfInfo().then(c.hitch(this,function(c){this.userPortalUrl=c.urlKey?c.urlKey+"."+c.customBaseUrl:
this.portalUrl;return c&&c.user?(this.userRole=new b({id:c.user.roleId?c.user.roleId:c.user.role,role:c.user.role}),c.user.privileges&&this.userRole.setPrivileges(c.user.privileges),this.portalSelf=c,f&&this._registerOrgCredential(f,this.userProfile.portalUrl),this.portalAnalysis=new r(this.userRole,this.portalSelf),!0):!1}))},_privilegeLoaded:function(){return null!==this.portalSelf},getUser:function(){return this._privilegeLoaded()?this.portalSelf.user:null},isAdmin:function(){return this._privilegeLoaded()?
this.userRole.isAdmin():null},getUserPortal:function(){return this._privilegeLoaded()?this.userPortalUrl:null},isPortal:function(){return null!==this.portalSelf&&!0===this.portalSelf.isPortal},canPerformAnalysis:function(){return this.portalAnalysis.canPerformAnalysis()},hasPrivileges:function(b){return this.portalAnalysis.hasPrivileges(b)}})})},"jimu/Role":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/json","esri/lang"],function(p,c,q,f,d){return p(null,{id:null,
baseRole:null,name:null,description:null,privileges:[],privilegeObj:null,constructor:function(b){b=b||{};this.id=b.id;this.baseRole=b.role;this.name=b.name;this.description=b.description},_initPrivilegesObject:function(){this.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,
manageLicenses:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,createItem:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1}},features:{user:{edit:!1,fullEdit:!1}},opendata:{user:{openDataAdmin:!1,designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,elevation:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}}},
_readPrivileges:function(b){d.isDefined(b)&&b instanceof Array&&q.forEach(b,c.hitch(this,function(b){this._readPrivilege(b)}))},_readPrivilege:function(b){this._applyEffectToAction(!0,b)},_applyEffectToAction:function(b,c){switch(c){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=b;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=b;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=b;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=
b;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=b;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=b;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=b;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=b;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=b;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=
b;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=b;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=b;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=b;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=b;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=b;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=
b;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=b;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=b;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=b;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=b;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=b;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=
b;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=b;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=b;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=b;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=b;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=b;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=
b;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=b;break;case "features:user:edit":this.privilegeObj.features.user.edit=b;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=b;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=b;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=b;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=b;
break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=b;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=b;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=b;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=b;break;case "premium:user:elevation":this.privilegeObj.premium.user.elevation=b;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=
b;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=b;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=b}},_applyToAll:function(b){this.privilegeObj.portal.admin.inviteUsers=b;this.privilegeObj.portal.admin.disableUsers=b;this.privilegeObj.portal.admin.viewUsers=b;this.privilegeObj.portal.admin.updateUsers=b;this.privilegeObj.portal.admin.deleteUsers=b;this.privilegeObj.portal.admin.changeUserRoles=b;this.privilegeObj.portal.admin.viewGroups=
b;this.privilegeObj.portal.admin.updateGroups=b;this.privilegeObj.portal.admin.deleteGroups=b;this.privilegeObj.portal.admin.reassignGroups=b;this.privilegeObj.portal.admin.assignToGroups=b;this.privilegeObj.portal.admin.manageEnterpriseGroups=b;this.privilegeObj.portal.admin.viewItems=b;this.privilegeObj.portal.admin.updateItems=b;this.privilegeObj.portal.admin.deleteItems=b;this.privilegeObj.portal.admin.reassignItems=b;this.privilegeObj.portal.admin.manageLicenses=b;this.privilegeObj.portal.publisher.publishFeatures=
b;this.privilegeObj.portal.publisher.publishTiles=b;this.privilegeObj.portal.publisher.publishScenes=b;this.privilegeObj.portal.user.createGroup=b;this.privilegeObj.portal.user.joinGroup=b;this.privilegeObj.portal.user.joinNonOrgGroup=b;this.privilegeObj.portal.user.createItem=b;this.privilegeObj.portal.user.shareToGroup=b;this.privilegeObj.portal.user.shareToOrg=b;this.privilegeObj.portal.user.shareToPublic=b;this.privilegeObj.portal.user.shareGroupToOrg=b;this.privilegeObj.portal.user.shareGroupToPublic=
b;this.privilegeObj.features.user.edit=b;this.privilegeObj.opendata.user.openDataAdmin=b;this.privilegeObj.opendata.user.designateGroup=b;this.privilegeObj.premium.user.geocode=b;this.privilegeObj.premium.user.networkanalysis=b;this.privilegeObj.premium.user.spatialanalysis=b;this.privilegeObj.premium.user.geoenrichment=b;this.privilegeObj.premium.user.demographics=b;this.privilegeObj.premium.user.elevation=b;this.privilegeObj.marketplace.admin.purchase=b;this.privilegeObj.marketplace.admin.manage=
b;this.privilegeObj.marketplace.admin.startTrial=b},_buildPrivilegesArray:function(){var b=[];!0===this.privilegeObj.portal.admin.inviteUsers&&b.push("portal:admin:inviteUsers");!0===this.privilegeObj.portal.admin.disableUsers&&b.push("portal:admin:disableUsers");!0===this.privilegeObj.portal.admin.viewUsers&&b.push("portal:admin:viewUsers");!0===this.privilegeObj.portal.admin.updateUsers&&b.push("portal:admin:updateUsers");!0===this.privilegeObj.portal.admin.deleteUsers&&b.push("portal:admin:deleteUsers");
!0===this.privilegeObj.portal.admin.changeUserRoles&&b.push("portal:admin:changeUserRoles");!0===this.privilegeObj.portal.admin.viewGroups&&b.push("portal:admin:viewGroups");!0===this.privilegeObj.portal.admin.updateGroups&&b.push("portal:admin:updateGroups");!0===this.privilegeObj.portal.admin.deleteGroups&&b.push("portal:admin:deleteGroups");!0===this.privilegeObj.portal.admin.reassignGroups&&b.push("portal:admin:reassignGroups");!0===this.privilegeObj.portal.admin.assignToGroups&&b.push("portal:admin:assignToGroups");
!0===this.privilegeObj.portal.admin.manageEnterpriseGroups&&b.push("portal:admin:manageEnterpriseGroups");!0===this.privilegeObj.portal.admin.viewItems&&b.push("portal:admin:viewItems");!0===this.privilegeObj.portal.admin.updateItems&&b.push("portal:admin:updateItems");!0===this.privilegeObj.portal.admin.deleteItems&&b.push("portal:admin:deleteItems");!0===this.privilegeObj.portal.admin.reassignItems&&b.push("portal:admin:reassignItems");!0===this.privilegeObj.portal.admin.manageLicenses&&b.push("portal:admin:manageLicenses");
!0===this.privilegeObj.portal.publisher.publishFeatures&&b.push("portal:publisher:publishFeatures");!0===this.privilegeObj.portal.publisher.publishTiles&&b.push("portal:publisher:publishTiles");!0===this.privilegeObj.portal.publisher.publishScenes&&b.push("portal:publisher:publishScenes");!0===this.privilegeObj.portal.user.createGroup&&b.push("portal:user:createGroup");!0===this.privilegeObj.portal.user.joinGroup&&b.push("portal:user:joinGroup");!0===this.privilegeObj.portal.user.joinNonOrgGroup&&
b.push("portal:user:joinNonOrgGroup");!0===this.privilegeObj.portal.user.createItem&&b.push("portal:user:createItem");!0===this.privilegeObj.portal.user.shareToGroup&&b.push("portal:user:shareToGroup");!0===this.privilegeObj.portal.user.shareToOrg&&b.push("portal:user:shareToOrg");!0===this.privilegeObj.portal.user.shareToPublic&&b.push("portal:user:shareToPublic");!0===this.privilegeObj.portal.user.shareGroupToOrg&&b.push("portal:user:shareGroupToOrg");!0===this.privilegeObj.portal.user.shareGroupToPublic&&
b.push("portal:user:shareGroupToPublic");!0===this.privilegeObj.features.user.edit&&b.push("features:user:edit");!0===this.privilegeObj.features.user.fullEdit&&b.push("features:user:fullEdit");!0===this.privilegeObj.opendata.user.openDataAdmin&&b.push("opendata:user:openDataAdmin");!0===this.privilegeObj.opendata.user.designateGroup&&b.push("opendata:user:designateGroup");!0===this.privilegeObj.premium.user.geocode&&b.push("premium:user:geocode");!0===this.privilegeObj.premium.user.networkanalysis&&
b.push("premium:user:networkanalysis");!0===this.privilegeObj.premium.user.spatialanalysis&&b.push("premium:user:spatialanalysis");!0===this.privilegeObj.premium.user.geoenrichment&&b.push("premium:user:geoenrichment");!0===this.privilegeObj.premium.user.demographics&&b.push("premium:user:demographics");!0===this.privilegeObj.premium.user.elevation&&b.push("premium:user:elevation");!0===this.privilegeObj.marketplace.admin.purchase&&b.push("marketplace:admin:purchase");!0===this.privilegeObj.marketplace.admin.manage&&
b.push("marketplace:admin:manage");!0===this.privilegeObj.marketplace.admin.startTrial&&b.push("marketplace:admin:startTrial");return b},isUser:function(){return d.isDefined(this.id)&&("org_user"===this.id||"account_user"===this.id)},isPublisher:function(){return d.isDefined(this.id)&&("org_publisher"===this.id||"account_publisher"===this.id)},isAdmin:function(){return d.isDefined(this.id)&&("org_admin"===this.id||"account_admin"===this.id)},isBasedOnUser:function(){return this.isUser()||d.isDefined(this.baseRole)&&
("org_user"===this.baseRole||"account_user"===this.baseRole)},isBasedOnPublisher:function(){return this.isPublisher()||d.isDefined(this.baseRole)&&("org_publisher"===this.baseRole||"account_publisher"===this.baseRole)},isBasedOnAdmin:function(){return this.isAdmin()||d.isDefined(this.baseRole)&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)},isCustom:function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&d.isDefined(this.id)&&0<this.id.length},canInviteUsers:function(){return this.privilegeObj&&
this.privilegeObj.portal.admin.inviteUsers},canDisableUsers:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.disableUsers},canViewUsers:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewUsers},canUpdateUsers:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateUsers},canDeleteUsers:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteUsers},canChangeUserRoles:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.changeUserRoles},
canViewOrgGroups:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewGroups},canUpdateOrgGroups:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateGroups},canDeleteOrgGroups:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteGroups},canReassignOrgGroups:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.reassignGroups},canAssignUsersToOrgGroups:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.assignToGroups},
canManageEnterpriseGroups:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageEnterpriseGroups},canViewOrgItems:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.viewItems},canUpdateOrgItems:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.updateItems},canDeleteOrgItems:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.deleteItems},canReassignOrgItems:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.reassignItems},
canManageLicenses:function(){return this.privilegeObj&&this.privilegeObj.portal.admin.manageLicenses},canCreateGroup:function(){return this.privilegeObj&&this.privilegeObj.portal.user.createGroup},canJoinOrgGroup:function(){return this.privilegeObj&&this.privilegeObj.portal.user.joinGroup},canJoinNonOrgGroup:function(){return this.privilegeObj&&this.privilegeObj.portal.user.joinNonOrgGroup},canPublishFeatures:function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishFeatures},
canPublishTiles:function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishTiles},canPublishScenes:function(){return this.privilegeObj&&this.privilegeObj.portal.publisher.publishScenes},canCreateItem:function(){return this.privilegeObj&&this.privilegeObj.portal.user.createItem},canShareItemToGroup:function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareToGroup},canShareItemToOrg:function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareToOrg},canShareItemToPublic:function(){return this.privilegeObj&&
this.privilegeObj.portal.user.shareToPublic},canShareGroupToOrg:function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareGroupToOrg},canShareGroupToPublic:function(){return this.privilegeObj&&this.privilegeObj.portal.user.shareGroupToPublic},canEditFeatures:function(){return this.privilegeObj&&this.privilegeObj.features.user.edit},canEditFeaturesFullControl:function(){return this.privilegeObj&&this.privilegeObj.features.user.fullEdit},canManageOpenData:function(){return this.privilegeObj&&
this.privilegeObj.opendata.user.openDataAdmin},canDesignateOpenDataGroups:function(){return this.privilegeObj&&this.privilegeObj.opendata.user.designateGroup},canUseGeocode:function(){return this.privilegeObj&&this.privilegeObj.premium.user.geocode},canUseNetworkAnalysis:function(){return this.privilegeObj&&this.privilegeObj.premium.user.networkanalysis},canUseSpatialAnalysis:function(){return this.privilegeObj&&this.privilegeObj.premium.user.spatialanalysis},canUseGeoenrichment:function(){return this.privilegeObj&&
this.privilegeObj.premium.user.geoenrichment},canUseDemographics:function(){return this.privilegeObj&&this.privilegeObj.premium.user.demographics},canUseElevation:function(){return this.privilegeObj&&this.privilegeObj.premium.user.elevation},canPurchaseMarketplace:function(){return this.privilegeObj&&this.privilegeObj.marketplace.admin.purchase},canManageMarketplace:function(){return this.privilegeObj&&this.privilegeObj.marketplace.admin.manage},canTrialMarketplace:function(){return this.privilegeObj&&
this.privilegeObj.marketplace.admin.startTrial},setPrivileges:function(b){this.privileges=b;this._initPrivilegesObject();d.isDefined(b)&&this._readPrivileges(b)},stringify:function(){return f.stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()})},stringifyRole:function(){return f.stringify({id:this.id,name:this.name,description:this.description})},stringifyPrivileges:function(){return f.stringify({privileges:this._buildPrivilegesArray()})},stringifyPretty:function(){return f.stringify({id:this.id,
name:this.name,description:this.description,privileges:this._buildPrivilegesArray()},null,"  ")}})})},"widgets/Analysis/PortalAnalysis":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","esri/lang"],function(p,c,q,f){return p([],{userRole:null,portalSelf:null,constructor:function(c,b){this.userRole=c;this.portalSelf=b},canPerformAnalysis:function(){var c=!1;this.userRole&&(this.userRole.isAdmin()||this.userRole.isPublisher())?c=!0:this.userRole&&this.userRole.isCustom()&&
(c=this.userRole.canCreateItem()&&this.userRole.canPublishFeatures()&&this.userRole.canUseSpatialAnalysis());this.portalSelf&&this.portalSelf.isPortal&&(c=c&&f.isDefined(this.portalSelf.helperServices.analysis)&&f.isDefined(this.portalSelf.helperServices.analysis.url));return c},hasPrivileges:function(d){return c.isArray(d)?q.every(d,function(b){return"networkanalysis"===b?this._canPerformNetworkAnalysis():"geoenrichment"===b?this._canPerformGeoEnrichment():"elevation"===b?this._canPerformElevationAnalysis():
!1},this):!0},_canPerformNetworkAnalysis:function(){var c=f.isDefined(this.portalSelf.helperServices.asyncClosestFacility)&&f.isDefined(this.portalSelf.helperServices.asyncServiceArea)&&f.isDefined(this.portalSelf.helperServices.asyncVRP);return this.canPerformAnalysis()&&c&&this.userRole.canUseNetworkAnalysis()},_canPerformGeoEnrichment:function(){var c=f.isDefined(this.portalSelf.helperServices.geoenrichment);return this.canPerformAnalysis()&&c&&this.userRole.canUseGeoenrichment()},_canPerformElevationAnalysis:function(){var c=
f.isDefined(this.portalSelf.helperServices.elevation);return this.canPerformAnalysis()&&c&&this.userRole.canUseElevation()}})})},"widgets/Analysis/toolSettings":function(){define(["dojo/_base/lang","dojo/_base/array"],function(p,c){var q={},f="AggregatePoints CalculateDensity ConnectOriginsToDestinations CreateBuffers CreateDriveTimeAreas CreateViewshed CreateWatersheds DeriveNewLocations DissolveBoundaries EnrichLayer ExtractData FindExistingLocations FindHotSpots FindNearest FindSimilarLocations InterpolatePoints MergeLayers OverlayLayers PlanRoutes SummarizeNearby SummarizeWithin TraceDownstream".split(" "),
d=[{id:0,dijitID:"esri/dijit/analysis/AggregatePoints",title:"aggregateTool",imgDisplay:"images/aggregate-points.png",usage:"aggregatePointsUsage",analysisLayer:{name:"pointLayer",geomTypes:["esriGeometryPoint","esriGeometryMultipoint"]},requiredParam:{name:"polygonLayers",isArray:!0,geomTypes:["esriGeometryPolygon"]},icon:"images/AggregatePoints32.png"},{id:1,dijitID:"esri/dijit/analysis/CalculateDensity",title:"calculateDensity",imgDisplay:"images/calculate-density.png",usage:"calculateDensityUsage",
analysisLayer:{name:"inputLayer",geomTypes:["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline"]},optionalParams:[{name:"boundingPolygonLayers",isArray:!0,geomTypes:["esriGeometryPolygon"]}],icon:"images/CreateDensitySurface32.png"},{id:2,dijitID:"esri/dijit/analysis/ConnectOriginsToDestinations",title:"connectOriginsToDestinations",imgDisplay:"images/connect-origins-to-destinations.png",usage:"connectOriginsToDestinationsUsage",analysisLayer:{name:"originsLayer",geomTypes:["esriGeometryPoint"]},
requiredParam:{name:"featureLayers",isArray:!0,geomTypes:["esriGeometryPoint"]},icon:"images/ConnectOriginstoDestinations32.png",privileges:["networkanalysis"]},{id:3,dijitID:"esri/dijit/analysis/CreateBuffers",title:"createBuffers",imgDisplay:"images/create-buffers.png",usage:"createBuffersUsage",analysisLayer:{name:"inputLayer",geomTypes:["*"]},icon:"images/CreateBuffers32.png"},{id:4,dijitID:"esri/dijit/analysis/CreateDriveTimeAreas",title:"createDriveTimeAreas",imgDisplay:"images/create-drivetime.png",
usage:"createDriveTimeAreasUsage",analysisLayer:{name:"inputLayer",geomTypes:["esriGeometryPoint"]},icon:"images/CreateDriveTimeAreas32.png",cannotCancel:!0,privileges:["networkanalysis"]},{id:5,dijitID:"esri/dijit/analysis/CreateViewshed",title:"createViewshed",imgDisplay:"images/create-viewshed.png",usage:"createViewshedUsage",analysisLayer:{name:"inputLayer",geomTypes:["esriGeometryPoint"]},icon:"images/Viewshed32.png",privileges:["elevation"]},{id:6,dijitID:"esri/dijit/analysis/CreateWatersheds",
title:"createWatershed",imgDisplay:"images/create-watersheds.png",usage:"createWatershedsUsage",analysisLayer:{name:"inputLayer",geomTypes:["esriGeometryPoint"]},icon:"images/Watershed32.png",privileges:["elevation"]},{id:7,dijitID:"esri/dijit/analysis/DeriveNewLocations",title:"deriveNewLocations",imgDisplay:"images/derive-new-locations.png",usage:"deriveNewLocationsUsage",analysisLayer:{name:"analysisLayer",geomTypes:["*"]},optionalParams:[{name:"inputLayers",isArray:!0,geomTypes:["*"]}],icon:"images/FindNewLocations32.png"},
{id:8,dijitID:"esri/dijit/analysis/DissolveBoundaries",title:"dissolveBoundaries",imgDisplay:"images/dissolve-boundaries.png",usage:"dissolveBoundariesUsage",analysisLayer:{name:"inputLayer",geomTypes:["esriGeometryPolygon"]},icon:"images/DissolveBoundaries32.png"},{id:9,dijitID:"esri/dijit/analysis/EnrichLayer",title:"enrichLayer",imgDisplay:"images/enrich-layer.png",usage:"enrichLayerUsage",analysisLayer:{name:"inputLayer",geomTypes:["*"]},icon:"images/GeoenrichFeatures32.png",privileges:["geoenrichment"]},
{id:10,dijitID:"esri/dijit/analysis/ExtractData",title:"extractData",imgDisplay:"images/extract-data.png",usage:"extractDataDesc",optionalParams:[{name:"featureLayers",isArray:!0,geomTypes:["*"]}],icon:"images/ClipAndShip32.png"},{id:11,dijitID:"esri/dijit/analysis/FindExistingLocations",title:"findExistingLocations",imgDisplay:"images/find-existing-locations.png",usage:"findExistingLocationsUsage",analysisLayer:{name:"analysisLayer",geomTypes:["*"]},optionalParams:[{name:"inputLayers",isArray:!0,
geomTypes:["*"]}],icon:"images/FindExistingLocations32.png"},{id:12,dijitID:"esri/dijit/analysis/FindHotSpots",title:"findHotSpots",imgDisplay:"images/find-hot-spots.png",usage:"findHotSpotsUsage",analysisLayer:{name:"analysisLayer",geomTypes:["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolygon"]},optionalParams:[{name:"aggregationPolygonLayers",isArray:!0,geomTypes:["esriGeometryPolygon"]},{name:"boundingPolygonLayers",isArray:!0,geomTypes:["esriGeometryPolygon"]}],icon:"images/FindHotSpots32.png"},
{id:13,dijitID:"esri/dijit/analysis/FindNearest",title:"findNearest",imgDisplay:"images/find-nearest.png",usage:"findNearestUsage",analysisLayer:{name:"analysisLayer",geomTypes:["*"]},requiredParam:{name:"nearLayers",isArray:!0,geomTypes:["*"]},icon:"images/FindNearest32.png",cannotCancel:!0},{id:14,dijitID:"esri/dijit/analysis/FindSimilarLocations",title:"findSimilarLocations",imgDisplay:"images/find-similar-locations.png",usage:"findSimilarLocationsUsage",analysisLayer:{name:"inputLayer",geomTypes:["*"]},
optionalParams:[{name:"searchLayers",isArray:!0,geomTypes:["*"]}],icon:"images/FindSimilarLocations32.png"},{id:15,dijitID:"esri/dijit/analysis/InterpolatePoints",title:"interpolatePoints",imgDisplay:"images/interpolate-points.png",usage:"interpolatePointsUsage",analysisLayer:{name:"inputLayer",geomTypes:["esriGeometryPoint","esriGeometryMultipoint"]},optionalParams:[{name:"boundingPolygonLayers",isArray:!0,geomTypes:["esriGeometryPolygon"]},{name:"predictAtPointLayers",isArray:!0,geomTypes:["esriGeometryPoint"]}],
icon:"images/CreateInterpolatedSurface32.png"},{id:16,dijitID:"esri/dijit/analysis/MergeLayers",title:"mergeLayers",imgDisplay:"images/merge-layers.png",usage:"mergeLayersUsage",analysisLayer:{name:"inputLayer",geomTypes:["*"]},requiredParam:{name:"mergeLayers",isArray:!0,geomTypes:["*"]},icon:"images/MergeLayers32.png"},{id:17,dijitID:"esri/dijit/analysis/OverlayLayers",title:"overlayLayers",imgDisplay:"images/overlay-layers.png",usage:"overlayLayersUsage",analysisLayer:{name:"inputLayer",geomTypes:["*"]},
requiredParam:{name:"overlayLayer",isArray:!0,geomTypes:["*"]},icon:"images/OverlayLayers32.png"},{id:18,dijitID:"esri/dijit/analysis/PlanRoutes",title:"planRoutes",imgDisplay:"images/plan-routes.png",usage:"planRoutesUsage",analysisLayer:{name:"stopsLayer",geomTypes:["esriGeometryPoint"]},optionalParams:[{name:"featureLayers",isArray:!0,geomTypes:["esriGeometryPoint"]}],icon:"images/PlanRoutes32.png",cannotCancel:!0,privileges:["networkanalysis"]},{id:19,dijitID:"esri/dijit/analysis/SummarizeNearby",
title:"summarizeNearby",imgDisplay:"images/summarize-nearby.png",usage:"summarizeNearbyUsage",analysisLayer:{name:"sumNearbyLayer",geomTypes:["*"]},requiredParam:{name:"summaryLayers",isArray:!0,geomTypes:["*"]},icon:"images/SummarizeNearby32.png"},{id:20,dijitID:"esri/dijit/analysis/SummarizeWithin",title:"summarizeWithin",imgDisplay:"images/summarize-within.png",usage:"summarizeWithinUsage",analysisLayer:{name:"sumWithinLayer",geomTypes:["esriGeometryPolygon"]},requiredParam:{name:"summaryLayers",
isArray:!0,geomTypes:["*"]},icon:"images/SummarizeWithin32.png"},{id:21,dijitID:"esri/dijit/analysis/TraceDownstream",title:"traceDownstream",imgDisplay:"images/trace-downstream.png",usage:"traceDownstreamUsage",analysisLayer:{name:"inputLayer",geomTypes:["esriGeometryPoint"]},optionalParams:[{name:"boundingPolygonLayers",isArray:!0,geomTypes:["esriGeometryPolygon"]}],icon:"images/TraceDownstream32.png",privileges:["elevation"]}];q.findToolSetting=function(b){b=c.indexOf(f,b);return-1!==b?p.clone(d[b]):
null};q.getToolName=function(b){return"id"in b&&0<=b.id&&b.id<f.length?f[b.id]:null};q.getAllSettings=function(){return p.clone(d)};return q})},"widgets/Analysis/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:widgets/Analysis/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"widgetContent" class\x3d"analysis-widget-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"toolListPanel" class\x3d"tool-list"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"toolsSection" class\x3d"toolsSection"\x3e\r\n        \x3cdiv class\x3d"execute-tip"\x3e\r\n          ${nls.executeAnalysisTip}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"tools-table-container"\x3e\r\n          \x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"tools-table" onselectstart\x3d"return false;"\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"toolsTbody"\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"noQueryTipSection" class\x3d"jimu-widget"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"toolPanel" class\x3d"tool-panel"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"toolLoadErrorNode" class\x3d"analysis-error-tip" style\x3d"display:none"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"messagePanel" class\x3d"message-panel"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"inputHeader" class\x3d"input-header esriAnalysis"\x3e\r\n        \x3cimg data-dojo-attach-point\x3d"smallIcon" class\x3d"small-icon"/\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"toolTitle" class\x3d"tool-title"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3chr\x3e\r\n      \x3cdiv class\x3d"message-title"\x3e${nls.messages}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"messageSection" class\x3d\'message-section\'\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"resultSection" style\x3d"display:none" \x3e\r\n        \x3cdiv class\x3d"message-title outputs"\x3e${nls.outputs}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"outputSection" class\x3d\'result-section\'\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"job-message outputtip" data-dojo-attach-point\x3d"outputtip"\x3e${nls.outputtip}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"resultLoading" class\x3d"result-loading" style\x3d"display:none"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"buttonSection" style\x3d"display:none" class\x3d"buttonNode"\x3e\r\n        \x3cdiv class\x3d"jimu-btn"\r\n            data-dojo-attach-event\x3d"onclick: _switchToPrevious"\x3e${nls.back}\x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-btn" data-dojo-attach-point\x3d"homeBtn"\r\n            data-dojo-attach-event\x3d"onclick: _switchToHome"\x3e${nls.home}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Analysis/css/style.css":".esriAnalysis .dijitComboBox{height: 30px !important;}.jimu-widget-analysis{position: relative; width: 100%; height: 100%; min-width: 300px; min-height: 237px; overflow-x: hidden; -ms-overflow-x: hidden; overflow-y: auto; -ms-overflow-y: auto;}.jimu-widget-analysis .execute-tip{font-size: 14px; color: #66699c; font-weight: bold;}.jimu-widget-analysis .tools-table-container{width: 100%;}.jimu-widget-analysis .tools-table{margin: 0 auto; padding-top: 10px; width: 100%; border-collapse: collapse;}.jimu-widget-analysis .tool-name{font-size: 14px; margin-left: 10px; margin-top: 10px; color: #686868;}.jimu-rtl .jimu-widget-analysis .tool-name{margin-left: auto; margin-right: 10px;}.jimu-widget-analysis .tools-table-tr{height:107px; display: block; cursor: pointer;}.jimu-widget-analysis .tools-table-tr.even{background-color: #ffffff;}.jimu-widget-analysis .tools-table-tr.odd{background-color: #f0f0f0;}.jimu-widget-analysis .tools-table-tr.disabled{background-color: #979797; cursor: default; border-bottom: 1px solid #ffffff;}.jimu-widget-analysis .tools-table-tr .icon-div{margin: 10px;}.jimu-widget-analysis .tools-table-tr .icon-div .tool-icon{height: 60px; width: auto;}.jimu-widget-analysis .tools-table-tr .tooltip-td{margin: 10px;}.jimu-widget-analysis .tooltip-icon{width: 16px; height: 16px; cursor: pointer; margin-left: 30px;}.jimu-rtl .jimu-widget-analysis .tooltip-icon{margin-left: auto; margin-right: 30px;}.jimu-widget-analysis .tools-table-tr:hover{background: #d9dde0;}.jimu-widget-analysis .tools-table-tr.disabled:hover{background-color: #979797;}.jimu-widget-analysis .tool-params{width: 100%; height: 100%;}.jimu-widget-analysis .input-header{position: relative; width: 100%;}.jimu-widget-analysis .input-header .small-icon{margin-left: 15px;}.jimu-rtl .jimu-widget-analysis .input-header .small-icon{margin-left: auto; margin-right: 15px;}.jimu-widget-analysis .input-header .tool-title{margin-left: 15px; margin-bottom: 15px; font-size: 16px;}.jimu-rtl .jimu-widget-analysis .input-header .tool-title{margin-left: auto; margin-right: 15px;}.jimu-widget-analysis .input-header .help-icon{margin-top: 15px; cursor: pointer;}.jimu-widget-analysis .input-tip{width: 100%; height: auto; margin-top: 20px; font-size: 14px;}.jimu-widget-analysis .layerNode{position: relative; width:100%; margin: 0 auto; margin-top: 10px;}.jimu-widget-analysis .layerNode .param-name{margin-top: 15px; margin-bottom: 10px;}.jimu-widget-analysis .layer-name {height: 30px; line-height: 30px; width: 100%; border: solid 1px rgba(0,0,0,0.1); cursor: pointer;}.jimu-widget-analysis .tool-params .buttonNode{width: 100%; height: auto; margin-top: 20px; text-align: center;}.jimu-widget-analysis .switch-button{margin-left: 20px;}.jimu-rtl .jimu-widget-analysis .switch-button{margin-left: auto; margin-right: 20px;}.jimu-widget-analysis .tool-panel{width: 100%; height: auto; position: relative; top:-20px;}.jimu-widget-analysis .tool-panel .esriAnalysisCloseIcon{display:none;}.jimu-widget-analysis .jimu-btn{margin-left: 10px; margin-right: 10px;}.jimu-widget-analysis .toolpanel-button{text-align: center;}.jimu-widget-analysis .analysis-error-tip{width: 100%; min-height: 150px; margin-top: 30px; margin-left: 15px; margin-right: 15px; color:#ff0000; font-size: 14px;}.jimu-widget-analysis .message-panel{width: 100%; margin-bottom: 15px; position: relative;}.jimu-widget-analysis .message-panel .message-title{margin-top: 20px; font-size: 14px; color: #66696c; font-weight: bold;}.jimu-widget-analysis .message-panel .message-title.outputs{margin-top: 30px;}.jimu-widget-analysis .message-panel .job-message{margin-top: 10px; font-size: 12px; color: #686868;}.jimu-widget-analysis .message-panel .job-message.outputtip{margin-top: 30px;}.jimu-widget-analysis .message-panel .job-message.success{color: #00B050;}.jimu-widget-analysis .message-panel .job-message.failed{color:#E84B4B;}.jimu-widget-analysis .message-panel .job-message.cancelled{color: #51B1FE;}.jimu-widget-analysis .message-panel .job-running-icon{width: 16px; height: 16px; margin-left: 10px;}.jimu-rtl .jimu-widget-analysis .message-panel .job-running-icon{margin-left: auto; margin-right: 10px;}.jimu-widget-analysis .message-panel .job-cancel-icon{width: 16px; height: 16px; cursor: pointer; margin-left: 10px;}.jimu-rtl .jimu-widget-analysis .message-panel .job-cancel-icon{margin-left: auto; margin-right: 10px;}.jimu-widget-analysis .message-panel .output-item{margin-top: 10px; color: #51B1FE; font-size: 12px;}.jimu-widget-analysis .message-panel .output-item\x3ea{color: #51B1FE;}.jimu-widget-analysis .message-panel .button-section{width: 100%; margin-top: 20px;}.jimu-widget-analysis .message-panel .buttonNode{width: 100%; height: auto; margin-top: 20px; text-align: center;}.jimu-widget-analysis .result-section{width: 100%; margin-top: 15px; margin-bottom: 15px; font-size: 14px; color: #66699c;}.jimu-widget-analysis .result-loading{width: 100%; height: 40px; margin-top: 15px; margin-bottom: 15px; background-image: url(images/loading.gif); background-repeat: no-repeat; background-position: center;}.jimu-widget-analysis .hidden{display: none;}.jimu-widget-analysis .esriAnalysis .esriAnalysisSubmitButton{margin-left: 0px;}.jimu-rtl .jimu-widget-analysis .esriAnalysis .esriAnalysisSubmitButton{margin-right: 0px; margin-left: auto;}.jimu-widget-analysis .esriAnalysis .esriAnalysisSubmitButton.dijitButton\x3espan.dijitButtonNode{cursor:pointer; min-width: 70px; display:inline-block; padding:6px; font-size:15px; text-align:center; background:#485566; vertical-align:middle; color:#ffffff; -webkit-border-radius:5px; -moz-border-radius:5px; -o-border-radius:5px; -ms-border-radius:5px; border-radius: 5px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-analysis .esriAnalysis .esriAnalysisSubmitButton.dijitButtonHover\x3espan.dijitButtonNode{background-color: #15a4fa;}.dijitDialog .esriAnalysis{overflow: hidden;}.dijitDialog .esriAnalysis .esriAnalysisSubmitButton{margin-left: 10px;}.jimu-rtl .dijitDialog .esriAnalysis .esriAnalysisSubmitButton{margin-left: auto; margin-right: 10px;}.dijitDialog .esriAnalysis .esriAnalysisCloseIcon{display: none;}",
"url:widgets/Analysis/config.json":'{\r\n  "analysisTools": []\r\n}\r\n',"*now":function(p){p(['dojo/i18n!*preload*widgets/Analysis/nls/Widget*["ar","cs","da","de","en","el","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/dom-style dojo/dom-attr dojo/dom-class dojo/_base/event dojo/Deferred dojo/on dojo/query dojo/promise/all dojo/dom-construct dojo/i18n!esri/nls/jsapi dojo/json dijit/_WidgetsInTemplateMixin esri/request esri/tasks/JobInfo esri/layers/FeatureLayer esri/dijit/PopupTemplate esri/dijit/analysis/utils esri/geometry/Extent jimu/BaseWidget jimu/dijit/ViewStack jimu/dijit/Message jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/LayerInfos/LayerInfos ./layerUtil ./toolValidate ./PrivilegeUtil ./toolSettings dojo/i18n!./setting/nls/strings dijit/form/Button".split(" "),function(p,
c,q,f,d,b,h,r,s,k,x,t,l,m,n,C,w,A,z,E,D,B,a,g,e,v,y,F,G,H,I,J,K,L){return p([a,C],{baseClass:"jimu-widget-analysis esriAnalysis",_hasContent:null,privilegeUtil:null,currentStack:0,toolCountInList:0,postMixInProperties:function(){this.inherited(arguments);c.mixin(this.nls,m.analysisTools);this.nls.toolNotAvailable=L.toolNotAvailable},postCreate:function(){this.inherited(arguments);this.privilegeUtil=new J;this.viewStack=new g({viewType:"dom",views:[this.toolListPanel,this.toolPanel,this.messagePanel]});
q.place(this.viewStack.domNode,this.widgetContent);0===this.config.analysisTools.length&&this._noPrivilegeHandler(this.nls.noToolTip);this._switchView(0)},onClose:function(){D._helpDialog&&"function"===typeof D._helpDialog.close&&D._helpDialog.close();this._deactiveDrawTool()},onDeActive:function(){this._deactiveDrawTool()},_checkValidation:function(){l.empty(this.toolsTbody);0!==this.config.analysisTools.length&&(this.shelter.show(),this.privilegeUtil.loadPrivileges(this._getPortalUrl()).then(c.hitch(this,
function(a){!a||!this.privilegeUtil.canPerformAnalysis()?this._noPrivilegeHandler(this.nls.privilegeError):(d.set(this.toolsSection,"display","block"),d.set(this.noQueryTipSection,"display","none"),1===this.config.analysisTools.length?this._initSingleTool().then(c.hitch(this,function(){this.shelter.hide()})):this._initToolList().then(c.hitch(this,function(){this.shelter.hide()})))}),c.hitch(this,function(){this._noPrivilegeHandler(this.nls.privilegeError);this.shelter.hide()})))},_clearContent:function(){l.empty(this.toolsTbody);
this.currentAnalysisDijit&&(this.currentAnalysisDijit.destroy(),this.currentAnalysisDijit=null);this.currentToolSetting=null},_noPrivilegeHandler:function(a){this.shelter.hide();d.set(this.toolsSection,"display","none");b.set(this.noQueryTipSection,"innerHTML",a);d.set(this.noQueryTipSection,"display","block")},_initSingleTool:function(){d.set(this.homeBtn,"display","none");this.currentToolSetting=K.findToolSetting(this.config.analysisTools[0].name);if(null===this.currentToolSetting)this._noPrivilegeHandler(this.nls.noToolTip);
else{this.currentToolSetting=c.mixin(this.currentToolSetting,this.config.analysisTools[0]);this.currentToolSetting.toolLabel||(this.currentToolSetting.toolLabel=this.nls[this.currentToolSetting.title]);if(this.privilegeUtil.hasPrivileges(this.currentToolSetting.privileges))return H.getLayerObjects(this.map).then(c.hitch(this,function(){this._setIconAndLink(this.currentToolSetting);this.toolCountInList=1;this._switchToAnalysisTool()}));this._noPrivilegeHandler(this.nls.privilegeError)}},_initToolList:function(){d.set(this.homeBtn,
"display","");this.toolCountInList=0;var a=null;return H.getLayerObjects(this.map).then(c.hitch(this,function(b){f.forEach(this.config.analysisTools,c.hitch(this,function(d,f){var e=K.findToolSetting(d.name);if(null!==e&&(e=c.mixin(e,this.config.analysisTools[f]),e.toolLabel||(e.toolLabel=this.nls[e.title]),this.privilegeUtil.hasPrivileges(e.privileges))){var g=I.isValid(b,e,this.privilegeUtil);this._addTool(e,f,g);this.toolCountInList+=1;a=e}}));0===this.toolCountInList?this._noPrivilegeHandler(this.nls.privilegeError):
1===this.toolCountInList&&(this._setIconAndLink(a),this._switchToAnalysisTool())}),c.hitch(this,function(){console.error("layerUtil: getLayerObjects error")}))},destroy:function(){this._clearContent();this.inherited(arguments)},_addTool:function(a,d,f){var e=l.create("tr",{"class":"tools-table-tr"},this.toolsTbody);0===d%2?h.add(e,"even"):h.add(e,"odd");e.rowData=a;d=l.create("td",{"class":"icon-td"},e);l.create("div",{"class":"tool-name",innerHTML:a.toolLabel},d);d=l.create("div",{"class":"icon-div"},
d);l.create("img",{src:this.folderUrl+a.imgDisplay,"class":"tool-icon"},d);d=l.create("td",{"class":"tooltip-td esriAnalysis"},e);a.showHelp&&(d=l.create("a",{href:"#",esriHelpTopic:"toolDescription"},d),l.create("img",{src:this.folderUrl+"images/helpIcon.png",title:a.toolLabel,"class":"tooltip-icon"},d),d=a.dijitID.lastIndexOf("/"),d=a.dijitID.substring(d+1),D.initHelpLinks(e,!0,{helpFileName:d}));!0===f?(b.set(e,"title",""),this.own(k(e,"click",c.hitch(this,function(b){r.stop(b);this._setIconAndLink(a);
this.currentToolSetting=a;this._switchToAnalysisTool()})))):(b.set(e,"title",this.nls.toolNotAvailable),h.remove(e,"even"),h.remove(e,"odd"),h.add(e,"disabled"))},_setIconAndLink:function(a){b.set(this.smallIcon,"src",this.folderUrl+a.icon);b.set(this.toolTitle,"innerHTML",a.toolLabel);var c=a.dijitID.lastIndexOf("/"),c=a.dijitID.substring(c+1);this.helpLink&&(l.destroy(this.helpLink),this.helpLink=null);a.showHelp&&(this.helpLink=l.create("a",{href:"#",esriHelpTopic:"toolDescription"},this.inputHeader),
l.create("img",{height:16,width:16,"class":"help-icon jimu-float-trailing",src:this.folderUrl+"images/helpIcon.png"},this.helpLink),D.initHelpLinks(this.inputHeader,!0,{helpFileName:c}))},_switchToAnalysisTool:function(){d.set(this.toolLoadErrorNode,"display","none");this.shelter.show();require([this.currentToolSetting.dijitID],c.hitch(this,function(a){this.currentAnalysisDijit&&(this.currentAnalysisDijit.destroy(),this.currentAnalysisDijit=null);var f={map:this.map,showSelectFolder:!0,portalUrl:this._getPortalUrl(this.privilegeUtil.getUserPortal()),
showCredits:this.currentToolSetting.showCredits,showHelp:this.currentToolSetting.showHelp,showChooseExtent:this.currentToolSetting.showChooseExtent,returnFeatureCollection:this.currentToolSetting.returnFeatureCollection,showReadyToUseLayers:this.currentToolSetting.showReadyToUseLayers};if("findNearest"===this.currentToolSetting.title||"summarizeNearby"===this.currentToolSetting.title||"enrichLayer"===this.currentToolSetting.title)f.enableTravelModes=this.privilegeUtil.hasPrivileges(["networkanalysis"]);
"returnFeatureCollection"in this.currentToolSetting&&(f.showSelectFolder=!this.currentToolSetting.returnFeatureCollection);this._getLayerObjects().then(c.hitch(this,function(e){this.currentToolSetting.analysisLayer&&(f.showSelectAnalysisLayer=!0,f[this.currentToolSetting.analysisLayer.name+"s"]=this._prepareLayers(e,this.currentToolSetting.analysisLayer.geomTypes));e=this._prepareLayerParams(e);c.mixin(f,e);try{if(-1!==this.currentToolSetting.dijitID.indexOf("DeriveNewLocations")||-1!==this.currentToolSetting.dijitID.indexOf("FindExistingLocations")||
-1!==this.currentToolSetting.dijitID.indexOf("FindSimilarLocations"))f.primaryActionButttonClass="esriAnalysisSubmitButton";this.currentAnalysisDijit=new a(f);this.currentAnalysisDijit._setTitleAttr(this.currentToolSetting.toolLabel);this._bindAnalysisEvents(this.currentAnalysisDijit);l.place(this.currentAnalysisDijit.domNode,this.toolPanel,"first");this.currentDijitID=this.currentToolSetting.dijitID;var g;if(1<this.toolCountInList&&(g=x(".esriAnalysis .esriAnalysisSubmitButton",this.toolPanel)[0],
"undefined"!==typeof g)){h.add(g,"multiTool");var m=l.create("div",{"class":"toolpanel-button"}),n=l.create("div",{"class":"jimu-btn",innerHTML:this.nls.back},m);l.place(m,g,"before");l.place(g,m);this.currentAnalysisDijit.own(k(n,"click",c.hitch(this,this._switchToPrevious)))}}catch(p){console.error(p),b.set(this.toolLoadErrorNode,"innerHTML",p),d.set(this.toolLoadErrorNode,"display","")}this.shelter.hide()}))}),c.hitch(this,function(a){b.set(this.toolLoadErrorNode,"innerHTML",a);d.set(this.toolLoadErrorNode,
"display","");this.shelter.hide()}));this._switchView(1)},_prepareLayerParams:function(a){var b={};if("optionalParams"in this.currentToolSetting||"requiredParam"in this.currentToolSetting){var c;"requiredParam"in this.currentToolSetting&&(c=this._prepareLayers(a,this.currentToolSetting.requiredParam.geomTypes),b[this.currentToolSetting.requiredParam.name]=this.currentToolSetting.requiredParam.isArray?c:0<c.length?c[0]:null);"optionalParams"in this.currentToolSetting&&f.forEach(this.currentToolSetting.optionalParams,
function(d){c=this._prepareLayers(a,d.geomTypes);b[d.name]=d.isArray?c:0<c.length?c[0]:null},this)}return b},_prepareLayers:function(a,b){var c,d=["point","polyline","polygon"],e=[];"*"!==b[0]&&(d=f.map(b,function(a){return v.getTypeByGeometryType(a)}));f.forEach(a,function(a){"esri.layers.FeatureLayer"===a.declaredClass&&(c=v.getTypeByGeometryType(a.geometryType),0<=d.indexOf(c)&&(a.url||0<a.graphics.length)&&e.push(a))},this);return e},_getLayerObjects:function(){var a=new s;G.getInstance(this.map,
this.map.itemInfo).then(c.hitch(this,function(b){var d=[];b.traversal(function(a){d.push(a)});b=f.map(d,function(a){return a.getLayerObject()});t(b).then(c.hitch(this,function(b){var c=[];f.forEach(b,function(a){a&&c.push(a)});a.resolve(c)}),function(b){a.resolve([])})}));return a},_deactiveDrawTool:function(){if(this.currentAnalysisDijit)if("findHotSpots"===this.currentToolSetting.title||"calculateDensity"===this.currentToolSetting.title||"traceDownstream"===this.currentToolSetting.title||"interpolatePoints"===
this.currentToolSetting.title||"findSimilarLocations"===this.currentToolSetting.title)this.currentAnalysisDijit.clear();else if("planRoutes"===this.currentToolSetting.title||"extractData"===this.currentToolSetting.title)this.currentAnalysisDijit.clear(),this.map.setInfoWindowOnClick(!0)},_bindAnalysisEvents:function(a){this.own(k(a,"start",c.hitch(this,this._onJobStart)));this.own(k(a,"job-submit",c.hitch(this,this._onJobSubmitted)));this.own(k(a,"job-cancel",c.hitch(this,this._onJobCancelled)));
this.own(k(a,"job-fail",c.hitch(this,this._onJobFailed)));this.own(k(a,"job-success",c.hitch(this,this._onJobSucceed)));this.own(k(a,"job-status",c.hitch(this,this._onJobStatusChange)));this.own(k(a,"job-result",c.hitch(this,this._onJobResultData)));this.own(k(a,"drawtool-activate",c.hitch(this,function(){this.map.setInfoWindowOnClick(!1)})));this.own(k(a,"drawtool-deactivate",c.hitch(this,function(){this.map.setInfoWindowOnClick(!0)})))},_onJobStart:function(){this._clearMessageLogs();this.shelter.show();
this._switchView(2)},_onJobSubmitted:function(a){this.shelter.hide();this.outputProperties=null;a.OutputName&&(this.outputProperties=n.parse(a.OutputName,!0));this._appendMessage(this.nls[this.currentToolSetting.title]+" "+this.nls.jobSubmitted);a=l.create("div",{"class":"job-message waiting"},this.messageSection);l.create("img",{"class":"job-running-icon",src:this.folderUrl+"images/loading.gif"},a)},_onJobCancelled:function(a){a.jobStatus?this._appendMessage(this.nls.jobCancelled+": "+a.jobStatus,
"cancelled"):this._appendMessage(this.nls.jobCancelled,"cancelled");this._onJobDone();d.set(this.buttonSection,"display","")},_onJobFailed:function(a){this.shelter.hide();"warning"===a.type?(this.currentAnalysisDijit.set("disableRunAnalysis",!1),this._switchView(1),new e({message:a.message})):(2!==this.currentStack&&(this._clearMessageLogs(),this._switchView(2)),this._appendMessage(this.nls.jobFailed+": "+(a.analysisReport||a.message),"failed"),this._onJobDone(),d.set(this.buttonSection,"display",
""))},_onJobSucceed:function(a){this._appendMessage(this.nls.jobSuccess,"success");this._onJobDone();0<=this.currentToolSetting.dijitID.indexOf("ExtractData")&&(d.set(this.resultSection,"display",""),b.set(this.outputtip,"innerHTML",this.nls.outputSaveInPortal));d.set(this.buttonSection,"display","");d.set(this.resultLoading,"display","")},_onJobDone:function(){x("img.job-executing",this.messagePanel).forEach(function(a){l.destroy(a)})},_onJobStatusChange:function(a){this.shelter.hide();a.jobId&&
a.jobId!==this.currentToolJobId&&(this.currentToolJobId=a.jobId);if(a.jobStatus===A.STATUS_EXECUTING)this._appendExecutingMessage();else switch(a.jobStatus){case A.STATUS_FAILED:case A.STATUS_CANCELLED:case A.STATUS_DELETED:case A.STATUS_TIMED_OUT:this.shelter.hide();"string"===typeof a.message&&this._appendMessage(a.message,"failed");this._onJobDone();d.set(this.buttonSection,"display","");break;case A.STATUS_SUCCEEDED:"string"===typeof a.message&&this._appendMessage(a.message),this._onJobDone(),
d.set(this.buttonSection,"display","")}},_onJobResultData:function(a){d.set(this.resultLoading,"display","none");b.set(this.outputtip,"innerHTML",this.nls.outputtip);d.set(this.resultSection,"display","");d.set(this.buttonSection,"display","");var c=this._appendResultMessage(a);console.debug("outputLayerName: "+c);if(0>this.currentToolSetting.dijitID.indexOf("ExtractData")){var e;if(a.value.itemId)e=null,"layerInfo"in a.value&&(e=a.value.layerInfo.popupInfo),this._fetchResultByItemId(c,a.value.itemId,
e);else if("layerDefinition"in a.value){var g={title:c?c:"output",fieldInfos:[]};f.forEach(a.value.layerDefinition.fields,function(b){b.name!==a.value.layerDefinition.objectIdField&&g.fieldInfos.push({fieldName:b.name,visible:!0,label:b.alias,isEditable:!1})});e=new E(g);e=new z(a.value,{infoTemplate:e});e.title=c?c:"output";this.map.addLayer(e)}}},_fetchResultByItemId:function(a,b,d){y.getPortal(this._getPortalUrl(this.privilegeUtil.getUserPortal())).getItemById(b).then(c.hitch(this,function(e){var g=
e.url;w({url:g,content:{f:"json"},handleAs:"json"}).then(c.hitch(this,function(e){var h=e.tables||[],k=e.layers||[];h.reverse();k.reverse();f.forEach(h,function(b){var c=g+"/"+b.id;G.getInstance(this.map,this.map.itemInfo).then(function(d){d.addTable({url:c,title:a+" - "+b.name,options:{outFields:["*"]}})})},this);f.forEach(k,function(a){var e=g+"/"+a.id,f=null;1===k.length&&(f=d);this._buildFeatureLayer(a.name,e,f,b).then(c.hitch(this,function(a){this.map.addLayer(a)}))},this);e.initialExtent&&this.map.setExtent(new B(e.initialExtent))}))}))},
_buildFeatureLayer:function(a,b,d,e){if(null!==d){var g=new s;d.title=a;d=new z(b,{mode:z.MODE_SNAPSHOT,infoTemplate:new E(d),outFields:["*"]});d._itemId=e;g.resolve(d);return g}return w({url:b,content:{f:"json"},handleAs:"json"}).then(c.hitch(this,function(c){var d={title:a,fieldInfos:[]};f.forEach(c.fields,function(a){a.name!==c.objectIdField&&d.fieldInfos.push({fieldName:a.name,visible:!0,label:a.alias,isEditable:!1})});var g=new z(b,{mode:z.MODE_SNAPSHOT,infoTemplate:new E(d),outFields:["*"]});
g._itemId=e;return g}),c.hitch(this,function(){var a=new z(b);a._itemId=e;return a}))},_clearMessageLogs:function(){l.empty(this.messageSection);l.empty(this.outputSection);d.set(this.resultSection,"display","none");d.set(this.buttonSection,"display","none")},_appendMessage:function(a,b){l.create("div",{"class":"job-message "+(b?b:""),innerHTML:a},this.messageSection)},_appendExecutingMessage:function(){x("div.waiting",this.messagePanel).forEach(function(a){l.destroy(a)});if(0===x("div.job-executing",
this.messagePanel).length){var a=l.create("div",{"class":"job-message job-executing"},this.messageSection);l.create("span",{innerHTML:this.nls.executing},a);l.create("img",{"class":"job-running-icon job-executing",src:this.folderUrl+"images/loading.gif"},a);var b=!1;!0===this.currentToolSetting.cannotCancel?b=!0:0<=this.currentToolSetting.dijitID.indexOf("EnrichLayer")&&this.currentAnalysisDijit&&this.currentAnalysisDijit.enableTravelModes&&(b=!0);b||(a=l.create("img",{"class":"job-cancel-icon job-executing",
src:this.folderUrl+"images/cancel.png",title:this.nls.cancelJob},a),this.own(k(a,"click",c.hitch(this,this._cancelTask))))}},_appendResultMessage:function(a){if(a.paramName){var c=a.paramName,d=l.create("div",{"class":"output-item"},this.outputSection);if(a.value&&a.value.itemId){var e=F.getItemDetailsPageUrl(this._getPortalUrl(this.privilegeUtil.getUserPortal()),a.value.itemId);"object"===typeof this.outputProperties&&a.value.itemId===this.outputProperties.itemProperties.itemId&&(c=this.outputProperties.serviceProperties.name);
l.create("a",{href:e,target:"_blank",innerHTML:c},d)}else b.set(d,"innerHTML",a.paramName);return c}return null},_getPortalUrl:function(a){return a?F.getStandardPortalUrl(a):F.getStandardPortalUrl(this.appConfig.portalUrl)},_cancelTask:function(){this.currentToolJobId&&this.currentAnalysisDijit&&this.currentAnalysisDijit.cancel({jobId:this.currentToolJobId})},_switchToPrevious:function(){2===this.currentStack?this._switchToAnalysisTool():(this._deactiveDrawTool(),this._switchView(0))},_switchToHome:function(){1<
this.toolCountInList?this._switchView(0):this._switchToAnalysisTool()},_switchView:function(a){0===a&&this._checkValidation();this.currentStack=a;this.viewStack.switchView(a)}})});